(this["webpackJsonpVeto-react"]=this["webpackJsonpVeto-react"]||[]).push([[0],{520:function(e,t,n){},738:function(e,t,n){},831:function(e,t,n){},938:function(e,t,n){},955:function(e,t){},998:function(e,n,c){"use strict";c.r(n);var r=c(2),a=c.n(r),i=(c(520),c(81)),s=c.n(i),d=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,1064)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))},l=c(10),o=c(24),u=c(34),j=c(40),b=c(70),m=c(72),O=c(4),x=c(1),h=function(e){var t=e.title,n=e.route,c=Object(o.h)().pathname==n;return Object(x.jsx)("li",{class:"nav-item",children:Object(x.jsxs)(l.b,{as:l.c,to:n,class:"text-white nav-link ".concat(c?"active":""),children:[Object(x.jsx)("i",{class:"far fa-circle nav-icon"}),Object(x.jsx)("p",{children:t})]})})},v=function(e){var t=e.children,n=e.title,c=Object(r.useState)(!1),a=Object(O.a)(c,2),i=a[0];a[1];return Object(x.jsxs)("li",{as:l.c,class:"nav-item ".concat(i?"menu-is-opening":null," menu-open"),children:[Object(x.jsxs)("a",{href:"#",class:"nav-link",children:[Object(x.jsx)("i",{class:"nav-icon fas fa-tachometer-alt"}),Object(x.jsxs)("p",{children:[n,Object(x.jsx)("i",{className:"right fas fa-angle-left"})]})]}),Object(x.jsx)("ul",{className:"nav nav-treeview",style:{display:"block"},children:t})]})};var p="/tdb-depot-magasin",f="/tdb-vente-cbv",g="/tdb-facture",N="/create-product",y="/products",C="/perimes",q="/rupture",A="/credit/normal",S="/credit/vaccinateur",E="/direct",w="/parametres",P="/product/fournisseur",V="/product/category",R="/entree",F="/sortie",D="/bon/sortie",M="/nouvelle/facture",B="/list/approv",T="/signin",k="/signup",I="/admin",_="/historique/sortie/cva",Q="/historique/vente/vendeur/:type",L="/historique/vente/admin/vendeur",H="/etat/stock/magasin",U="/corrections",Y="/historique/corrections",z="/fournisseurs/list",K="/add-fournisseur",G="/categories/list",W="/add-categories",J="/emprunteurs/list",X="/add-emprunteurs",Z="/vaccinateurs/list",$="/add-vaccinateurs",ee="/historique-admin/vente/vendeur/:type",te=function(e){Object(b.a)(n,e);var t=Object(m.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.navigation,e.title),c=(e.titleShort,this.props.searchbarFilter,this.props.homeTo);return t||(t=[Object(x.jsx)("div",{children:"No content"})]),t.length||(t=[t]),n.length||(n=[n]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{class:"wrapper position-relative",children:[Object(x.jsx)("div",{className:"bg-dark m-0  p-2  text-center",children:Object(x.jsx)("h4",{className:"m-0 p-2 text-white",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsxs)("aside",{className:"main-sidebar sidebar-dark-primary",style:{maxHeight:"100%",overflow:"auto"},children:[Object(x.jsx)(l.b,{to:c,className:"brand-link border-0",children:Object(x.jsx)("span",{className:"ml-4 brand-text font-weight-light text-center text-uppercase",children:n})}),Object(x.jsx)("div",{class:"sidebar",children:Object(x.jsx)("nav",{class:"mt-2",children:Object(x.jsxs)("ul",{class:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false",children:[Object(x.jsx)(h,{title:"Tableau de bord",route:"/"}),Object(x.jsxs)(v,{title:"Factures && Produits",children:[Object(x.jsx)(h,{title:"Factures",route:B}),Object(x.jsx)(h,{title:"Produits",route:y})]}),Object(x.jsxs)(v,{title:"D\xe9pot",children:[Object(x.jsx)(h,{title:"Bon de sortie",route:D}),Object(x.jsx)(h,{title:"Historique de sortie",route:F}),Object(x.jsx)(h,{title:"Credit",route:A}),Object(x.jsx)(h,{title:"Vaccinateur",route:S})]}),Object(x.jsxs)(v,{title:"Magasin",children:[Object(x.jsx)(h,{title:"Depot vers Magasin",route:I}),Object(x.jsx)(h,{title:"Historique de 'D\xe9p\xf4t vers Magasin'",route:_})]}),Object(x.jsxs)(v,{title:"Correction",children:[Object(x.jsx)(h,{title:"Ajouter une correction",route:U}),Object(x.jsx)(h,{title:"Historique de correction",route:Y})]}),Object(x.jsxs)(v,{title:"Vente",children:[Object(x.jsx)(h,{title:"Effectuer une vente",route:"/vendre/in/admin"}),Object(x.jsx)(h,{title:"Etat de stock magasin",route:H}),Object(x.jsx)(h,{title:"Historique de vente du magasin",route:"/historique-admin/vente/vendeur/vente-cva"}),Object(x.jsx)(h,{title:"Cr\xe9dit",route:"/historique-admin/vente/vendeur/credit-cva"})]}),Object(x.jsxs)(v,{title:"Parametres",children:[Object(x.jsx)(h,{title:"Categories",route:G}),Object(x.jsx)(h,{title:"Fournisseurs",route:z}),Object(x.jsx)(h,{title:"Demandeurs de credit",route:J}),Object(x.jsx)(h,{title:"Vaccinateurs",route:Z})]})]})})})]}),Object(x.jsx)("div",{children:t})]})})}}]),n}(a.a.PureComponent);te.defaultProps={children:null,title:["Admin","LTE"],browserTitle:null,theme:"blue",footer:null,sidebar:void 0,homeTo:"/",searchbarFilter:!1};var ne=te,ce=c(12),re=(c(529),c.p,c(738),c(17)),ae=c.n(re);c(1061);var ie=c(3),se=c(71),de=c.n(se);function le(e){var t=e.children,n=e.title,c=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{class:"content-header p-2 shadow-sm bg-white",children:Object(x.jsx)("div",{class:"container-fluid",children:Object(x.jsxs)("div",{class:"row",children:[Object(x.jsx)("div",{class:"col-sm-6",children:Object(x.jsx)("h4",{class:"mt-2 text-uppercase",children:n})}),Object(x.jsx)("div",{class:"col-sm-6",children:Object(x.jsxs)("ol",{class:"breadcrumb float-sm-right",children:[Object(x.jsx)("li",{class:"breadcrumb-item",children:Object(x.jsx)(l.b,{to:"/",children:"Accueil"})}),t]})})]})})}),Object(x.jsx)("div",{className:"mb-1",children:Object(x.jsxs)("button",{type:"button",onClick:function(){return c.goBack()},className:"btn btn-link",children:["<<"," Revenir en arriere"]})})]})})}var oe=a.a.memo(le,de.a);function ue(e){var t=e.title;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("li",{class:"breadcrumb-item active",children:t})})}var je=a.a.memo(ue,de.a);function be(e){var t=e.children;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{class:"content-wrapper",children:t})})}var me=a.a.memo(be,de.a);function Oe(e){var t=e.children;return Object(x.jsx)("section",{class:"content",children:Object(x.jsx)("div",{class:"container-fluid",children:t})})}var xe=a.a.memo(Oe),he=(c(253),c(119)),ve=c.n(he),pe=c(26);c(512);var fe=function(e){var t=new Date(e),n=t.getDate(),c=t.getMonth(),r=t.getFullYear();return" ".concat(n," ").concat(["Janvier","Fevrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","Decembre"][c]," ").concat(r)},ge=function(e){return new Intl.NumberFormat("fr-MG",{style:"currency",currency:"MGA"}).format(e)};function Ne(e){return e.toString().replace(/\s/g,"").toLowerCase()}var ye=function(e,t){if(Ne(e).includes(Ne(t)))return!0};var Ce=function(e){var t=e.date,n=new Date(t).toLocaleString("fr-FR",{weekday:"short"}),c=new Date(t).getDate();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("td",{style:{height:"100%"},className:"sam."==n?" bg-warning text-white text-center mr-2":"bg-dark text-center mr-2",children:c})})},qe=function(e){var t=e.flat,n=(e.gr,e.quantityb,e.quantityc,e.quantitycond,e.id),c=t.filter((function(e){return e.id==n})),r=void 0!=c[c.length-1]?c[c.length-1]:{},a=(r.hasOwnProperty("id")&&r.quantityBruteCVA,r.hasOwnProperty("id")&&r.quantityCCCVA,0),i=0,s=0;c?(a=c.map((function(e){return 1*e.quantityParProduct})).reduce((function(e,t){return e+t}),0),i=c.map((function(e){return e.qttByCC})).reduce((function(e,t){return e+t}),0),s=c.map((function(e){return e.qttbylitre})).reduce((function(e,t){return e+t}),0)):(a=0,i=0,s=0);var d=c.map((function(e){return e.prixVente}));return Object(x.jsx)("td",{className:"text-center p-1",title:"prix de vente:"+d[0]!=void 0?d[0]:"",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{className:0==c.length?"text-center p-1":"text-center bg-secondary p-1 text-white",children:0!=s?s:"-"}),Object(x.jsx)("td",{className:0==c.length?"text-center p-1":"text-center bg-primary p-1 text-white",children:0!=a?a:"-"}),Object(x.jsx)("td",{className:0==c.length?"text-center  p-1":"text-center  bg-warning p-1",children:0!=i?i:"-"})]})})},Ae=function(e,t,n,c){return e.filter((function(e){var r=new Date(e[t]);return ae()(r).isBetween(n,c,"days","[]")}))},Se=function(e,t){var n;return Object(ce.a)(new Set((n=[]).concat.apply(n,Object(ce.a)(e.map((function(e){return e[t]}))))))},Ee=c(7),we=c(56),Pe=c.n(we),Ve=c(156),Re=c(771),Fe=c(774);function De(e,t,n,c){var r=Re(e).toUpperCase(),a=n.toUpperCase(),i=r+"_"+a+"_START",s=r+"_"+a+"_SUCCESS",d=r+"_"+a+"_ERROR",l=n+"Start",o=n+"Success",u=n+"Error";t[i]=i,t[s]=s,t[d]=d,c.addAlias&&(t[l]=i,t[o]=s,t[u]=d)}var Me=function(e,t){if(null==e)throw new Error("Expected resource");if(null==(t=t||{}).addAlias&&(t.addAlias=!0),""==(e=Fe(e)))throw new Error("Expected resource");var n={};return De(e,n,"get",t),De(e,n,"fetch",t),De(e,n,"create",t),De(e,n,"update",t),De(e,n,"delete",t),n},Be=c(153);function Te(e,t){return e.resourceName+"."+t}var ke=function(e,t,n){var c=Te(e,t);if(Be(Array,n))throw new TypeError(c+": Expected record not to be an array")};var Ie=function(e,t){if(null==e)throw new Error("actionCreatorsFor: Expected resourceName");t=t||function(e){return{key:"id",resourceName:e}}(e),t=Pe()(t,{resourceName:e});var n=Me(e);function c(e,t){Ve(null!=t,"Expected error in "+e)}function r(e,n){Ve(null!=n,"Expected record in "+e),ke(t,"createStart",n)}return{getStart:function(e){return{data:e,type:n.getStart}},getSuccess:function(e,t){return Ve(null!=e,"Expected record in getSuccess"),{data:t,records:e,type:n.getSuccess}},getError:function(e,t){return c("getError",e),{data:t,error:e,type:n.getError}},fetchStart:function(e){return{data:e,type:n.fetchStart}},fetchSuccess:function(e,t){return function(e,t){Ve(null!=t,"Expected records "+e)}("fetchSuccess",e),{data:t,records:e,type:n.fetchSuccess}},fetchError:function(e,t){return c("fetchError",e),{data:t,error:e,type:n.fetchError}},createStart:function(e,t){return r("createStart",e),{data:t,record:e,type:n.createStart}},createSuccess:function(e,t,c){return r("createSuccess",e),{cid:t,data:c,record:e,type:n.createSuccess}},createError:function(e,t,a){var i="createError";return c(i,e),r(i,t),{data:a,error:e,record:t,type:n.createError}},updateStart:function(e,t){return r("updateStart",e),{data:t,record:e,type:n.updateStart}},updateSuccess:function(e,t){return r("updateSuccess",e),{data:t,record:e,type:n.updateSuccess}},updateError:function(e,t,a){var i="updateError";return c(i,e),r(i,t),{data:a,error:e,record:t,type:n.updateError}},deleteStart:function(e,t){return r("deleteStart",e),{data:t,record:e,type:n.deleteStart}},deleteSuccess:function(e,t){return r("deleteSuccess",e),{data:t,record:e,type:n.deleteSuccess}},deleteError:function(e,t,a){var i="deleteError";return c(i,e),r(i,t),{data:a,error:e,record:t,type:n.deleteError}}}},_e={DEFAULT_KEY:"id",STORE_LIST:"STORE_LIST",STORE_MAP:"STORE_MAP",REDUCER_NAMES:{CREATE_ERROR:"createError",CREATE_START:"createStart",CREATE_SUCCESS:"createSuccess",DELETE_ERROR:"deleteError",DELETE_START:"deleteStart",DELETE_SUCCESS:"deleteSuccess",FETCH_SUCCESS:"fetchSuccess",GET_SUCCESS:"getSuccess",UPDATE_ERROR:"updateError",UPDATE_START:"updateStart",UPDATE_SUCCESS:"updateSuccess"},SPECIAL_KEYS:{BUSY:"busy",CLIENT_GENERATED_ID:"_cid",DELETED:"deleted",PENDING_CREATE:"pendingCreate",PENDING_UPDATE:"pendingUpdate"}};var Qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0;if(null==e)throw new Error("reducersFor: Expected resourceName");var r={key:_e.DEFAULT_KEY,resourceName:e},a=we(r,t);return function(t,r){if(t=t||n,null==r)throw new Error(e+" reducers: Expected action");var i=Me(e),s=r.record;switch(r.type){case i.fetchSuccess:return c.fetchSuccess(a,t,r.records,n,r.data&&r.data.replace);case i.getSuccess:return c.getSuccess(a,t,r.records,n,r.data&&r.data.replace);case i.createStart:return c.createStart(a,t,s);case i.createSuccess:return c.createSuccess(a,t,s,r.cid);case i.createError:return c.createError(a,t,s);case i.updateStart:return c.updateStart(a,t,s);case i.updateSuccess:return c.updateSuccess(a,t,s);case i.updateError:return c.updateError(a,t,s);case i.deleteStart:return c.deleteStart(a,t,s);case i.deleteSuccess:return c.deleteSuccess(a,t,s);case i.deleteError:return c.deleteError(a,t,s);default:return t}}};function Le(e,t){var n=t.config;if(!n.resourceName)throw new Error("Expected config.resourceName");var c=Te(n,e.reducerName);if(!n.key)throw new Error(c+": Expected config.key");if(!t.record)throw new Error(c+": Expected record/s");t.assertValidStore(c,t.current),e.canBeArray||ke(t.config,e.reducerName,t.record)}var He=c(186);function Ue(e,t,n){var c=e.key;return He((function(e){var t=e[c];return n[c]===t}),t)}function Ye(e){return Be(Array,e)?e:[e]}var ze={assert:function(e,t){if(!Be(Array,t))throw new Error(e+": Expected current to be an array")},remove:Ue,merge:function(e,t,n){t=Ye(t);var c={},r={},a=e.slice(0);return e.forEach((function(e,t){var a=e[n];if(null==a)throw new Error("Expected record to have "+n);c[a]=e,r[a]=t})),t.forEach((function(e){var t=e[n];c[t]?a[r[t]]=e:(r[t]=a.length,a.push(e)),c[t]=e})),a}};function Ke(e,t,n,c){Le(e,{assertValidStore:ze.assert,config:t,current:n,record:c})}var Ge={reducerName:_e.REDUCER_NAMES.CREATE_ERROR,canBeArray:!1};var We=c(8);function Je(e){var t,n=(t={},Object(We.a)(t,_e.SPECIAL_KEYS.BUSY,!0),Object(We.a)(t,_e.SPECIAL_KEYS.PENDING_CREATE,!0),t);return we(e,n)}var Xe={reducerName:_e.REDUCER_NAMES.CREATE_START,canBeArray:!1};var Ze={reducerName:_e.REDUCER_NAMES.CREATE_SUCCESS,canBeArray:!1};var $e=c(187),et=c(486);function tt(e,t,n){return et((function(e){return e[t]===n}),e)}var nt={reducerName:_e.REDUCER_NAMES.DELETE_ERROR,canBeArray:!1};function ct(e){var t,n=(t={},Object(We.a)(t,_e.SPECIAL_KEYS.DELETED,!0),Object(We.a)(t,_e.SPECIAL_KEYS.BUSY,!0),t);return we(e,n)}var rt={reducerName:_e.REDUCER_NAMES.DELETE_START,canBeArray:!1};var at={reducerName:_e.REDUCER_NAMES.DELETE_SUCCESS,canBeArray:!1};var it=c(487),st=c(488),dt=function(e,t,n){var c=it(e.key);if(!st(c,n))throw new Error(t+": Expected all records to have a value for the store's key `"+e.key+"`")},lt=_e.REDUCER_NAMES.FETCH_SUCCESS,ot={reducerName:lt,canBeArray:!0};var ut={reducerName:_e.REDUCER_NAMES.GET_SUCCESS,canBeArray:!0};var jt=c(274);function bt(e){return jt(_e.SPECIAL_KEYS.BUSY,e)}var mt={reducerName:_e.REDUCER_NAMES.UPDATE_ERROR,canBeArray:!1};function Ot(e){var t,n=(t={},Object(We.a)(t,_e.SPECIAL_KEYS.BUSY,!0),Object(We.a)(t,_e.SPECIAL_KEYS.PENDING_UPDATE,!0),t);return we(e,n)}var xt={reducerName:_e.REDUCER_NAMES.UPDATE_START,canBeArray:!1};var ht={reducerName:_e.REDUCER_NAMES.UPDATE_SUCCESS,canBeArray:!1};var vt={createError:function(e,t,n){return Ke(Ge,e,t,n),Ue(e,t,n)},createStart:function(e,t,n){return Ke(Xe,e,t,n),Je(n),t},createSuccess:function(e,t,n,c){Ke(Ze,e,t,n);var r=e.key,a=!1,i=t.map((function(e){var t=e[r];if(null==t)throw new Error("Expected record to have "+r);return t===n[r]||null!=c&&c===t?(a=!0,n):e}));return a||(i=i.concat([n])),i},deleteError:function(e,t,n){Ke(nt,e,t,n);var c=e.key,r=tt(t,c,n[c]);return r=$e(["deleted","busy"],r),ze.merge(t,r,c)},deleteStart:function(e,t,n){Ke(rt,e,t,n);var c=e.key,r=tt(t,c,n[c]);return r=ct(r),ze.merge(t,r,c)},deleteSuccess:function(e,t,n){Ke(at,e,t,n);var c=e.key,r=n[c];return He((function(e){return r==e[c]}),t)},fetchSuccess:function(e,t,n,c){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ke(ot,e,t,n),n=Ye(n),dt(e,lt,n),ze.merge(r?c:t,n,e.key)},updateError:function(e,t,n){Ke(mt,e,t,n);var c=e.key,r=tt(t,c,n[c]);return null==r?t:(r=bt(r),ze.merge(t,r,c))},updateStart:function(e,t,n){Ke(xt,e,t,n);var c=[Ot(n)];return ze.merge(t,c,e.key)},updateSuccess:function(e,t,n){return Ke(ht,e,t,n),ze.merge(t,n,e.key)},getSuccess:function(e,t,n,c){return Ke(ut,e,t,n),n=Ye(n)}};var pt={reducersFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=we(vt,n);return Qe(e,t,[],c)}};var ft={assert:function(e,t){if(!Be(Object,t))throw new Error(e+": Expected current to be an object")},merge:function(e,t,n){var c=n[e.key];return we(t,Object(We.a)({},c,n))},remove:function(e,t,n){var c=n[e.key];return $e([c],t)}};function gt(e,t,n,c){Le(e,{assertValidStore:ft.assert,config:t,current:n,record:c})}var Nt={reducerName:_e.REDUCER_NAMES.CREATE_ERROR,canBeArray:!1};var yt={reducerName:_e.REDUCER_NAMES.CREATE_START,canBeArray:!1};var Ct=c(489),qt=c(490),At={reducerName:_e.REDUCER_NAMES.CREATE_SUCCESS,canBeArray:!1};var St={reducerName:_e.REDUCER_NAMES.DELETE_ERROR,canBeArray:!1};var Et={reducerName:_e.REDUCER_NAMES.DELETE_START,canBeArray:!1};var wt={reducerName:_e.REDUCER_NAMES.DELETE_SUCCESS,canBeArray:!1};var Pt=c(354),Vt=c(265),Rt={reducerName:_e.REDUCER_NAMES.GET_SUCCESS,canBeArray:!0};var Ft=_e.REDUCER_NAMES.FETCH_SUCCESS,Dt={reducerName:Ft,canBeArray:!0};var Mt={reducerName:_e.REDUCER_NAMES.UPDATE_ERROR,canBeArray:!1};var Bt={reducerName:_e.REDUCER_NAMES.UPDATE_START,canBeArray:!1};var Tt={reducerName:_e.REDUCER_NAMES.UPDATE_SUCCESS,canBeArray:!1};var kt={createError:function(e,t,n){return gt(Nt,e,t,n),ft.remove(e,t,n)},createStart:function(e,t,n){return gt(yt,e,t,n),Je(n),t},createSuccess:function(e,t,n,c){gt(At,e,t,n);var r=n[e.key],a=Ct(r),i=jt(c,t);return qt(a,n,i)},deleteError:function(e,t,n){gt(St,e,t,n);var c=n[e.key],r=t[c];return null==r?t:(r=$e(["deleted","busy"],r),we(t,Object(We.a)({},c,r)))},deleteStart:function(e,t,n){gt(Et,e,t,n);var c=t[n[e.key]];return null==c?t:(c=ct(c),ft.merge(e,t,c))},deleteSuccess:function(e,t,n){gt(wt,e,t,n);var c=e.key,r=n[c];return He((function(e){return r==e[c]}),t)},fetchSuccess:function(e,t,n,c){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];gt(Dt,e,t,n),n=Ye(n),dt(e,Ft,n);var a=Pt(Vt(e.key),n);return we(r?c:t,a)},getSuccess:function(e,t,n,c){return gt(Rt,e,t,n),n=Ye(n)},updateError:function(e,t,n){gt(Mt,e,t,n);var c=t[n[e.key]];return null==c?t:(c=bt(c),ft.merge(e,t,c))},updateStart:function(e,t,n){gt(Bt,e,t,n);var c=Ot(n);return ft.merge(e,t,c)},updateSuccess:function(e,t,n){return gt(Tt,e,t,n),ft.merge(e,t,n)}};var It={reducersFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,c=we(kt,n);return Qe(e,t,{},c)}},_t={actionCreatorsFor:Ie,actionTypesFor:Me,constants:_e,List:pt,Map:It},Qt=c(175),Lt=c.n(Qt),Ht=c(491),Ut=c(170),Yt=c.n(Ut),zt=c(46),Kt=c.n(zt),Gt=JSON.parse(localStorage.getItem("user-infos")),Wt=(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL,function(){return{Accept:"application/json","Content-Type":"application/json",Authorization:Gt&&Gt.token?Gt.token:{}}}),Jt={code:"INTERNAL_ERROR",message:"Quelque chose s'est mal pass\xe9. Veuillez v\xe9rifier votre connexion Internet ou contacter notre support.",status:503,data:{}},Xt=Yt.a;Xt.interceptors.request.use((function(e){if(!e.headers.Authorization){var t=JSON.parse(localStorage.getItem("user-infos"));(null===t||void 0===t?void 0:t.token)&&(Xt.defaults.headers.common.Authorization="".concat(null===t||void 0===t?void 0:t.token))}return e}),(function(e){return console.log(e)})),Xt.interceptors.response.use((function(e){return Kt.a.isUndefined(e)?[]:e}),(function(e){return console.log(e)}));var Zt=function(e,t,n,c){return new Promise((function(n,r){var a=c;Xt({url:"".concat(t),method:e,headers:Wt(),params:"get"==e?c:void 0,data:"get"!==e?a:void 0}).then((function(e){Kt.a.isUndefined(e)?n([]):n(e.data)}),(function(e){var t,n,c,a,i;if(null===e||void 0===e?void 0:e.response){if(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error)r(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.error);else if(null===e||void 0===e||null===(c=e.response.data)||void 0===c?void 0:c.errors){var s;r(null===e||void 0===e||null===(s=e.response.data)||void 0===s?void 0:s.errors)}}else r(Jt)}))}))},$t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zt.apply(void 0,["get"].concat(t))},en=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zt.apply(void 0,["post"].concat(t))},tn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zt.apply(void 0,["put"].concat(t))},nn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zt.apply(void 0,["delete"].concat(t))},cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t?e[t]||e[Object(Ht.singular)(t)]:e;return Lt.a.camelizeKeys(n)},rn=function(e,t,n,c,r){return Object(Ee.a)(Object(Ee.a)({},e),{},{records:(a=e.records,Object(zt.isArray)(a)?a:[a]),receivedAt:new Date,success:r||"",totalItems:t,totalPages:n,currentPage:c});var a},an=function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{records:e.records,receivedAt:new Date})},sn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;return function(i){var s=_t.actionCreatorsFor(e),d=n.path||Lt.a.decamelize(e),l=n.replace?{replace:n.replace}:void 0,o=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:8100/api";return i(s.getStart()),$t("".concat(o,"/").concat(d,"/").concat(t),!1,c,n).then((function(e){i(an(s.getSuccess(cn(e),l))),r&&r(cn(e))})).catch((function(e){e.response?(a&&a(e.response),i(s.getError(null===e||void 0===e?void 0:e.response.data.error))):(a&&a(e),i(s.getError(e)))}))}},dn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=_t.actionCreatorsFor(e),s=t.path||Lt.a.decamelize(e),d=t.replace?{replace:t.replace}:void 0,l=t.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:8100/api";return a(i.fetchStart()),$t("".concat(l,"/").concat(s),!1,n,t).then((function(e){if(e.hasOwnProperty("data")){var t=e.data;a(rn(i.fetchSuccess(cn(t,"rows"),d),t.totalItems,t.totalPages,t.currentPage)),c&&c(cn(t,"rows"))}else e.hasOwnProperty("rows")?(a(rn(i.fetchSuccess(cn(e,"rows"),d),e.totalItems,e.totalPages,e.currentPage)),c&&c(cn(e,"rows"))):(a(rn(i.fetchSuccess(cn(e),d),null,null,null)),c&&c(cn(e)))})).catch((function(e){e.response?(r&&r(e.response),a(i.fetchError(null===e||void 0===e?void 0:e.response.data.error))):(r&&r(e),a(i.fetchError(e)))}))}},ln=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{hasFile:!1},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=_t.actionCreatorsFor(e),s=n.path||Lt.a.decamelize(e),d=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:8100/api";return a(i.createStart(t)),en("".concat(d,"/").concat(s),n.hasFile,t,{replace:!0}).then((function(e){a(i.createSuccess(t,e.id,e)),c&&c(t)})).catch((function(e){var n,c;e?(a(i.createError(e,t)),r&&r(e)):e.message?(a(i.createError(e,t)),r&&r(e.message)):(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)&&(r&&r(null===e||void 0===e?void 0:e.response.data.message),a(i.createError(null===e||void 0===e?void 0:e.response.data.message,t)))}))}},on=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{hasFile:!1},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=_t.actionCreatorsFor(e),s=n.path||[Lt.a.decamelize(e),t.id].join("/"),d=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:8100/api";return a(i.updateStart(t)),tn("".concat(d,"/").concat(s),n.hasFile,t,n).then((function(e){a(i.updateSuccess(t,t.id,{receivedAt:new Date})),c&&c(t)})).catch((function(e){var n,c;e?(a(i.updateError(e,t)),r&&r(e)):e.message?(a(i.updateError(e,t)),r&&r(e.message)):(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)&&(a(i.updateError(null===e||void 0===e?void 0:e.response.data.message,t)),r&&r(null===e||void 0===e?void 0:e.response.data.message))}))}},un=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;return function(a){var i=_t.actionCreatorsFor(e),s=n.path||[Lt.a.decamelize(e),t.id].join("/"),d=n.url||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"http://localhost:8100/api";return a(i.deleteStart(t)),nn("".concat(d,"/").concat(s),!1,t,n).then((function(){a(i.deleteSuccess(t,{receivedAt:new Date})),c&&c(t)})).catch((function(e){a(i.deleteError(e,t)),r&&r(e)}))}},jn=c(110),bn={isFetching:!1,lastUpdatedAt:null,error:null,success:null},mn=function(e){var t=_t.actionTypesFor(e);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case t.createStart:return{isLoading:!0,error:null,success:"",data:n.data};case t.createError:return{isLoading:!1,error:n.error,success:n.success,data:n.data};case t.createSuccess:return Object(Ee.a)(Object(Ee.a)({},n.payload),{},{isLoading:!1,error:null,success:n.success,lastUpdatedAt:n.receivedAt,data:n.data});case t.createFailed:return Object(Ee.a)(Object(Ee.a)({},n.payload),{},{isLoading:!1,error:n.error,success:"",data:n.data});case t.updateStart:return Object(Ee.a)(Object(Ee.a)({},e),{},{isLoading:!0,error:null,success:"",data:n.data});case t.updateError:return{isLoading:!1,error:n.error,success:"",data:n.data};case t.updateSuccess:return Object(Ee.a)(Object(Ee.a)({},e),{},{isLoading:!1,error:null,success:n.success,lastUpdatedAt:n.receivedAt,data:n.data});case t.updateFailed:return Object(Ee.a)(Object(Ee.a)({},e),{},{isLoading:!1,error:n.error,success:n.success,data:n.data});case t.destroyStart:return Object(Ee.a)(Object(Ee.a)({},e),{},{isLoading:!0,error:null,success:"",data:n.data});case t.destroySuccess:return Object(Ee.a)(Object(Ee.a)({},e),{},{isLoading:!1,error:null,success:n.success,lastUpdatedAt:n.receivedAt,data:n.data});case t.deleteError:return{isLoading:!1,error:n.error,success:"",data:n.data};case t.destroyFailed:return Object(Ee.a)(Object(Ee.a)({},e),{},{isLoading:!1,error:n.error,success:"",data:n.data});case t.getStart:return Object(Ee.a)(Object(Ee.a)({},e),{},{isLoading:!0,didInvalidate:!1,isFetching:!0,error:null,success:"",data:n.data});case t.getSuccess:return Object(Ee.a)(Object(Ee.a)({},e),{},{isFetching:!1});case t.getError:return Object(Ee.a)(Object(Ee.a)({},e),{},{isFetching:!1,error:n.error});case t.fetchStart:return Object(Ee.a)(Object(Ee.a)({},e),{},{isFetching:!0,error:null,success:"",data:n.data});case t.fetchSuccess:return Object(Ee.a)(Object(Ee.a)({},e),{},{isFetching:!1,success:n.success,totalPages:n.totalPages,totalItems:n.totalItems,currentPage:n.currentPage,lastUpdatedAt:n.receivedAt,error:null,data:n.data});case t.fetchError:return Object(Ee.a)(Object(Ee.a)({},e),{},{isFetching:!1,isLoading:!1,error:n.error,data:n.data});default:return Object(Ee.a)({},e)}}},On=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1?arguments[1]:void 0;return _t.Map.reducersFor(e,t)(n,c)}},xn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(jn.b)({items:On(e,t),meta:mn(e,t)})};function hn(e,t){return{get:function(t){return sn(e,t,{replace:!0})},getWithPath:function(t,n){return sn(e,t,{path:n,replace:!0})},create:function(t,n){return ln(e,t,n)},update:function(t,n){return on(e,t,n)},destroy:function(t,n){return un(e,t,n)},fetch:function(t,n){return dn(e,t,n)},createTransaction:function(t,n){return ln(e,t,{path:n})},updateTransaction:function(t,n){return on(e,t,{path:n})},deleteTransaction:function(t,n){return un(e,t,{path:n})}}}function vn(e){return{value:function(t){return t[e].items?Object(zt.values)(t[e].items):[]},item:function(t){return t[e].items?t[e].items:[]},meta:function(t){return t[e].meta}}}var pn=function(e,t,n){return dn("commandes",{path:"/get-tdb-commande?type=".concat(e,"&deb=").concat(t,"&fin=").concat(n),replace:!0})},fn=function(e,t,n){return dn("commandes",{path:"/vente-cva?deb=".concat(e,"&fin=").concat(t,"&type=").concat(n),replace:!0})},gn=function(){return Object(x.jsx)("td",{className:"text-center p-1",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"text-center  p-1",children:"-"}),Object(x.jsx)("span",{className:"text-center  p-1",children:"-"})]})})},Nn=function(){var e=Object(o.h)(),t=function(t){return e.pathname==t};return Object(x.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(x.jsx)(l.b,{className:"btn btn-".concat(t("/")?"success":"default"," text-uppercase mr-2"),to:"/",children:"Journal Vente du magasin"}),Object(x.jsx)(l.b,{className:"btn btn-".concat(t(g)?"success":"default"," text-uppercase mr-2"),to:g,children:"Journal de facturation"}),Object(x.jsx)(l.b,{className:"btn btn-".concat(t(f)?"success":"default"," text-uppercase mr-2"),to:f,children:"Journal de Vente CBV"}),Object(x.jsx)(l.b,{className:"btn btn-".concat(t(p)?"success":"default"," text-uppercase mr-2"),to:p,children:"Journal de Depot vers magasin"})]})};var yn=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)([]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),d=Object(O.a)(s,2),l=(d[0],d[1]),o=Object(r.useState)(e),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(t),h=Object(O.a)(m,2),v=h[0],p=h[1],f=Object(r.useState)([e,t]),g=Object(O.a)(f,2),N=g[0],y=g[1],C=Object(r.useState)([]),q=Object(O.a)(C,2),A=q[0],S=q[1],E=Object(r.useState)([]),w=Object(O.a)(E,2),P=(w[0],w[1],Object(ie.d)(vn("commandes").value)),V=Object(ie.d)(vn("commandes").meta),R=Object(ie.c)();Object(r.useEffect)((function(){null!==N?(N[0]&&b(N[0]),N[0]&&p(N[1])):(b(e),p(t))}),[N]),Object(r.useEffect)((function(){j&&v&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(ae()(j),ae()(v))),l(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(ae()(j),ae()(v))),R(pn("vente-cva",j,v)))}),[j,v]),Object(r.useEffect)((function(){V.isFetching||S(Ae(P,"dateCom",j,v))}),[V]);var F,D,M=Se(A,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityParProduct,d=t.quantityBruteCVA,l=t.quantityCCCVA,o=t.qttByCC,u=t.qttbylitre,j=e.find((function(e){return e.id===n}));return j?(j.quantityParProduct=parseInt(j.quantityParProduct)+parseInt(s),j.qttByCC=parseInt(j.qttByCC)+parseInt(o),j.qttbylitre=parseInt(j.qttbylitre)+parseInt(u)):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBruteCVA:d,quantityCCCVA:l,quantityParProduct:s,qttByCC:o,qttbylitre:u}),e}),[]).sort((function(e,t){return e.id>t.id})),B=function(e,t){var n;return Object(ce.a)(new Set((n=[]).concat.apply(n,Object(ce.a)(e.map((function(e){return e[t]}))))))},T=(F="dateCom",A.reduce((function(e,t){return D?(e[t[F][D]]=e[t[F][D]]||[]).push(t):(e[t[F]]=e[t[F]]||[]).push(t),e}),{}));return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Journal de vente du magasin",children:Object(x.jsx)(je,{title:"Journal de vente du magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsx)(Nn,{}),Object(x.jsxs)("div",{className:"date-range",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(x.jsxs)("div",{children:[j&&v&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h2",{class:"text-uppercase my-1",children:["Journal de vente du magasin"," "]}),Object(x.jsxs)("span",{children:["Du: ",fe(j)," Au ",fe(v)]})]})," "]}),Object(x.jsx)("div",{children:Object(x.jsx)(ve.a,{locale:"fr-FR",onChange:y,value:N})})]}),Object(x.jsxs)("div",{className:"bg-white py-3 px-2 mb-2",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"bg-secondary px-2",style:{width:5,height:5}}),Object(x.jsx)("span",{className:" ml-2",children:": Quantit\xe9 de commande en litre (special pour les PHYTO)"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"bg-primary px-2",style:{width:5,height:5}}),Object(x.jsx)("span",{className:" ml-2",children:": Quantit\xe9 de commande en (FLACON,BOLUS,UNITE,SACHET)"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("span",{className:"bg-warning px-2",style:{width:5,height:5}}),Object(x.jsx)("span",{className:" ml-2",children:": Quantit\xe9 de vente en ML"})]})]}),Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{class:"table",children:[Object(x.jsxs)("tr",{className:"sticky-this",children:[Object(x.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Ce,{date:e})})})),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total ML"})]}),M.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("tr",{class:"bg-white",children:[Object(x.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(x.jsx)(x.Fragment,{children:void 0!=T[t]?Object(x.jsx)(qe,{flat:B(T[t],"contenu"),gr:t,quantityb:e.quantityBruteCVA,quantityc:e.quantityCCCVA,quantitycond:e.condval,id:e.id}):Object(x.jsx)(gn,{})})})),Object(x.jsx)("td",{className:"text-center",children:e.quantityParProduct}),Object(x.jsx)("td",{className:"text-center",children:e.qttByCC})]})})})),0==M.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})]})]})]})})},Cn=c(135),qn=c.n(Cn),An=c(225),Sn="REGISTER_SUCCESS",En="REGISTER_FAIL",wn="LOGIN_SUCCESS",Pn="LOGIN_FAIL",Vn="LOGOUT",Rn="UPDATE_STOCK_REQUEST_SUCCESS",Fn="UPDATE_STOCK_REQUEST_FAIL",Dn=function(e){var t=e.product,n=Object(r.useState)(!1),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(ie.d)(vn("commandes").meta),d=Object(ie.c)(),l=Object(r.useState)(1),o=Object(O.a)(l,2),u=o[0],j=o[1];Object(r.useEffect)((function(){d(hn("commandes").fetch())}),[]);return Object(x.jsxs)("tr",{className:"product-card ".concat(t.id?"":"product-loading"),style:{border:t&&a?"1px solid #a6a5a5":"",boxShadow:t&&a?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)("td",{children:t.name}),Object(x.jsx)("td",{children:t.quantityBrute+u}),Object(x.jsx)("td",{className:"d-flex justify-content-center align-items-center",children:Object(x.jsxs)("div",{class:"input-group inline-group",children:[Object(x.jsx)("div",{class:"input-group-prepend",children:Object(x.jsx)("button",{class:"btn btn-sm btn-dark btn-minus",onClick:function(){u>0&&j(u-1)},children:"-"})}),Object(x.jsx)("input",{class:"form-control quantity text-center  p-0",min:"0",name:"quantity",value:u,type:"number"}),Object(x.jsx)("div",{class:"input-group-append",children:Object(x.jsx)("button",{class:"btn btn-sm btn-dark btn-plus mr-2",onClick:function(){return j(u+1)},children:"+"})}),Object(x.jsx)("div",{class:"input-group-append ml-2"})]})}),Object(x.jsx)("td",{children:t.id&&Object(x.jsx)("button",{className:"btn btn-success  btn-sm",onClick:function(){d(function(e,t,n){return function(){var c=Object(An.a)(qn.a.mark((function c(r){var a;return qn.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Yt.a.post("http://localhost:8100/api/update-product",{productId:e,newStockBrute:t,newStockCC:n});case 3:a=c.sent,r({type:Rn,payload:a.data}),c.next=10;break;case 7:c.prev=7,c.t0=c.catch(0),r({type:Fn,payload:c.t0});case 10:case"end":return c.stop()}}),c,null,[[0,7]])})));return function(e){return c.apply(this,arguments)}}()}(t.id,u,0)),d(hn("commandes").create({id:s.nextId,contenu:[t],type:"approv",sorte:"entree",vaccinateurId:null,qtteBrute:u,qtteCC:0,status:!0,emprunterId:null,dateCom:new Date})),i(!0)},children:"Modifier le stock"})})]})};function Mn(){var e=Object(ie.d)(vn("products").value),t=Object(ie.c)();return Object(r.useEffect)((function(){t(hn("products").fetch())}),[]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Approvisionnement",children:Object(x.jsx)(je,{title:"Approvisionnement"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{className:"text-center",children:[Object(x.jsx)("th",{children:"Nom de l'article"}),Object(x.jsx)("th",{style:{width:"15%"},children:"Qte"}),Object(x.jsx)("th",{style:{width:"15%"},children:"Nouvel"}),Object(x.jsx)("th",{style:{width:"20%"},children:"Actions"})]})}),Object(x.jsx)("tbody",{children:e.map((function(e){return Object(x.jsx)(Dn,{product:e})}))})]})})]})}var Bn=c(174),Tn=c(1025),kn=["icon","className","filter","setData","name","value","data","placeholder","changeValue","invalid"],In=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,i=e.filter,s=(e.setData,e.name),d=e.value,l=e.data,o=void 0===l?0:l,u=e.placeholder,j=e.changeValue,b=e.invalid,m=(Object(pe.a)(e,kn),a.a.useCallback((function(e){i&&!i.test(e.target.value)||Object(zt.isFunction)(j)&&j(e.target.value,e)}),[s]));return Object(r.useEffect)((function(){o&&j(o)}),[o]),Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(Tn.a,{bg:"gray.100",boxShadow:"sm",isInvalid:b,color:"gray.700",placeholder:u,ref:t,defaultValue:d,onBlur:m})]})})),_n=c(282),Qn=c(1055),Ln=c(1027),Hn=["name","className","options","radioValue","valueKey","direction","filter","setData","changeValue","setRadio"],Un=Object(r.forwardRef)((function(e,t){e.name;var n=e.className,c=e.options,i=e.radioValue,s=e.valueKey,d=e.direction,l=(e.filter,e.setData),o=e.changeValue,u=e.setRadio,j=Object(pe.a)(e,Hn),b=Object(r.useState)(i),m=Object(O.a)(b,2),h=m[0],v=m[1],p=a.a.useState("".concat(h)),f=Object(O.a)(p,2),g=f[0],N=f[1];return a.a.useLayoutEffect((function(){o(g),l&&(l(g),v(g))}),[g]),a.a.useLayoutEffect((function(){u&&u(h)}),[h]),Object(x.jsx)(_n.a,{onChange:N,defaultValue:"".concat(h),className:n,children:Object(x.jsx)(Qn.b,{spacing:4,direction:d,children:c.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Ln.a,Object(Ee.a)(Object(Ee.a)({name:"".concat(e.id),isChecked:e.id==h},j),{},{value:"".concat(e.id),ref:t,children:e[s]}))})}))})})})),Yn=c(1028),zn=c(277),Kn=["name","className","invalid","options","selectValue","valueKey","filter","isNumeric","emptyValue","setData","changeValue"],Gn=Object(r.forwardRef)((function(e,t){var n=e.name,c=e.className,r=e.invalid,a=e.options,i=e.selectValue,s=e.valueKey,d=e.filter,l=e.isNumeric,o=void 0===l||l,u=e.emptyValue,j=void 0===u||u,b=e.setData,m=e.changeValue,O=Object(pe.a)(e,Kn);return Object(x.jsx)("div",{className:c,children:Object(x.jsxs)(Yn.a,Object(Ee.a)(Object(Ee.a)({},O),{},{bg:"gray.200",boxShadow:"sm",defaultValue:"".concat(i),isRequired:!0,name:n,isInvalid:r,onChange:function(e){d&&!d.test(e.target.value)||(Object(zn.a)(m)&&m(o?Number(e.target.value):e.target.value,e),b&&b(o?Number(e.target.value):e.target.value))},ref:t,children:[j&&Object(x.jsx)("option",{value:"",children:"Selectionner"}),null===a||void 0===a?void 0:a.map((function(e){return Object(x.jsx)("option",{defaultChecked:"".concat(i),value:"".concat(s?e.id:e),children:s?e[s]:e})}))]}))})})),Wn=c(1029),Jn=["icon","className","filter","setData","placeholder","changeValue","invalid"],Xn=Object(r.forwardRef)((function(e,t){e.icon;var n=e.className,c=e.filter,r=e.setData,a=e.placeholder,i=e.changeValue,s=e.invalid,d=Object(pe.a)(e,Jn);return Object(x.jsx)("div",{className:n,children:Object(x.jsx)(Wn.a,Object(Ee.a)(Object(Ee.a)({bg:"gray.200",boxShadow:"sm",isInvalid:s,placeholder:a},d),{},{onChange:function(e){c&&!c.test(e.target.value)||(Object(zn.a)(i)&&i(e.target.value,e),r&&r(e.target.value))},ref:t}))})})),Zn=c(193),$n=c(1034),ec=c(168),tc=c(35),nc=c(1056),cc=c(1030),rc=c(1033),ac=c(497),ic=c.n(ac),sc=(c(831),["icon","className","filter","setData","tags","options","changeValue","invalid"]),dc=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,a=(e.filter,e.setData),i=e.tags,s=e.options,d=e.changeValue,l=(e.invalid,Object(pe.a)(e,sc),Object(r.useState)(!1)),o=Object(O.a)(l,2),u=o[0],j=o[1],b=Object(r.useState)(i||[]),m=Object(O.a)(b,2),h=m[0],v=m[1],p=Object(r.useCallback)((function(e){v(h.filter((function(t,n){return n!==e}))),j(!0)}),[h]);Object(r.useLayoutEffect)((function(){u&&d(h),a&&a(h),j(!1)}),[u]);var f=Object(r.useCallback)((function(e){v([].concat(Object(ce.a)(h),[e])),j(!0)}),[h]);return Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(ic.a,{as:Tn.a,ref:t,tags:h,suggestions:s,onDelete:p,onAddition:f})]})})),lc=["icon","className","filter","setData","name","placeholder","changeValue","invalid"],oc=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,r=e.filter,i=(e.setData,e.name),s=e.placeholder,d=e.changeValue,l=e.invalid,o=(Object(pe.a)(e,lc),a.a.useCallback((function(e){r&&!r.test(e.target.value)||Object(zt.isFunction)(d)&&d(e.target.value,e)}),[i]));return Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(Tn.a,{bg:"gray.100",type:"date",boxShadow:"sm",isInvalid:l,color:"gray.700",placeholder:s,ref:t,onBlur:o})]})})),uc=["name","className","invalid","isFieldArray","options","selectValue","valueKey","filter","setData","objectKey","index","inArray","changeValue","model","debug","array"],jc=Object(r.forwardRef)((function(e,t){var n=e.name,c=e.className,a=e.invalid,i=e.isFieldArray,s=void 0===i||i,d=e.options,l=e.selectValue,o=e.valueKey,u=e.filter,j=e.setData,b=(e.objectKey,e.index,e.inArray,e.changeValue),m=(e.model,e.debug,e.array,Object(pe.a)(e,uc)),h=Object(r.useState)(l),v=Object(O.a)(h,2),p=(v[0],v[1]);return Object(x.jsx)("div",{className:c,children:Object(x.jsxs)(Yn.a,Object(Ee.a)(Object(Ee.a)({},m),{},{bg:"gray.200",boxShadow:"sm",defaultValue:"".concat(l),isRequired:!0,name:n,isInvalid:a,onChange:function(e){u&&!u.test(e.target.value)||(Object(zn.a)(b)&&s&&b(Number(e.target.value,e)),j&&j(Number(e.target.value)),p(Number(e.target.value)))},ref:t,children:[Object(x.jsx)("option",{value:"",children:"Selectionner"}),d.map((function(e){return Object(x.jsx)("option",{defaultChecked:"".concat(l),value:"".concat(e.id),children:o?e[o]:e})}))]}))})})),bc=c(511),mc=["name","className","options","radioValue","valueKey","direction","inArray","filter","setData","changeValue","setRadio","masterKey","filtrable","callback"],Oc=Object(r.forwardRef)((function(e,t){var n=e.name,c=e.className,i=e.options,s=e.radioValue,d=e.valueKey,l=e.direction,o=(e.inArray,e.filter,e.setData,e.changeValue),u=e.setRadio,j=e.masterKey,b=e.filtrable,m=e.callback,h=void 0===m?null:m,v=Object(pe.a)(e,mc),p=Object(r.useState)(s),f=Object(O.a)(p,2),g=f[0],N=(f[1],a.a.useState("".concat(g))),y=Object(O.a)(N,2),C=y[0],q=y[1],A=Object(ie.c)();return a.a.useEffect((function(){o(j?i.find((function(e){return e[j].id==C})):i.find((function(e){return e.id==C})))}),[C]),a.a.useLayoutEffect((function(){u&&u(g)}),[g]),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(_n.a,{onChange:q,name:n,defaultValue:"".concat(g),className:c,children:Object(x.jsx)(Qn.b,{spacing:4,direction:l,children:i.map((function(e){return Object(x.jsx)(x.Fragment,{children:j?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ln.a,Object(Ee.a)(Object(Ee.a)({},v),{},{value:"".concat(e[j].id),ref:t,children:e[j][d]})),1==b&&Object(x.jsx)(bc.a,{variant:"solid",onClick:function(){return A(h(e[j].id))},colorScheme:"yellow",size:"xs",children:"Annuler"})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ln.a,Object(Ee.a)(Object(Ee.a)({},v),{},{value:"".concat(e.id),ref:t,children:e[d]})),1==b&&Object(x.jsx)(bc.a,{variant:"solid",onClick:function(){return A(h(e.id))},colorScheme:"yellow",size:"xs",children:"Annuler"})]})})}))})})})})),xc=c(496),hc=c(494),vc=["name","className","options","radioValue","valueKey","direction","inArray","filter","setData","changeValue","setRadio","filtrable"];function pc(e){var t=Object(xc.a)(e),n=t.getInputProps,c=t.getCheckboxProps,r=n(),a=c();return Object(x.jsxs)(cc.a,{as:"label",children:[Object(x.jsx)("input",Object(Ee.a)({},r)),Object(x.jsx)(cc.a,Object(Ee.a)(Object(Ee.a)({},a),{},{cursor:"pointer",borderWidth:"1px",borderRadius:"md",boxShadow:"md",_checked:{bg:"teal.600",color:"white",borderColor:"teal.600"},_focus:{boxShadow:"outline"},px:5,py:3,children:e.children}))]})}var fc=Object(r.forwardRef)((function(e,t){var n=e.name,c=(e.className,e.options),i=e.radioValue,s=(e.valueKey,e.direction,e.inArray,e.filter,e.setData),d=e.changeValue,l=e.setRadio,o=(e.filtrable,Object(pe.a)(e,vc),Object(r.useState)(i)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=a.a.useState("".concat(j)),h=Object(O.a)(m,2),v=h[0];h[1];a.a.useEffect((function(){d(c.find((function(e){return e.id==v}))),s&&(s(v),b(v))}),[v]),a.a.useLayoutEffect((function(){l&&l(j)}),[j]);var p=Object(hc.a)({name:n,defaultValue:1,onChange:function(e){console.log("hiii",e)}}),f=p.getRootProps,g=p.getRadioProps,N=f();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Qn.a,Object(Ee.a)(Object(Ee.a)({},N),{},{children:c.map((function(e){var t=e.id,n=g({id:t});return Object(x.jsx)(pc,Object(Ee.a)(Object(Ee.a)({},n),{},{children:t}),t)}))}))})})),gc=["icon","className","filter","setData","name","value","placeholder","changeValue","invalid"],Nc=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,r=e.filter,i=(e.setData,e.name),s=e.value,d=e.placeholder,l=e.changeValue,o=e.invalid,u=(Object(pe.a)(e,gc),a.a.useCallback((function(e){r&&!r.test(e.target.value)||Object(zt.isFunction)(l)&&l(e.target.value,e)}),[i]));return Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(Tn.a,{bg:"gray.100",boxShadow:"sm",type:"password",isInvalid:o,color:"gray.700",placeholder:d,ref:t,defaultValue:s,onBlur:u})]})})),yc=c(1052),Cc=["icon","className","filter","setData","name","value","label","placeholder","changeValue","invalid"],qc=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,r=e.filter,i=(e.setData,e.name),s=e.value,d=e.label,l=(e.placeholder,e.changeValue),o=(e.invalid,Object(pe.a)(e,Cc),a.a.useCallback((function(e){r&&!r.test(e.target.value)||Object(zt.isFunction)(l)&&l(e.target.value,e)}),[i]));return Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(yc.a,{colorScheme:"teal",ref:t,defaultValue:s,onChange:o,name:i,defaultIsChecked:!0,children:d})]})})),Ac=c(1050),Sc=["icon","className","filter","setData","name","value","data","min","placeholder","changeValue","invalid"],Ec=Object(r.forwardRef)((function(e,t){var n=e.icon,c=e.className,i=e.filter,s=(e.setData,e.name),d=e.value,l=e.data,o=void 0===l?0:l,u=e.min,j=void 0===u?0:u,b=(e.placeholder,e.changeValue),m=e.invalid,O=(Object(pe.a)(e,Sc),a.a.useCallback((function(e){i&&!i.test(e)||Object(zt.isFunction)(b)&&b(Number(e))}),[s]));return Object(r.useEffect)((function(){o&&b(Number(o))}),[o]),Object(x.jsxs)("div",{className:c,children:[n&&Object(x.jsx)("i",{className:"fa fa-".concat(n)}),Object(x.jsx)(Ac.c,{inputMode:"numeric",bg:"gray.100",boxShadow:"sm",color:"gray.700",isInvalid:m,name:s,ref:t,step:1,onChange:O,min:j,defaultValue:d,children:Object(x.jsx)(Ac.d,{})})]})})),wc=["className","label","labelSize","labelWeight","tip","info","isBool","options","optional","error","name","half"],Pc=function(e){return function(t){t.className;var n=t.label,c=t.labelSize,a=void 0===c?"13px":c,i=t.labelWeight,s=void 0===i?"400":i,d=t.tip,l=t.info,o=t.isBool,u=void 0!==o&&o,j=t.options,b=t.optional,m=t.error,h=t.name,v=t.half,p=void 0!==v&&v,f=Object(pe.a)(t,wc),g=Object(r.useState)(""),N=Object(O.a)(g,2),y=N[0],C=N[1];return Object(r.useEffect)((function(){C(n)}),[n]),Object(x.jsx)(cc.a,{style:{width:p?"50%":"100%"},children:Object(x.jsxs)(Zn.a,{isInvalid:!!m,children:[Object(x.jsx)(rc.a,{justifyContent:"flex-start",alignItems:"center",children:!u&&Object(x.jsx)(x.Fragment,{children:y&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)($n.a,{fontSize:a,fontWeight:s,mb:1,mr:1,color:"muted.400",htmlFor:n,children:y}),d&&Object(x.jsx)(nc.a,{placement:"bottom-end",label:d,bg:"gray.800","aria-label":"Guide d'utilisation",children:Object(x.jsx)(ec.b,{fontSize:"11px",color:"gray"})}),b&&Object(x.jsxs)(tc.a.small,{color:"blue.700",children:["("," facultatif ",")"]})]})})}),Object(x.jsx)(e,Object(Ee.a)({invalid:!!m,options:j,name:h,label:n},f)),l&&Object(x.jsx)(tc.a.small,{my:4,color:"muted.500",fontStyle:"italic",fontWeight:"medium",children:l}),m&&Object(x.jsx)("p",{style:{color:"red"},children:m})]})})}},Vc={Input:Pc(In),Number:Pc(Ec),Radio:Pc(Un),Select:Pc(Gn),Textarea:Pc(Xn),Tag:Pc(dc),SelectObject:Pc(jc),RadioObject:Pc(Oc),RadioProduct:Pc(fc),Date:Pc(oc),Password:Pc(Nc),Checkbox:Pc(qc)},Rc=["validate","validations","children"],Fc=["name","validate"],Dc=function(e){e.validate;var t=e.validations,n=(e.children,Object(pe.a)(e,Rc));return Object(x.jsx)(Bn.d,Object(Ee.a)(Object(Ee.a)({},n),{},{enableReinitialize:!0,validationSchema:t,validateOnChange:!1,validateOnBlur:!1}))};Dc.Element=function(e){return Object(x.jsx)(Bn.c,Object(Ee.a)({noValidate:!0},e))},Dc.Field=Object(zt.mapValues)(Vc,(function(e){return function(t){var n=t.name,c=t.validate,r=Object(pe.a)(t,Fc);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Bn.a,{name:n,validate:c,children:function(t){var c=t.field,a=t.form,i=a.touched,s=a.errors,d=a.setFieldValue;return Object(x.jsx)(e,Object(Ee.a)(Object(Ee.a)(Object(Ee.a)({},c),r),{},{name:n,mb:2,error:Object(zt.get)(i,n)&&Object(zt.get)(s,n),changeValue:function(e){return d(n,e)}}))}})})}})),Dc.initialValues=function(e,t){return t((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",c=Object(zt.get)(e,t);return void 0===c||null===c?n:c}))};var Mc=Dc,Bc=function(){Object(o.i)().id;var e=Object(ie.d)(vn("fournisseurs").value),t=Object(ie.d)(vn("categories").value),n=(Object(ie.d)(vn("products").meta),Object(ie.c)());Object(o.g)();return Object(r.useEffect)((function(){n(hn("fournisseurs").fetch()),n(hn("categories").fetch()),n(hn("products").fetch())}),[]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Ajouter un produit",children:Object(x.jsx)(je,{title:"Ajouter un produit"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Mc,{id:"add-form-product",enableReinitialize:!0,initialValues:{},validations:{},onSubmit:function(e,t){console.log(e)},children:Object(x.jsx)(Mc.Element,{children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:Object(x.jsx)("h5",{children:"Information g\xe9n\xe9rale"})}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Select,{name:"categoryId",label:"Categorie",valueKey:"name",options:t}),Object(x.jsx)(Mc.Field.Select,{name:"fournisseurId",label:"Fournisseur",valueKey:"name",options:e}),Object(x.jsx)(Mc.Field.Input,{name:"name",label:"D\xe9signation",placeholder:"D\xe9signation"}),Object(x.jsx)(Mc.Field.Radio,{radioValue:"1",valueKey:"name",label:"Type d'article",name:"type",options:[{id:"BOLUS",name:"BOLUS"},{id:"FLACON",name:"FLACON"},{id:"UNITE",name:"UNITE"},{id:"SACHET",name:"SACHET"}],direction:"row"}),Object(x.jsx)(Mc.Field.Input,{name:"prixFournisseur",label:"prix unitaire",placeholder:"prix unitaire"}),Object(x.jsx)(Mc.Field.Input,{name:"quantity",label:"Quantit\xe9",placeholder:"Quantit\xe9"}),Object(x.jsx)(Mc.Field.Input,{type:"date",name:"datePer",label:"date de peremption",placeholder:"date de peremption"})]})]})}),Object(x.jsxs)("div",{className:"col-lg-6",children:[Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:Object(x.jsx)("h5",{children:"Vente"})}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"prixVente",label:"Prix de vente",placeholder:"prix de vente"}),Object(x.jsx)(Mc.Field.Input,{name:"prixVaccinateur",label:"Prix du vaccinateur",placeholder:"prix du vaccinateur"}),Object(x.jsx)(Mc.Field.Input,{name:"prixParCC",label:"Prix de Vente en ml",placeholder:"Prix de Vente en ml"})]})]}),Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"})]})]})})})})]})},Tc=c(191),kc=c(33),Ic=c(1062),_c=function(){var e,t,n,c,r,i,s,d,l=Object(o.i)().id,u=Object(ie.c)(),j=Object(ie.d)(vn("approvis").value);return a.a.useEffect((function(){u(hn("approvis").get(l))}),[l]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail du facture",children:Object(x.jsx)(je,{title:"Detail de facture"})}),Object(x.jsx)(xe,{children:Object(x.jsx)("div",{className:"bg-white p-2",children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsxs)(Ic.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:["D\xe9tail du facture (",fe(null===(e=j[0])||void 0===e?void 0:e.dateApprov),")"]}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsx)("p",{children:"Arr\xeat\xe9 \xe0 la somme de "}),Object(x.jsx)("p",{className:"text-uppercase my-2",children:Object(x.jsxs)("strong",{children:[Object(Tc.NumberToLetter)(null===(t=j[0])||void 0===t?void 0:t.total)," ARIARY"]})}),Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{children:[Object(x.jsx)("strong",{children:"Date Echeance"})," :"," ",fe(null===(n=j[0])||void 0===n?void 0:n.dateEcheance)]})," "]}),Object(x.jsxs)("td",{className:"mb-1",children:[Object(x.jsx)("h3",{children:"Remarque"}),Object(x.jsx)("p",{class:"text-info",children:null===(c=j[0])||void 0===c?void 0:c.remarque})]}),Object(x.jsx)("br",{}),Object(x.jsxs)("h3",{children:[" ",Object(x.jsx)("strong",{children:"ARTICLES"})]}),null===(r=j[0])||void 0===r?void 0:r.contenu.map((function(e){return Object(x.jsxs)("div",{className:"border mb-3 p-3",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Nom de l'article:"}),Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Quantit\xe9:"}),Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.quantityParProduct})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Prix unitaire:"}),Object(x.jsx)("td",{children:Object(x.jsx)(kc.a,{value:null===e||void 0===e?void 0:e.prixFournisseur,displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Ee.a)(Object(Ee.a)({},t),{},{children:e}))}})})]})]})})),Object(x.jsx)("tr",{children:Object(x.jsxs)("td",{children:[Object(x.jsx)("strong",{children:"Remise :"})," ",null===(i=j[0])||void 0===i?void 0:i.remise," Ar"]})}),Object(x.jsx)("tr",{children:Object(x.jsxs)("td",{class:"text-uppercase",children:[Object(x.jsx)("strong",{children:"Paiement en :"}),null===(s=j[0])||void 0===s?void 0:s.typePaye]})}),Object(x.jsx)("tr",{children:Object(x.jsxs)("td",{class:"text-uppercase",children:[Object(x.jsx)("strong",{children:"Total:"}),Object(x.jsx)(kc.a,{value:null===(d=j[0])||void 0===d?void 0:d.total,displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Ee.a)(Object(Ee.a)({},t),{},{children:e}))}})]})})," "]})]})})})]})},Qc=c(176);function Lc(e){var t=e.column,n=t.filterValue,c=t.preFilteredRows,r=t.setFilter;c.length;return Object(x.jsx)("input",{className:"form-control",value:n||"",onChange:function(e){r(e.target.value||void 0)},placeholder:"Rechercher..."})}function Hc(e){var t=e.preGlobalFilteredRows,n=e.globalFilter,c=e.setGlobalFilter,r=(t.length,a.a.useState(n)),i=Object(O.a)(r,2),s=i[0],d=i[1],l=Object(Qc.useAsyncDebounce)((function(e){c(e||void 0)}),200);return Object(x.jsx)("div",{w:200,children:Object(x.jsx)("input",{className:"form-control",value:s||"",onChange:function(e){d(e.target.value),l(e.target.value)},placeholder:"Rechercher ..."})})}function Uc(e){var t=e.columns,n=e.data,c=void 0===n?[]:n,r=e.meta,a=e.addUrl,i=e.urlName,s=e.footer,d=e.tip,l=void 0===d?"":d,o=e.filter,u=void 0===o||o,j=e.paginate,b=void 0===j||j,m=e.guide;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Yc,{columns:t,data:r.isFetching?[]:c,meta:r,addUrl:a,urlName:i,footer:s,tip:l,filter:u,paginate:b,guide:m})})}function Yc(e){var t=e.columns,n=e.data,c=void 0===n?[]:n,r=e.meta,i=e.addUrl,s=e.urlName,d=e.footer,o=e.tip,u=void 0===o?"":o,j=e.filter,b=void 0===j||j,m=e.paginate,O=void 0===m||m,h=e.guide,v=t.length,p=a.a.useMemo((function(){return{Filter:Lc}}),[]),f=Object(Qc.useTable)({columns:t,data:c,defaultColumn:p,initialState:{pageIndex:0,pageSize:10}},Qc.useFilters,Qc.useGlobalFilter,Qc.useSortBy,Qc.usePagination),g=f.getTableProps,N=f.getTableBodyProps,y=f.headerGroups,C=(f.rows,f.prepareRow),q=f.preGlobalFilteredRows,A=f.setGlobalFilter,S=f.page,E=f.canPreviousPage,w=f.canNextPage,P=f.pageOptions,V=(f.pageCount,f.gotoPage),R=f.nextPage,F=f.previousPage,D=f.setPageSize,M=f.state,B=M.pageIndex,T=M.pageSize,k=M.globalFilter;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"d-flex my-2 justify-content-between align-items-center",children:[b&&Object(x.jsx)(Hc,{preGlobalFilteredRows:q,globalFilter:k,setGlobalFilter:A}),Object(x.jsx)("div",{children:i&&s&&Object(x.jsx)(l.b,{className:"btn btn-sm btn-green",variant:"solid",to:i,children:s})})]}),u&&Object(x.jsx)("h3",{children:u}),Object(x.jsxs)("table",Object(Ee.a)(Object(Ee.a)({},g()),{},{className:"table table-bordered striped",children:[Object(x.jsx)("thead",{className:"bg-thead ",children:y.map((function(e){return Object(x.jsx)("tr",Object(Ee.a)(Object(Ee.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(x.jsxs)("th",Object(Ee.a)(Object(Ee.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{isNumeric:e.isNumeric,children:[e.render("Header"),Object(x.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}))}))}))}))}),Object(x.jsx)("tbody",Object(Ee.a)(Object(Ee.a)({},N()),{},{children:r.isFetching?Object(x.jsx)("td",{colSpan:v,className:"text-center",children:Object(x.jsx)("p",{children:"Chargement des donn\xe9es en cours ...."})}):Object(x.jsxs)(x.Fragment,{children:[0==S.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colSpan:v,style:h?{textAlign:"left"}:{textAlign:"center"},children:h?Object(x.jsxs)("div",{style:{width:"100%",color:"blue.700",backgroundColor:"gray.200",padding:"10px"},children:[Object(x.jsx)("h3",{className:"py-3",children:u}),h]}):"Aucune enregistrement \xe0 afficher"})}),S.map((function(e){return C(e),Object(x.jsx)("tr",Object(Ee.a)(Object(Ee.a)({p:0},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(x.jsx)("td",Object(Ee.a)(Object(Ee.a)({fontSize:"11px"},e.getCellProps()),{},{isNumeric:e.column.isNumeric,children:e.render("Cell")}))}))}))}))]})})),d&&Object(x.jsx)("tfoot",{bg:"blue.900",children:Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colSpan:v,color:"white",children:d})})})]})),O&&Object(x.jsxs)("div",{className:"d-flex  justify-content-between align-items-center py-3",children:[Object(x.jsx)("div",{style:{width:"200px"},children:Object(x.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(x.jsx)("input",{className:"form-control  mr-2",type:"number",placeholder:"Page",value:B+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;V(t)}}),Object(x.jsx)("select",{className:"form-control",value:T,onChange:function(e){D(Number(e.target.value))},size:"sm",children:[5,10,20,30,40,50,100,150,250].map((function(e){return Object(x.jsx)("option",{value:e,children:e},e)}))})]})}),Object(x.jsx)("div",{children:Object(x.jsxs)(x.Fragment,{children:["Page"," ",Object(x.jsxs)("strong",{children:[B>0?B+1:1," sur ",P.length]})," "]})}),Object(x.jsx)("div",{className:"mb-6",children:Object(x.jsxs)("div",{children:[Object(x.jsxs)("button",{className:"mr-2 btn btn-sm btn-green",onClick:function(){return F()},disabled:!E,children:["<<"," Pr\xe9cedent"]}),Object(x.jsxs)("button",{className:"mr-2 btn btn-sm btn-green",onClick:function(){return R()},disabled:!w,children:["Suivant ",">>"]})]})})]})]})}var zc=function(e){var t=e.model,n=e.entity,c=Object(ie.c)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce facture ?")&&c(hn(t).deleteTransaction(n,"/delete-facture"))},children:"Supprimer"})})};function Kc(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),i=c[0],s=c[1],d=Object(r.useState)(t),o=Object(O.a)(d,2),u=o[0],j=o[1],b=Object(r.useState)([e,t]),m=Object(O.a)(b,2),h=m[0],v=m[1],p=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("approvis").value)),f=Object(ie.d)(vn("approvis").meta),g=Object(ie.c)();Object(r.useEffect)((function(){g(hn("approvis").fetch())}),[]),Object(r.useEffect)((function(){null!==h?(h[0]&&s(h[0]),h[1]&&j(h[1])):(s(e),j(t))}),[h]),Object(r.useEffect)((function(){g(function(e,t){return dn("approvis",{path:"/get-approv-by-date?deb=".concat(e,"&fin=").concat(t),replace:!0})}(i,u))}),[i,u]);var N=a.a.useMemo((function(){return[{Header:"#",accessor:"id"},{Header:"Produit",Cell:function(e){var t,n;return Object(x.jsx)("div",{style:{width:"200px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(x.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Date du facture",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("span",{className:"badge badge-primary",children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateApprov)})})}},{Header:"Date echeance",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("span",{className:"badge badge-warning",children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateEcheance)})})}},{Header:"Mode de paiement",accessor:"typePaye"},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.total)})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{to:"/approvis/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/editer/facture/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(zc,{model:"approvis",entity:e.row.original})]})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Factures",children:Object(x.jsx)(je,{title:"Factures"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Factures"}),Object(x.jsx)("p",{children:"".concat(fe(i)," ->  ").concat(fe(u))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(ve.a,{locale:"fr-FR",onChange:v,value:h})})," "]}),Object(x.jsx)(Uc,{filter:!1,data:p.sort((function(e,t){return t.id-e.id})),meta:f,columns:N,addUrl:M,urlName:"Ajouter un facture"})]})]})}var Gc=function(){return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Sortie",children:Object(x.jsx)(je,{title:"Sortie"})}),Object(x.jsx)(xe,{})]})},Wc=c(1063),Jc=c(1036),Xc=c(1037),Zc="SET_BASKET_ITEMS",$c="ADD_TO_BASKET",er="REMOVE_FROM_BASKET",tr="CLEAR_BASKET",nr="ADD_QTY_ITEM",cr="MINUS_QTY_ITEM",rr="ADD_QTY_PORTION_ITEM",ar="MINUS_QTY_PORTION_ITEM",ir="SET_CHECKOUT_SHIPPING_DETAILS",sr="SET_CHECKOUT_PAYMENT_DETAILS",dr="RESET_CHECKOUT",lr=c(1038);function or(e){return e.toString().replace(/\s/g,"").toLowerCase()}function ur(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?ur(n):n;return t}var jr=function(e,t){return ur(e).filter((function(e){return""==t||or(e.name).includes(or(t))}))};var br=c(61),mr=c.n(br);var Or=function(e){var t=e.model,n=e.entity,c=Object(ie.c)(),r=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce commande ?")&&(c(hn(t).deleteTransaction(n,"/delete-from-depot")),r.push(D))},children:"Supprimer"})})};var xr=function(e){var t=ae()().isoWeekday(1).startOf("week"),n=ae()().endOf("week"),c=Object(r.useState)(t),i=Object(O.a)(c,2),s=i[0],d=i[1],o=Object(r.useState)(n),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)([t,n]),h=Object(O.a)(m,2),v=h[0],p=h[1],f=Object(ie.d)(vn("commandes").value),g=Object(ie.d)(vn("commandes").meta),N=Object(ie.c)();Object(r.useEffect)((function(){null!==v?(v[0]&&d(v[0]),v[1]&&b(v[1])):(d(t),b(n))}),[v]);var y=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot})),t};Object(r.useEffect)((function(){N(function(e,t){return dn("commandes",{path:"/credit?deb=".concat(e,"&fin=").concat(t),replace:!0})}(s,j))}),[s,j]);var C=a.a.useMemo((function(){return[{Header:"Date de credit",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",accessor:"contenu",Cell:function(e){var t=e.cell.value;return Object(x.jsx)("div",{style:{width:"100px"},children:null!=t&&t.map((function(e){return Object(x.jsx)("p",{children:e.name})}))})}},{Header:"Status",Cell:function(e){var t;return Object(x.jsx)("div",{children:1==(null===(t=e.row.original)||void 0===t?void 0:t.status)?Object(x.jsx)("h3",{className:"badge badge-success",children:"pay\xe9"}):Object(x.jsx)("h3",{className:"badge badge-danger",children:"non pay\xe9"})})}},{Header:"Nom de la personne",accessor:"emprunter.name"},{Header:"Contact",accessor:"emprunter.contact"},{Header:"Total",Cell:function(e){var t=e.cell.value;return Object(x.jsx)("div",{children:ge(y(null===t||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{to:"/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/editer/commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(Or,{model:"fromdepots",entity:e.row.original})]})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Cr\xe9dit",children:Object(x.jsx)(je,{title:"Cr\xe9dit"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Credit"}),Object(x.jsx)("p",{children:"".concat(fe(s)," ->  ").concat(fe(j))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(mr.a,{locale:"fr-FR",onChange:p,value:v})})," "]}),Object(x.jsx)(Uc,{data:f.sort((function(e,t){return t.id-e.id})),meta:g,columns:C})]})]})};var hr=function(e){var t=ae()().isoWeekday(1).startOf("week"),n=ae()().endOf("week"),c=Object(r.useState)(t),i=Object(O.a)(c,2),s=i[0],d=i[1],o=Object(r.useState)(n),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)([t,n]),h=Object(O.a)(m,2),v=h[0],p=h[1],f=Object(ie.d)(vn("commandes").value),g=Object(ie.d)(vn("commandes").meta),N=Object(ie.c)();Object(r.useEffect)((function(){null!==v?(v[0]&&d(v[0]),v[1]&&b(v[1])):(d(t),b(n))}),[v]);var y=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot})),t},C=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=1*e.quantityParProductDepot})),t};Object(r.useEffect)((function(){N(dn("commandes",{path:"/credit-vaccinateur",replace:!0}))}),[s,j]);var q=a.a.useMemo((function(){return[{Header:"Date du credit",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n;return Object(x.jsx)("div",{style:{width:"100px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(x.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Status",Cell:function(e){var t;return Object(x.jsx)("div",{children:1==(null===(t=e.row.original)||void 0===t?void 0:t.status)?Object(x.jsx)("h3",{className:"badge badge-success",children:"pay\xe9"}):Object(x.jsx)("h3",{className:"badge badge-danger",children:"non pay\xe9"})})}},{Header:"Nom du vaccinateur",accessor:"vaccinateur.name"},{Header:"Contact du vaccinateur",accessor:"vaccinateur.contact"},{Header:"Quantit\xe9",Cell:function(e){var t;return Object(x.jsx)("div",{children:C(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(y(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{to:"/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/editer/commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(Or,{model:"fromdepots",entity:e.row.original})]})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Cr\xe9dit  pour les vaccinateurs",children:Object(x.jsx)(je,{title:"Cr\xe9dit  pour les vaccinateurs"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Credit pour les vaccinateurs"}),Object(x.jsx)("p",{children:"".concat(fe(s)," ->  ").concat(fe(j))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(mr.a,{locale:"fr-FR",onChange:p,value:v})})," "]}),Object(x.jsx)(Uc,{data:f.sort((function(e,t){return t.id-e.id})),meta:g,columns:q})]})]})},vr=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot*1})),t};var pr=Object(o.j)((function(e){var t,n,c,a,i,s,d,l,u,j,b,m,O,h=Object(o.g)(),v=Object(o.i)().id,p=Object(ie.d)(vn("commandes").value),f=Object(ie.c)();return Object(r.useEffect)((function(){f(hn("commandes").get(v))}),[v]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail de sortie ou entr\xe9e",children:Object(x.jsx)(je,{title:"D\xe9tail de sortie ou entr\xe9e"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"badge badge-info my-2",children:["vente-depot-credit"==(null===(t=p[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("h3",{children:"Credit"}),"vente-depot-vaccinateur"==(null===(n=p[0])||void 0===n?void 0:n.type)&&Object(x.jsx)("h3",{children:"Credit pour vaccinateur"}),"direct"==(null===(c=p[0])||void 0===c?void 0:c.type)&&Object(x.jsx)("h3",{children:"Direct"})]}),"vente-depot-vaccinateur"==(null===(a=p[0])||void 0===a?void 0:a.type)&&Object(x.jsx)("div",{className:"border pl-3 py-3 bg-white",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h3",{className:"my-2",children:[" ","Nom du vaccinateur : ",null===(i=p[0])||void 0===i?void 0:i.vaccinateur.name]}),Object(x.jsxs)("h5",{children:["Contact : ",null===(s=p[0])||void 0===s?void 0:s.vaccinateur.contact]})]})}),"vente-depot-credit"==(null===(d=p[0])||void 0===d?void 0:d.type)&&Object(x.jsx)("div",{className:"border pl-3 py-3 bg-white",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h3",{className:"my-2",children:["Nom:",null===(l=p[0])||void 0===l?void 0:l.emprunter.name]}),Object(x.jsxs)("h5",{children:["Contact: ",null===(u=p[0])||void 0===u?void 0:u.emprunter.contact]})]})}),p.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("p",{className:"text-uppercase",children:["Commande du : ",fe(null===(j=p[0])||void 0===j?void 0:j.dateCom)]}),1==(null===(b=p[0])||void 0===b?void 0:b.status)?Object(x.jsx)("p",{className:"btn btn-sm btn-green my-2 mt-4",children:"pay\xe9"}):Object(x.jsx)("button",{className:"btn btn-sm btn-warning my-3",onClick:function(){var e;f(function(e){return dn("commandes",{path:"/set-payer-commande?cId=".concat(e),replace:!0})}(null===(e=p[0])||void 0===e?void 0:e.id)),h.goBack()},children:"Marquer comme pay\xe9"})]}),Object(x.jsxs)("table",{className:"table table-bordered ",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),p.length>0&&(null===(m=p[0])||void 0===m?void 0:m.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)("td",{className:"d-flex align-items-center",children:[ge(e.prixVente),"(","x"," ",e.quantityParProductDepot,")"]}),Object(x.jsx)("td",{children:ge(e.prixVente*e.quantityParProductDepot)})]})})))]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("strong",{children:"Total"}),":",ge(vr(null===(O=p[0])||void 0===O?void 0:O.contenu))]})]})]})})),fr=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot*1})),t};var gr=Object(o.j)((function(e){Object(o.h)();var t,n,c,a,i,s,d,l,u,j,b,m,O=Object(o.i)().id,h=Object(ie.d)(vn("commandes").value),v=Object(ie.c)();return Object(r.useEffect)((function(){v(hn("commandes").get(O))}),[O]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail de sortie ou entr\xe9e",children:Object(x.jsx)(je,{title:"D\xe9tail de sortie ou entr\xe9e"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("p",{children:["credit"==(null===(t=h[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("p",{children:"Credit"}),"vaccinateur"==(null===(n=h[0])||void 0===n?void 0:n.type)&&Object(x.jsx)("p",{children:"Sortie vaccinateur"}),"direct"==(null===(c=h[0])||void 0===c?void 0:c.type)&&Object(x.jsx)("p",{children:"Sortie Magasion"})]}),"vaccinateur"==(null===(a=h[0])||void 0===a?void 0:a.type)&&Object(x.jsx)("div",{className:"border",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:null===(i=h[0])||void 0===i?void 0:i.vaccinateur.name}),Object(x.jsx)("h5",{children:null===(s=h[0])||void 0===s?void 0:s.vaccinateur.contact})]})}),"credit"==(null===(d=h[0])||void 0===d?void 0:d.type)&&Object(x.jsx)("div",{className:"border",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:null===(l=h[0])||void 0===l?void 0:l.emprunter.name}),Object(x.jsx)("h5",{children:null===(u=h[0])||void 0===u?void 0:u.emprunter.contact})]})}),h.length>0&&Object(x.jsx)("div",{className:"d-flex justify-content-between",children:Object(x.jsxs)("p",{className:"text-uppercase",children:["Commande du : ",fe(null===(j=h[0])||void 0===j?void 0:j.dateCom)]})}),Object(x.jsxs)("table",{className:"table table-bordered ",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),h.length>0&&(null===(b=h[0])||void 0===b?void 0:b.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)("td",{className:"d-flex align-items-center",children:[ge(e.prixVente),"(","x"," ",e.quantityParProductDepot,")"]}),Object(x.jsx)("td",{children:ge(e.prixVente*e.quantityParProductDepot)})]})})))]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("strong",{children:"Total"}),":",ge(fr(null===(m=h[0])||void 0===m?void 0:m.contenu))]})]})]})}));var Nr=function(e){var t=Object(ie.d)(vn("commandes").value),n=Object(ie.c)();Object(r.useEffect)((function(){n(dn("commandes",{path:"/direct",replace:!0}))}),[]);var c=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente})),t.toFixed(2)};return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Sortie pour le magasin",children:Object(x.jsx)(je,{title:"Sortie pour le magasin"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date de commande"}),Object(x.jsx)("th",{children:"Nb"}),Object(x.jsx)("th",{children:"Montant"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:t.map((function(e){var t;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.createdAt}),Object(x.jsx)("td",{children:null===e||void 0===e||null===(t=e.contenu)||void 0===t?void 0:t.length}),Object(x.jsx)("td",{children:c(null===e||void 0===e?void 0:e.contenu)}),Object(x.jsx)("td",{className:"d-flex justify-content-around",children:Object(x.jsx)(l.b,{className:"btn btn-sm  btn-green",to:"detail/".concat(e.id),children:"Detail"})})]})}))})]})})]})},yr=function(){var e=Object(r.useState)(new Date),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(new Date),i=Object(O.a)(a,2),s=i[0],d=i[1],o=Object(r.useRef)(null),u=Object(r.useRef)(null),j=Object(ie.d)(vn("commandes").value),b=Object(ie.c)();Object(r.useEffect)((function(){b(function(e,t){return dn("commandes",{path:"/journal?deb=".concat(e,"&fin=").concat(t),replace:!0})}(n,s))}),[n,s]);var m=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},h=function(e){return m(e.map((function(e){return e.prixVente*e.quantityParProduct})))+m(e.map((function(e){return e.prixParCC*e.qttByCC})))};return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Journal de sortie",children:Object(x.jsx)(je,{title:"Journal de sortie"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-8"}),Object(x.jsxs)("div",{className:"col-lg-4",children:[Object(x.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(x.jsx)("input",{type:"date",name:"datedeb",ref:o,placeholder:"date debut",className:"form-control mr-2"}),Object(x.jsx)("input",{type:"date",name:"datefin",ref:u,placeholder:"date fin",className:"form-control mr-2"}),Object(x.jsx)("button",{className:"btn btn-primary",onClick:function(){""==o.current.value?c(new Date):c(o.current.value),""==u.current.value?d(new Date):d(u.current.value)},children:"Filtrer"})]})," "]})," "]}),Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{className:"table",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date "}),Object(x.jsx)("th",{children:"Type de sortie"}),Object(x.jsx)("th",{children:"Montant Total"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:j.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:fe(null===e||void 0===e?void 0:e.createdAt)}),Object(x.jsx)("td",{children:Object(x.jsxs)(x.Fragment,{children:["cva"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-info",children:"Approvisionnement du magasin"}),"vente-magasin-direct"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-success",children:"Vente direct depuis le magasin"}),"vente-magasin-credit"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-info",children:"credit client depuis magasin"}),"credit"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-danger",children:"Credit personne"}),"vaccinateur"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Credit Vaccinateur"}),"direct"==(null===e||void 0===e?void 0:e.type)&&Object(x.jsx)("div",{className:"badge badge-dark",children:"Vente direct depuis le dep\xf4t"})]})}),Object(x.jsx)("td",{children:ge(h(null===e||void 0===e?void 0:e.contenu))}),Object(x.jsx)("td",{children:Object(x.jsx)(l.b,{className:"btn btn-sm  btn-green",to:"/detail/".concat(e.id),children:"Afficher le detail"})})]})}))})]})}),Object(x.jsxs)("h3",{children:["Total:",ge(function(e){var t=0;return e.map((function(e){t+=h(null===e||void 0===e?void 0:e.contenu)})),t}(j))]})]})]})})};var Cr=function(){var e,t,n=Object(ie.d)(vn("parametres").value),c=Object(ie.c)();return Object(r.useEffect)((function(){c(hn("parametres").get(1))}),[]),Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"mb-2 text-bold title",children:"Parametres supplementaires"}),Object(x.jsxs)("div",{className:"card mt-2",children:[Object(x.jsx)("div",{className:"card-body",children:Object(x.jsx)(Mc,{id:"parametrage-form",enableReinitialize:!0,initialValues:{nb_mois:null===(e=n[0])||void 0===e?void 0:e.nbMois,nb_produit:null===(t=n[0])||void 0===t?void 0:t.nbProduits},validations:{},onSubmit:function(e,t){c(hn("parametres").update({id:1,nb_mois:e.nb_mois,nb_produits:e.nb_produit}))},render:function(){return Object(x.jsxs)(Mc.Element,{children:[Object(x.jsx)(Mc.Field.Input,{name:"nb_mois",label:"Nombre de mois",placeholder:"Nombre de mois",type:"number"}),Object(x.jsx)(Mc.Field.Input,{name:"nb_produit",label:"Nombre de produit",placeholder:"Nombre de produit",type:"number"}),Object(x.jsx)("button",{type:"submit",className:"btn btn-success mt-2 btn-sm",children:"Sauvegarder la modification"})]})}})})," "]})," "]})},qr=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)();Object(r.useEffect)((function(){n(dn("products",{path:"/perimer",replace:!0}))}),[]);var c=a.a.useMemo((function(){return[{Header:"Produit",accessor:"name"},{Header:"Quantit\xe9",accessor:"quantityBrute"},{Header:"Date de peremption",Cell:function(e){var t;return Object(x.jsx)("h3",{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.datePer)})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Article perim\xe9",children:Object(x.jsx)(je,{title:"Article perim\xe9"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Uc,{data:e,meta:t,columns:c})})]})},Ar=c(62);function Sr(){return Ar.b().shape({name:Ar.c().required("Le champ est requis")})}var Er=c(1058);var wr=function(e){var t=e.message;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Er.a,{mb:3,status:"success",variant:"top-accent",children:"string"===typeof t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Er.b,{}),t]})})})},Pr=c(1039),Vr=c(194);var Rr=function(e){var t=e.error;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Er.a,{mb:3,status:"error",variant:"top-accent",children:["object"===typeof t&&t.length>0&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Pr.a,{spacing:3,children:t.map((function(e,t){return Object(x.jsxs)(Pr.c,{children:[Object(x.jsx)(Pr.b,{as:Vr.b,color:"red.500"},t),e.msg]},t)}))})}),"object"===typeof t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Vr.c,{color:"red.500"}),t.message]}),"string"===typeof t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Er.b,{}),t.message]})]})})};var Fr=function(){var e=Object(ie.d)(vn("fournisseurs").value),t=Object(ie.d)(vn("categories").value),n=Object(ie.d)(vn("categories").meta),c=Object(ie.d)(vn("fournisseurs").meta),a=Object(ie.d)(vn("products").meta),i=Object(r.useState)(0),s=Object(O.a)(i,2),d=(s[0],s[1],Object(r.useState)(0)),l=Object(O.a)(d,2),u=(l[0],l[1],Object(ie.c)()),j=Object(o.g)();return Object(r.useEffect)((function(){u(hn("fournisseurs").fetch()),u(hn("categories").fetch()),u(hn("products").fetch())}),[j]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Ajouter un produit",children:Object(x.jsx)(je,{title:"Ajouter un produit"})}),Object(x.jsxs)(xe,{children:[""!=a.success&&null!=a.success&&Object(x.jsx)(wr,{message:a.success}),a.error&&Object(x.jsx)(Rr,{error:a.error}),Object(x.jsx)(Mc,{id:"add-form-product",enableReinitialize:!0,initialValues:{name:"",type:"BOLUS",doseDefault:0,prixlitre:0,prixVente:0,prixFournisseur:0,prixVaccinateur:0,quantityParProduct:0,prixParCC:0,datePer:"",uniteMesure:"ml",qttByCC:0,newStockBrute:0,newStockCC:0,fournisseurId:1,qttyspecificmirror:0,quantityBruteCVA:0,categoryId:1,quantityBrute:0,quantityCCCVA:0,quantityCC:0,condml:0,condval:0,conditionnement:1,qttccpvente:0,prixqttccvente:0},validations:Sr,onSubmit:function(e,t){var n=e.name,c=e.type,r=e.doseDefault,a=e.prixVente,i=e.prixFournisseur,s=e.prixVaccinateur,d=e.prixParCC,l=(e.datePer,e.fournisseurId),o=e.categoryId,b=e.condml,m=(e.condval,e.qttccpvente),O=e.conditionnement,x=e.prixqttccvente,h=e.condsize,v=e.prixlitre;u(hn("products").create({name:n,type:c,doseDefault:r,prixVente:parseFloat(a),prixlitre:parseFloat(v),prixFournisseur:parseFloat(i),prixVaccinateur:parseFloat(s),quantityParProduct:0,quantityBruteCVA:0,quantityBrute:0,quantityCCCVA:0,quantityCC:0,prixParCC:parseFloat(d),datePer:new Date,uniteMesure:"ml",qttByCC:0,newStockBrute:0,newStockCC:0,categoryId:parseInt(o),fournisseurId:parseInt(l),condml:parseFloat(b),condsize:parseFloat(h),conditionnement:O,qttccpvente:parseFloat(m),prixqttccvente:parseInt(x),refSortie:"0",refQtSortie:0,qttByCCDepot:0,condmldepot:0,condvaldepot:0,qttccpventedepot:0,prixqttccventedepot:0,quantityParProductDepot:0,condsizedepot:0,doseRestantEnMg:0,qttbylitre:0,remise:0,condval:0,correction:0,correctionml:0,correctionl:0,correctiontml:0,correctiontl:0,correctiontype:0,qttyspecificmirror:0,remisePerProduct:1})),j.push(y)},render:function(r){var a=r.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[1==n.isFetching&&Object(x.jsx)("p",{children:"Recuperation des categories"}),Object(x.jsx)(Mc.Field.Select,{name:"categoryId",label:"Categorie",emptyValue:!0,valueKey:"name",disabled:n.isFetching,defaultValue:1,options:t}),1==c.isFetching&&Object(x.jsx)("p",{children:"Recuperation des fournisseurs"}),Object(x.jsx)(Mc.Field.Select,{name:"fournisseurId",label:"Fournisseur",emptyValue:!0,valueKey:"name",options:e,disabled:c.isFetching}),Object(x.jsx)(Mc.Field.Input,{name:"name",label:"D\xe9signation",placeholder:"D\xe9signation (Tikaz 1L )"}),Object(x.jsx)(Mc.Field.Select,{name:"type",label:"Type d'article",emptyValue:!1,isNumeric:!1,valueKey:"name",options:[{id:"BOLUS",name:"BOLUS"},{id:"FLACON",name:"FLACON"},{id:"UNITE",name:"UNITE"},{id:"SACHET",name:"SACHET"}]}),"FLACON"===a.type&&Object(x.jsxs)("div",{className:"ml-3",children:[Object(x.jsx)(Mc.Field.Input,{name:"doseDefault",label:"Quantit\xe9 en ml ou dose ou en litre",placeholder:"Quantit\xe9 en ml ou dose ou en litre"}),Object(x.jsx)(Mc.Field.Select,{name:"conditionnement",label:"Conditionnement",valueKey:"name",options:[{id:1,name:"Sans conditionnement"},{id:2,name:"Avec conditionnement"}]}),2==a.conditionnement&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Mc.Field.Input,{name:"condml",defaultValue:0,label:"Conditionnement (ML)",placeholder:"Conditionnement en ML"}),Object(x.jsx)(Mc.Field.Input,{name:"condsize",defaultValue:0,label:"Diviser en combien de flacon",placeholder:"Diviser en combien de flacon"}),Object(x.jsx)(Mc.Field.Input,{name:"qttccpvente",defaultValue:0,label:"Quantit\xe9 de vente en ML",placeholder:"Quantit\xe9 de vente en ML"}),Object(x.jsx)(Mc.Field.Input,{name:"prixqttccvente",disabled:null==a.qttccpvente||""==a.qttccpvente,label:"Prix de vente equivalent \xe0 ".concat(a.qttccpvente," ML."),placeholder:"Prix de vente equivalent \xe0 ".concat(a.qttccpvente," ML.")})]})]})]})]})}),Object(x.jsxs)("div",{className:"col-lg-6",children:[Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Vente"}),Object(x.jsxs)("div",{className:"card-body",children:[2==a.conditionnement&&Object(x.jsx)(Mc.Field.Input,{name:"prixlitre",label:"Prix d'un litre",placeholder:"Prix d'un litre"}),Object(x.jsx)(Mc.Field.Input,{name:"prixFournisseur",defaultValue:0,label:"prix unitaire",placeholder:"prix unitaire"}),Object(x.jsx)(Mc.Field.Input,{name:"prixVente",defaultValue:0,label:"Prix de vente",placeholder:"prix de vente"}),Object(x.jsx)(Mc.Field.Input,{name:"prixVaccinateur",defaultValue:0,label:"Prix du vaccinateur",placeholder:"prix du vaccinateur"}),Object(x.jsx)(x.Fragment,{children:"FLACON"===a.type&&Object(x.jsx)(Mc.Field.Input,{data:0!=a.qttccpvente&&""!=a.qttccpvente&&a.prixqttccvente/a.qttccpvente!="Infinity"?a.prixqttccvente/a.qttccpvente:0,name:"prixParCC",label:"Prix de vente ml",placeholder:"Prix de vente ml"})})]})]}),Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})})}})]})]})})};var Dr=function(){var e,t,n,c,a,i,s,d,u,j,b,m,O,h,v,p,f,g,N,y,C,q,A=Object(o.i)().id,S=Object(ie.c)(),E=Object(ie.d)(vn("products").value);return Object(r.useEffect)((function(){S(hn("products").get(A))}),[]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail du produit",children:Object(x.jsx)(je,{title:"D\xe9tail du produit"})}),Object(x.jsxs)(xe,{children:[Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsx)(l.b,{className:"btn btn-sm btn-warning mr-2 mb-2",to:"/changer/prix/".concat(A),children:"Rectification de prix"})}),2!=(null===(e=E[0])||void 0===e?void 0:e.conditionnement)||null!=(null===(t=E[0])||void 0===t?void 0:t.conditionnement)&&Object(x.jsxs)("div",{className:"card card-info",children:[Object(x.jsx)("div",{className:"card-header",children:"Conditionnement"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsxs)("p",{children:["Prix d'un litre:"," ",Object(x.jsx)("span",{className:"badge badge-info",children:null===(n=E[0])||void 0===n?void 0:n.prixlitre})]}),Object(x.jsxs)("p",{children:["Conditionnement (ML):"," ",Object(x.jsx)("span",{className:"badge badge-info",children:null===(c=E[0])||void 0===c?void 0:c.condml})]}),Object(x.jsxs)("p",{children:["Division en flacon:"," ",Object(x.jsx)("span",{className:"badge badge-info",children:null===(a=E[0])||void 0===a?void 0:a.condsize})]}),Object(x.jsxs)("p",{children:["Quantit\xe9 de vente par ML:",Object(x.jsx)("span",{className:"badge badge-info",children:null===(i=E[0])||void 0===i?void 0:i.qttccpvente})]}),Object(x.jsxs)("p",{children:["Prix de vente pour ",null===(s=E[0])||void 0===s?void 0:s.qttccpvente," ML:"," ",Object(x.jsxs)("span",{className:"badge badge-info",children:[ge(null===(d=E[0])||void 0===d?void 0:d.prixqttccvente)," "]})]})]})]}),Object(x.jsxs)("table",{className:"table table-striped",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Nom de l'article:"})}),Object(x.jsxs)("td",{children:[null===(u=E[0])||void 0===u?void 0:u.name," "]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Fournisseur :"})}),Object(x.jsx)("td",{children:null===(j=E[0])||void 0===j||null===(b=j.fournisseur)||void 0===b?void 0:b.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Categorie :"})}),Object(x.jsx)("td",{children:null===(m=E[0])||void 0===m||null===(O=m.category)||void 0===O?void 0:O.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Type:"})}),Object(x.jsxs)("td",{children:[null===(h=E[0])||void 0===h?void 0:h.type," "]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Dose:"})}),Object(x.jsxs)("td",{children:[null===(v=E[0])||void 0===v?void 0:v.doseDefault," ML "]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Prix unitaire:"})}),Object(x.jsx)("td",{children:ge(null===(p=E[0])||void 0===p?void 0:p.prixFournisseur)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Prix de vente:"})}),Object(x.jsx)("td",{children:ge(null===(f=E[0])||void 0===f?void 0:f.prixVente)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Prix pour le vaccinateur:"})}),Object(x.jsx)("td",{children:ge(null===(g=E[0])||void 0===g?void 0:g.prixVaccinateur)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("strong",{children:"Prix par ML:"})}),Object(x.jsx)("td",{children:0!=(null===(N=E[0])||void 0===N?void 0:N.qttccpvente)?ge((null===(y=E[0])||void 0===y?void 0:y.prixParCC)*(null===(C=E[0])||void 0===C?void 0:C.qttccpvente)):ge(null===(q=E[0])||void 0===q?void 0:q.prixParCC)})]})]})]})]})};var Mr=function(){var e,t,n=Object(o.i)().id,c=Object(ie.d)(vn("fournisseurs").value),a=Object(ie.d)(vn("categories").value),i=Object(ie.d)(vn("products").value),s=Object(ie.d)(vn("products").meta),d=Object(r.useState)((e={name:"",type:"",doseDefault:"",prixlitre:"",prixVente:"",prixFournisseur:"",prixVaccinateur:"",prixParCC:"",datePer:"",uniteMesure:"ml",conditionnement:"",categoryId:""},Object(We.a)(e,"datePer",""),Object(We.a)(e,"fournisseurId",""),Object(We.a)(e,"condml",""),Object(We.a)(e,"condsize",""),Object(We.a)(e,"qttccpvente",""),Object(We.a)(e,"prixqttccvente",""),e)),l=Object(O.a)(d,2),u=l[0],j=l[1],b=Object(o.g)(),m=Object(r.useState)(1),h=Object(O.a)(m,2),v=(h[0],h[1],Object(r.useState)(1)),p=Object(O.a)(v,2),f=(p[0],p[1],Object(r.useState)(0)),g=Object(O.a)(f,2),N=g[0],C=g[1],q=Object(r.useState)(0),A=Object(O.a)(q,2),S=A[0],E=A[1],w=Object(ie.c)(),P=Object(r.useState)({}),V=Object(O.a)(P,2),R=(V[0],V[1]),F=Object(r.useState)(u.type),D=Object(O.a)(F,2),M=(D[0],D[1]);return Object(r.useEffect)((function(){w(hn("products").fetch()),M(u.type),E(u.prixqttccvente),C(u.qttccpvente)}),[n]),Object(r.useEffect)((function(){s.isFetching||(j(null===i||void 0===i?void 0:i.find((function(e){return e.id==n}))),R({name:u.name}))}),[s]),Object(r.useEffect)((function(){w(hn("fournisseurs").fetch()),w(hn("categories").fetch())}),[]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer un produit",children:Object(x.jsx)(je,{title:"Editer un produit"})}),Object(x.jsxs)(xe,{children:[""!=s.success&&null!=s.success&&Object(x.jsx)(wr,{message:s.success}),i.name,s.error&&Object(x.jsx)(Rr,{error:s.error}),Object(x.jsx)(Mc,{id:"add-form-product",initialValues:(t={name:u.name,type:u.type,doseDefault:u.doseDefault,prixlitre:u.prixlitre,prixVente:u.prixVente,prixFournisseur:null===u||void 0===u?void 0:u.prixFournisseur,prixVaccinateur:u.prixVaccinateur,prixParCC:u.prixParCC,datePer:u.datePer,uniteMesure:"ml",conditionnement:u.conditionnement,categoryId:u.categoryId},Object(We.a)(t,"datePer",u.datePer),Object(We.a)(t,"fournisseurId",u.fournisseurId),Object(We.a)(t,"condml",null==u.condml?0:u.condml),Object(We.a)(t,"condsize",null==u.condsize?0:u.condsize),Object(We.a)(t,"qttccpvente",null==u.qttccpvente?0:u.qttccpvente),Object(We.a)(t,"prixqttccvente",null==u.prixqttccvente?0:u.prixqttccvente),t),validations:Sr,onSubmit:function(e,t){var n=e.name,c=e.type,r=e.doseDefault,a=e.prixlitre,i=e.prixVente,s=e.prixFournisseur,d=e.prixVaccinateur,l=e.prixParCC,o=e.datePer,j=e.fournisseurId,m=e.categoryId,O=e.condml,x=(e.condval,e.qttccpvente),h=e.prixqttccvente,v=e.conditionnement,p=e.condsize;w(hn("products").update({id:u.id,name:n,type:c,doseDefault:r,prixVente:parseFloat(i),prixFournisseur:parseFloat(s),prixVaccinateur:parseFloat(d),prixlitre:parseFloat(a),prixParCC:parseFloat(l),datePer:new Date(o),qttByCC:parseFloat(u.qttByCC),quantityBrute:parseFloat(u.quantityBrute),quantityBruteCVA:parseFloat(u.quantityBruteCVA),quantityCCCVA:parseFloat(u.quantityCCCVA),quantityCC:parseFloat(u.quantityCC),uniteMesure:"ml",condml:parseFloat(O),condsize:parseFloat(p),qttccpvente:parseFloat(x),fournisseurId:parseInt(j),categoryId:parseInt(m),conditionnement:parseInt(v),prixqttccvente:parseInt(h),updatedAt:new Date,refSortie:"0",refQtSortie:0,qttByCCDepot:0,condmldepot:0,condvaldepot:0,qttyspecificmirror:0,qttccpventedepot:0,prixqttccventedepot:0,quantityParProductDepot:0,condsizedepot:0,qttbylitre:0,remise:0,condval:0,correction:0,correctionml:0,correctionl:0,correctiontml:0,correctiontl:0,correctiontype:0})),b.push(y)},render:function(e){var t=e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Select,{name:"categoryId",label:"Categorie",valueKey:"name",selectValue:u.categoryId,options:a}),Object(x.jsx)(Mc.Field.Select,{name:"fournisseurId",label:"Fournisseur",valueKey:"name",selectValue:u.fournisseurId,options:c}),Object(x.jsx)(Mc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"D\xe9signation",placeholder:"D\xe9signation"}),Object(x.jsx)(Mc.Field.Select,{name:"type",label:"Type d'article",emptyValue:!1,isNumeric:!1,valueKey:"name",options:[{id:"BOLUS",name:"BOLUS"},{id:"FLACON",name:"FLACON"},{id:"UNITE",name:"UNITE"},{id:"SACHET",name:"SACHET"}]}),"FLACON"===t.type&&Object(x.jsxs)("div",{className:"ml-3",children:[Object(x.jsx)(Mc.Field.Input,{name:"doseDefault",label:"Quantit\xe9 en ml ou dose ou litre",placeholder:"Quantit\xe9 en ml ou dose ou litre"}),Object(x.jsx)(Mc.Field.Select,{name:"conditionnement",label:"Conditionnement",valueKey:"name",emptyValue:!1,options:[{id:1,name:"Sans conditionnement"},{id:2,name:"Avec conditionnement"}]}),2==t.conditionnement&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Mc.Field.Input,{name:"condml",label:"Conditionnement (ML)",placeholder:"Conditionnement en ML"}),Object(x.jsx)(Mc.Field.Input,{name:"condsize",label:"Diviser en combien de flacon",placeholder:"Diviser en combien de flacon"}),Object(x.jsx)(Mc.Field.Input,{name:"qttccpvente",label:"Quantit\xe9 de vente en ML",placeholder:"Quantit\xe9 de vente en ML"}),Object(x.jsx)(Mc.Field.Input,{name:"prixqttccvente",value:null===t||void 0===t?void 0:t.prixqttccvente,disabled:null==t.qttccpvente||""==t.qttccpvente,label:"Prix de vente equivalent \xe0 ".concat(t.qttccpvente," ML."),placeholder:"Prix de vente equivalent \xe0 ".concat(t.qttccpvente," ML.")})]})]})]})]})}),Object(x.jsxs)("div",{className:"col-lg-6",children:[Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Vente"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"prixFournisseur",value:null===t||void 0===t?void 0:t.prixFournisseur,label:"prix unitaire",placeholder:"prix unitaire"}),2==t.conditionnement&&Object(x.jsx)(Mc.Field.Input,{name:"prixlitre",value:null===t||void 0===t?void 0:t.prixlitre,label:"Prix d'un litre",placeholder:"Prix d'un litre"}),Object(x.jsx)(Mc.Field.Input,{name:"prixVente",label:"Prix de vente",value:null===t||void 0===t?void 0:t.prixVente,placeholder:"prix de vente"}),"FLACON"===t.type&&Object(x.jsx)(Mc.Field.Input,{type:"text",data:0!=N&&""!=N&&S/N!="Infinity"?S/N:0,name:"prixParCC",label:"Prix de vente ml",placeholder:"Prix de vente ml"}),Object(x.jsx)(Mc.Field.Input,{value:null===t||void 0===t?void 0:t.prixVaccinateur,name:"prixVaccinateur",label:"Prix du vaccinateur",placeholder:"prix du vaccinateur"})]})]}),Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})})}})]})]})};c(346),c(347);var Br=function(e){var t=e.model,n=e.entity,c=e.attribute,r=Object(ie.c)();return Object(o.g)(),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm('Vous voulez vraiment supprimer "'.concat(n[c],'" ?'))&&r(hn(t).destroy(n))},children:"Supprimer"})})};c(1040),c(1041),c(1042),c(1035),c(118);var Tr=function(e){var t=e.route,n=e.model,c=e.modelKey,r=e.data,a=e.detail,i=void 0===a||a;return Object(x.jsxs)("div",{children:[i&&Object(x.jsx)(l.b,{className:"btn btn-sm btn-primary mr-2",to:"/".concat(t,"/detail/").concat(r.row.original.id),children:"Detail"}),Object(x.jsx)(l.b,{className:"btn btn-sm btn-warning mr-2",to:"/".concat(t,"/edit/").concat(r.row.original.id),children:"Editer"}),Object(x.jsx)(Br,{model:n,entity:r.row.original,attribute:c})]})},kr=function(){var e=Object(ie.d)(vn("products").value)||[],t=Object(ie.d)(vn("products").meta),n=(Object(r.useRef)(),Object(ie.c)());Object(o.g)();Object(r.useEffect)((function(){n(hn("products").fetch())}),[]);var c=[{Header:"Id",accessor:"id"},{Header:"Produit",accessor:"name"},{Header:"Fournisseur",Cell:function(e){var t,n,c;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("span",{className:"badge badge-primary",children:null!=(null===(t=e.row.original)||void 0===t?void 0:t.fournisseur)?null===(n=e.row.original)||void 0===n||null===(c=n.fournisseur)||void 0===c?void 0:c.name:""})})}},{Header:"Quantit\xe9",accessor:"quantityBrute"},{Header:"Reste en ML",accessor:"quantityCC"},{Header:"Prix unitaire",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.prixFournisseur)})}},{Header:"Prix de vente",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(null===(t=e.row.original)||void 0===t?void 0:t.prixVente)})}},{Header:"Prix en ML",Cell:function(e){var t,n,c,r;return Object(x.jsx)("div",{children:0!=(null===(t=e.row.original)||void 0===t?void 0:t.qttccpvente)?ge((null===(n=e.row.original)||void 0===n?void 0:n.prixParCC)*(null===(c=e.row.original)||void 0===c?void 0:c.qttccpvente)):ge(null===(r=e.row.original)||void 0===r?void 0:r.prixParCC)})}},{Header:"Actions",Cell:function(e){return Object(x.jsx)(Tr,{route:"product",model:"products",modelKey:"name",data:e})}}];return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Tous les produits",children:Object(x.jsx)(je,{title:"Tous les produits"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Uc,{data:e,meta:t,columns:c,addUrl:N,urlName:"Ajouter un produit"})})]})};var Ir=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("categories").value),n=Object(ie.c)(),c=Object(r.useState)(1),a=Object(O.a)(c,2),i=a[0],s=a[1];return Object(r.useEffect)((function(){n(function(e){return dn("products",{path:"/product/category?id=".concat(e),replace:!0})}(i)),n(hn("categories").fetch())}),[i]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Liste des articles par categories",children:Object(x.jsx)(je,{title:"Liste des articles par categories"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-8"}),Object(x.jsx)("div",{className:"col-lg-4",children:Object(x.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(x.jsx)("label",{htmlFor:"",children:"Categorie:"}),Object(x.jsx)("select",{className:"form-control",onChange:function(e){s(e.target.value)},children:t.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{className:"bg-thead",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Nom"}),Object(x.jsx)("th",{children:"Prix Unitaire"}),Object(x.jsx)("th",{children:"Categorie"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:e.map((function(e){var t;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),Object(x.jsx)("td",{children:ge(null===e||void 0===e?void 0:e.prixFournisseur)}),Object(x.jsx)("td",{children:null===e||void 0===e||null===(t=e.category)||void 0===t?void 0:t.name}),Object(x.jsx)("td",{children:Object(x.jsx)(l.b,{className:"btn btn-sm btn-primary",to:"/product/detail/".concat(e.id),children:"Detail"})})]})}))})]})]})]})};var _r=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("fournisseurs").value),n=Object(ie.c)(),c=Object(r.useState)(1),a=Object(O.a)(c,2),i=a[0],s=a[1];return Object(r.useEffect)((function(){n(function(e){return dn("products",{path:"/product/fournisseur?id=".concat(e),replace:!0})}(i)),n(hn("fournisseurs").fetch())}),[i]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Liste des articles par fournisseurs",children:Object(x.jsx)(je,{title:"Liste des articles par fournisseurs"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-8"}),Object(x.jsx)("div",{className:"col-lg-4",children:Object(x.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[Object(x.jsx)("label",{htmlFor:"",children:"Fournisseur:"}),Object(x.jsx)("select",{className:"form-control",onChange:function(e){s(e.target.value)},children:t.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Nom"}),Object(x.jsx)("th",{children:"Prix"}),Object(x.jsx)("th",{children:"Fournisseur"}),Object(x.jsx)("td",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:e.map((function(e){var t;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),Object(x.jsx)("td",{children:ge(null===e||void 0===e?void 0:e.prixFournisseur)}),Object(x.jsx)("td",{children:null===e||void 0===e||null===(t=e.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("td",{children:Object(x.jsx)(l.b,{className:"btn btn-sm btn-primary",to:"/product/detail/".concat(e.id),children:"Detail"})})]})}))})]})]})]})},Qr=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)();Object(r.useEffect)((function(){n(dn("products",{path:"/rupture/stock",replace:!0}))}),[]);var c=a.a.useMemo((function(){return[{Header:"Produit",accessor:"name"},{Header:"Quantit\xe9",accessor:"quantityBrute"},{Header:"Date de peremption",Cell:function(e){var t;return Object(x.jsx)("h3",{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.datePer)})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Article en rupture de stock",children:Object(x.jsx)(je,{title:"Article en rupture de stock"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Uc,{data:e,meta:t,columns:c})})]})},Lr=c(1043);var Hr=function(){var e=Object(r.useState)(new Date),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(new Date),i=Object(O.a)(a,2),s=i[0],d=i[1],o=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente})),t},u=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.quantityBrute})),t},j=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.quantityCC})),t},b=Object(r.useRef)(null),m=Object(r.useRef)(null),h=Object(ie.d)(vn("commandes").value),v=Object(ie.c)();return Object(r.useEffect)((function(){v(function(e,t){return dn("commandes",{path:"/entree?deb=".concat(e,"&fin=").concat(t),replace:!0})}(n,s))}),[n,s]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Factures",children:Object(x.jsx)(je,{title:"Factures"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-4 mb-2",children:Object(x.jsx)(l.b,{to:"/approv",className:"btn  btn-primary",children:" Effectuer un approvisionnement"})}),Object(x.jsx)("div",{className:"col-lg-8"})]}),Object(x.jsxs)("div",{className:"border p-3 bg-white",children:[Object(x.jsxs)("div",{className:"row mb-3",children:[Object(x.jsx)("div",{className:"col-lg-7"}),Object(x.jsx)("div",{className:"col-lg-5",children:Object(x.jsxs)("div",{className:"d-flex justify-content-around",children:[Object(x.jsx)("input",{type:"date",name:"datedeb",className:"form-control mr-3",format:"DD-MM-YYYY",ref:b,placeholder:"D\xe9but"}),Object(x.jsx)("input",{type:"date",name:"datefin",className:"form-control mr-3",ref:m,placeholder:"Fin"}),Object(x.jsx)(Lr.a,{onClick:function(){c(b.current.value),d(m.current.value)},children:"Filtrer"})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date"}),Object(x.jsx)("th",{children:"Quantite Brute"}),Object(x.jsx)("th",{children:"Quantite en CC"}),Object(x.jsx)("th",{children:"Montant Total"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:h.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:null===e||void 0===e?void 0:e.createdAt}),Object(x.jsx)("td",{children:u(null===e||void 0===e?void 0:e.contenu)}),Object(x.jsx)("td",{children:j(null===e||void 0===e?void 0:e.contenu)}),Object(x.jsx)("td",{children:Object(x.jsx)(kc.a,{value:o(null===e||void 0===e?void 0:e.contenu),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Ee.a)(Object(Ee.a)({},t),{},{children:e}))}})}),Object(x.jsx)("td",{className:"d-flex justify-content-around",children:Object(x.jsx)(l.b,{className:"btn btn-sm  btn-success",to:"detail/".concat(e.id),children:"Afficher le detail"})})]})}))})]})]})]})]})},Ur="ROLE_VENDEUR",Yr=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SIGNUP_URL||"http://localhost:8100/api/signup",zr=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SIGNIN_URL||"http://localhost:8100/api/signin",Kr=(Object(o.j)((function(){return Object(x.jsxs)(a.a.Fragment,{children:[Object(x.jsx)("div",{className:"bg-dark m-0  p-2  text-center",children:Object(x.jsx)("h3",{className:"m-0 p-2 text-white",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsxs)("ul",{className:"list-inline d-flex m-0  p-2 justify-content-center",children:[Object(x.jsx)("li",{className:"text-white  m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:"/journal",children:"Journal d'entrees et sorties"})}),Object(x.jsx)("li",{className:"text-white  m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:R,children:"Entree"})}),Object(x.jsx)("li",{className:"text-white  m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:F,children:"Sortie"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn btn-sm bg-success text-white",to:"/products",children:"Articles"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn bg-success btn-sm text-white",to:"/credit",children:"Credit"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn bg-success btn-sm text-white",to:S,children:"Credit Vaccinateur"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn bg-success btn-sm text-white",to:E,children:"Commande direct"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn bg-success btn-sm text-white",to:P,children:"Produit par fournisseur"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn bg-success btn-sm text-white",to:V,children:"Produit par category"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:"/",children:"Bon de sortie"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:"/approv",children:"Article \xe0 approvisionner"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:"/perimes",children:"Article perim\xe9"})}),Object(x.jsx)("li",{className:"text-white m-0  p-2",children:Object(x.jsx)(l.b,{className:"btn  btn-sm bg-success text-white",to:w,children:"Parametres"})})]})]})})),"SET_APPROV_ITEMS"),Gr="ADD_TO_APPROV",Wr="REMOVE_FROM_APPROV",Jr="CLEAR_APPROV",Xr="ADD_QTY_APPROV_ITEM",Zr="MINUS_QTY_APPROV_ITEM",$r="ADD_NUMBER_QTY_ITEM",ea="ADD_QTY_NUMBER_APPROV_ITEM",ta="ADD_REMISE_PER_PRODUCT",na="ADD_REMISE_PER_PRODUCT_PERCENT",ca=function(){return{type:Jr}},ra=function(e,t){return{type:ta,payload:{id:e,value:t}}},aa=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{approvisionnement:e,isItemOnApprov:n,addToApprov:function(e){n(e.id)?t(function(e){return{type:Wr,payload:e}}(e.id)):t(function(e){return{type:Gr,payload:e}}(e))}}},ia=function(e){var t,n=e.key,c=e.product,r=e.isItemOnApprov,a=e.handleAddToApprov;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Wc.a.Item,{children:Object(x.jsxs)(Jc.a,{className:"product-card m-2 ".concat(c.id?"":"product-loading"),style:{border:c&&r(c.id)?"1px solid #a6a5a5":"",boxShadow:c&&r(c.id)?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)(Xc.a,{xs:9,children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:null===c||void 0===c?void 0:c.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===c||void 0===c||null===(t=c.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("p",{children:Object(x.jsxs)("strong",{children:[" ",ge(null===c||void 0===c?void 0:c.prixFournisseur)]})})]})}),Object(x.jsx)(Xc.a,{xs:3,children:(null===c||void 0===c?void 0:c.id)&&Object(x.jsx)("button",{className:" ".concat(r(c.id)?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){return a(c)},children:r(c.id)?"Retirer":"Ajouter"})})]})},n)})},sa=a.a.memo(ia),da=function(e){var t=e.product,n=Object(ie.c)(),c=function(e){n(function(e,t){return{type:ea,payload:{id:e,value:t}}}(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{w:28,bg:"whitesmoke",onChange:function(e){c(Number(e))},min:0,defaultValue:t.quantityParProduct,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},la=function(e){var t=e.product,n=e.isItemOnApprov,c=e.addToApprov,r=(Object(ie.c)(),!!n&&n(t.id));return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-start border   mb-2 p-2",children:[Object(x.jsx)("div",{style:{width:"65%"},children:Object(x.jsxs)("table",{border:"1",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Nom du produit : "}),Object(x.jsx)("td",{children:null===t||void 0===t?void 0:t.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Prix unitaire:"}),Object(x.jsx)("td",{children:ge(t.prixFournisseur)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Montant HT:"}),Object(x.jsx)("td",{children:ge(t.prixFournisseur*t.quantityParProduct-t.remise)})]})]})}),Object(x.jsx)("div",{className:"d-flex mt-3",children:Object(x.jsx)(da,{product:t})}),Object(x.jsx)("div",{children:r&&Object(x.jsx)("button",{onClick:function(){c&&c(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},oa=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},ua=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function ja(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?ja(n):n;return t}var ba=function(e,t){return ua(e)-t},ma=function(e){e.setRegenerate;var t=Object(r.useState)(0),n=Object(O.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(new Date),s=Object(O.a)(i,2),d=s[0],l=s[1],u=Object(r.useState)(null),j=Object(O.a)(u,2),b=j[0],m=j[1],h=Object(r.useState)(""),v=Object(O.a)(h,2),p=v[0],f=v[1],g=Object(r.useState)("espece"),N=Object(O.a)(g,2),y=N[0],C=N[1],q=Object(ie.d)(vn("approvis").meta),A=Object(ie.c)(),S=Object(o.g)();Object(r.useEffect)((function(){A(hn("approvis").fetch())}),[]);var E=Object(ie.d)((function(e){return{approvisionnements:e.approvisionnements}})).approvisionnements,w=aa(E,A),P=w.isItemOnApprov,V=w.addToApprov,R=function(e){return ja(e).map((function(e){return e.quantityBrute+=e.quantityParProduct,e}))};return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:Object(x.jsxs)("div",{children:["Factures ("," ".concat(E.length," ").concat(E.length>1?"produits":"produit"),")"]})}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date du facture :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return m(e.target.value)},value:b,className:"form-control"})})]}),E.length<=0&&Object(x.jsx)("div",{class:"alert alert-success ",children:"Aucune produit !!!"}),null===E||void 0===E?void 0:E.map((function(e,t){return Object(x.jsx)(la,{product:e,isItemOnApprov:P,addToApprov:V,approvisionnement:E,dispatch:A},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))})),E.length>0&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"d-flex justify-content-end align-items-center my-3 ",children:Object(x.jsxs)("table",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"REMISE : (en Ariary)"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"number",className:"form-control",placeholder:"Remise",min:0,value:c,max:100,onChange:function(e){a(e.target.value)}})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"PAIEMENT LE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return l(e.target.value)},value:d,className:"form-control"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"TYPE DE PAIEMENT:"}),Object(x.jsx)("td",{children:Object(x.jsxs)("select",{className:"form-control",onChange:function(e){C(e.target.value)},children:[Object(x.jsx)("option",{value:"espece",selected:!0,children:"ESPECE"}),Object(x.jsx)("option",{value:"boa",children:"CHEQUE - BOA"}),Object(x.jsx)("option",{value:"bni",children:"CHEQUE - BNI"}),Object(x.jsx)("option",{value:"MVola",children:"VIREMENT - MVola"}),Object(x.jsx)("option",{value:"OrangeMoney",children:"VIREMENT - ORANGE MONEY"})]})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"REMARQUE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("textarea",{className:"form-control",onChange:function(e){f(e.target.value)},placeholder:"Ecriver ici quelque chose d'autre \xe0 savoir sur l'approvisionnement"})})]})]})}),Object(x.jsxs)("div",{className:"d-flex flex-column  my-3 ",children:[" ",Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total HT:",Object(x.jsx)("strong",{children:Object(x.jsx)(kc.a,{value:ua(E.map((function(e){return e.prixFournisseur*e.quantityParProduct}))),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Ee.a)(Object(Ee.a)({},t),{},{children:e}))}})})]}),Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Remise:",Object(x.jsx)("strong",{children:Object(x.jsx)(kc.a,{value:ua(E.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise}))),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Ee.a)(Object(Ee.a)({},t),{},{children:e}))}})})]}),Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total avec remise :",Object(x.jsx)("strong",{children:Object(x.jsx)(kc.a,{value:ba(E.map((function(e){return e.prixFournisseur*e.quantityParProduct})),c),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Ee.a)(Object(Ee.a)({},t),{},{children:e}))}})})]}),Object(x.jsx)("p",{children:"Arr\xeat\xe9 \xe0 la somme de "}),Object(x.jsx)("p",{className:"text-uppercase",children:Object(x.jsxs)("strong",{children:[Object(Tc.NumberToLetter)(ba(E.map((function(e){return e.prixFournisseur*e.quantityParProduct})),c))," ","ARIARY"]})})]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===E.length,onClick:function(){A(hn("approvis").createTransaction({id:Number(q.nextId),contenu:R(E),totalht:ua(E.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise}))),remise:c,total:ba(E.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise})),c),dateApprov:null==b?new Date:b,dateEcheance:d,remarque:p,typePaye:y,approvisionnements:E},"create-facture")),E.forEach((function(e){A(hn("products").update(Object(Ee.a)(Object(Ee.a)({},e),{},{quantityBrute:e.quantityBrute+e.quantityParProduct,quantityParProduct:0})))})),A(ca()),S.push(B),console.log(E)},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){0!==E.length&&A(ca())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})]})]}),E.length>0&&Object(x.jsx)(Ic.a.Footer,{className:"d-flex flex-column"})]})})};function Oa(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Oa(n):n;return t}var xa=function(e,t){return Oa(e).filter((function(e){return""==t||e.fournisseurId==t}))};function ha(e){return e.toString().replace(/\s/g,"").toLowerCase()}function va(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?va(n):n;return t}var pa=function(e,t,n){return va(e).filter((function(e){return(""==t||ha(e.name).includes(ha(t)))&&(""==n||e.fournisseurId==n)}))},fa=c(503),ga=c.n(fa),Na=function(){var e=Object(ie.d)((function(e){return e.approvisionnements})),t=Object(ie.d)(vn("products").value),n=Object(ie.d)(vn("products").meta),c=Object(ie.c)(),r=aa(e,c),i=r.isItemOnApprov,s=r.addToApprov,d=a.a.useState([]),l=Object(O.a)(d,2),o=l[0],u=l[1],j=a.a.useState(!1),b=Object(O.a)(j,2),m=b[0],h=b[1];a.a.useEffect((function(){return 1==m&&(c(hn("products").fetch()),h(!1)),function(){h(!1)}}),[m]),a.a.useEffect((function(){c(hn("products").fetch())}),[]),a.a.useEffect((function(){n.isFetching||u(t)}),[n]);var v=a.a.useCallback((function(e){s&&s(e)}),[s]),p=a.a.useMemo((function(){return o.map((function(e){return Object(x.jsx)(sa,{product:e,isItemOnApprov:i,handleAddToApprov:v},e.id)}))}),[o]),f=function(e){null!=e.target&&u(jr(t,e.target.value))};a.a.useMemo((function(){return ga()(f,300)}),[f]);return Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"text",onKeyDown:function(e){13==e.keyCode&&f(e)},placeholder:"Taper sur entrer pour valider votre recherche",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[p,0==o.length&&"Aucun produit trouv\xe9"]})," "]})]})},ya=a.a.memo(Na,se.reactFastCompare),Ca=(Object(zt.debounce)((function(e){console.log("request: ".concat(e))}),1e3),function(){return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Nouvelle facture",children:Object(x.jsx)(je,{title:"Nouvelle Facture"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(lr.a,{children:Object(x.jsxs)(Jc.a,{children:[Object(x.jsx)(Xc.a,{xs:5,children:Object(x.jsx)(Wc.a,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsx)(Ic.a.Body,{children:Object(x.jsx)(ya,{})})]})})}),Object(x.jsx)(Xc.a,{xs:7,children:Object(x.jsx)(ma,{setRegenerate:[]})})]})})})]})}),qa=a.a.memo(Ca),Aa=c(1053),Sa=c(1054);var Ea=function(){var e=Object(ie.d)(vn("categories").value),t=Object(ie.d)(vn("categories").meta),n=Object(ie.c)();a.a.useEffect((function(){n(hn("categories").fetch())}),[]);var c=[{Header:"Nom",accessor:"name"},{Header:"Actions",Cell:function(e){return Object(x.jsx)(Tr,{detail:!1,route:"categories",model:"categories",modelKey:"name",data:e})}}];return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Categories",children:Object(x.jsx)(je,{title:"Categories"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Uc,{data:e.sort((function(e,t){return t.id-e.id})),meta:t,columns:c,addUrl:W,urlName:"Ajouter une categorie"})})]})};var wa=function(){var e=Object(ie.d)(vn("fournisseurs").value),t=Object(ie.d)(vn("fournisseurs").meta),n=Object(ie.c)();a.a.useEffect((function(){n(hn("fournisseurs").fetch())}),[]);var c=[{Header:"Nom",accessor:"name"},{Header:"Actions",Cell:function(e){return Object(x.jsx)(Tr,{detail:!1,route:"fournisseurs",model:"fournisseurs",modelKey:"name",data:e})}}];return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Fournisseurs",children:Object(x.jsx)(je,{title:"Fournisseurs"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Uc,{data:e.sort((function(e,t){return t.id-e.id})),meta:t,columns:c,addUrl:K,urlName:"Ajouter un fournisseur"})})]})};var Pa=function(){var e=Object(ie.d)(vn("vaccinateurs").value),t=Object(ie.d)(vn("vaccinateurs").meta),n=Object(ie.c)();a.a.useEffect((function(){n(hn("vaccinateurs").fetch())}),[]);var c=[{Header:"Nom",accessor:"name"},{Header:"T\xe9l\xe9phone",accessor:"contact"},{Header:"Actions",Cell:function(e){return Object(x.jsx)(Tr,{detail:!1,route:"vaccinateurs",model:"vaccinateurs",modelKey:"name",data:e})}}];return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Vaccinateurs",children:Object(x.jsx)(je,{title:"Vaccinateurs"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Uc,{data:e.sort((function(e,t){return t.id-e.id})),meta:t,columns:c,addUrl:$,urlName:"Ajouter un vaccinateur"})})]})};var Va=function(){var e=Object(ie.d)(vn("emprunters").value),t=Object(ie.d)(vn("emprunters").meta),n=Object(ie.c)();a.a.useEffect((function(){n(hn("emprunters").fetch())}),[]);var c=[{Header:"Nom",accessor:"name"},{Header:"T\xe9l\xe9phone",accessor:"contact"},{Header:"Actions",Cell:function(e){return Object(x.jsx)(Tr,{detail:!1,route:"emprunters",model:"emprunters",modelKey:"name",data:e})}}];return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9mandeurs de cr\xe9dit",children:Object(x.jsx)(je,{title:"D\xe9mandeurs de cr\xe9dit"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Uc,{data:e.sort((function(e,t){return t.id-e.id})),meta:t,columns:c,addUrl:X,urlName:"Ajouter une personne"})})]})};var Ra=function(e){var t=Object(ie.c)(),n=Object(ie.d)(vn("categories").value),c=Object(ie.d)(vn("fournisseurs").value),a=Object(ie.d)(vn("vaccinateurs").value),i=Object(ie.d)(vn("emprunters").value),s=Object(ie.d)(vn("categories").meta),d=Object(ie.d)(vn("fournisseurs").meta),l=Object(ie.d)(vn("vaccinateurs").meta),o=Object(ie.d)(vn("emprunters").meta);return Object(r.useEffect)((function(){t(hn("fournisseurs").fetch()),t(hn("categories").fetch()),t(hn("vaccinateurs").fetch()),t(hn("emprunters").fetch())}),[]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Parametres g\xe9n\xe9rales",children:Object(x.jsx)(je,{title:"Parametres g\xe9n\xe9rales"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Aa.a.Container,{id:"left-tabs-example",defaultActiveKey:"first",children:Object(x.jsxs)(Jc.a,{children:[Object(x.jsxs)(Sa.a,{variant:"pills",className:"flex-row justify-content-center",children:[Object(x.jsx)(Sa.a.Item,{className:"border ml-2",children:Object(x.jsx)(Sa.a.Link,{eventKey:"first",className:"py-2 px-3 text-uppercase bg-white",children:"Categories de produits"})}),Object(x.jsx)(Sa.a.Item,{className:"border  ml-2",children:Object(x.jsx)(Sa.a.Link,{eventKey:"second",className:"py-2 px-3 text-uppercase  bg-white",children:"Fournisseurs"})}),Object(x.jsx)(Sa.a.Item,{className:"border  ml-2",children:Object(x.jsx)(Sa.a.Link,{eventKey:"three",className:"py-2 px-3 text-uppercase  bg-white",children:"Vaccinateurs"})}),Object(x.jsx)(Sa.a.Item,{className:"border  ml-2",children:Object(x.jsx)(Sa.a.Link,{eventKey:"four",className:"py-2 px-3 text-uppercase  bg-white",children:"Demandeur de credit"})})]}),Object(x.jsx)(Xc.a,{sm:12,children:Object(x.jsxs)(Aa.a.Content,{children:[Object(x.jsx)(Aa.a.Pane,{eventKey:"first",children:Object(x.jsx)(Ea,{categories:n,meta:s})}),Object(x.jsx)(Aa.a.Pane,{eventKey:"second",children:Object(x.jsx)(wa,{fournisseurs:c,meta:d})}),Object(x.jsx)(Aa.a.Pane,{eventKey:"three",children:Object(x.jsx)(Pa,{vaccinateurs:a,meta:l})}),Object(x.jsx)(Aa.a.Pane,{eventKey:"four",children:Object(x.jsx)(Va,{emprunters:i,meta:o})})]})})]})})})]})};var Fa=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),i=c[0],s=c[1],d=Object(r.useState)(t),o=Object(O.a)(d,2),u=o[0],j=o[1],b=Object(r.useState)([e,t]),m=Object(O.a)(b,2),h=m[0],v=m[1];Object(r.useEffect)((function(){null!==h?(h[0]&&s(h[0]),h[1]&&j(h[1])):(s(e),j(t))}),[h]);var p=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProductDepot})),t},f=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=1*e.quantityParProductDepot})),t},g=Object(ie.d)(vn("commandes").value),N=Object(ie.d)(vn("commandes").meta),y=Object(ie.c)();Object(r.useEffect)((function(){y(function(e,t){return dn("commandes",{path:"/sortie?deb=".concat(e,"&fin=").concat(t),replace:!0})}(i,u))}),[i,u]);var C=a.a.useMemo((function(){return[{Header:"Date de commande",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n;return Object(x.jsx)("div",{style:{width:"200px"},children:null===(t=e.row.original)||void 0===t||null===(n=t.contenu)||void 0===n?void 0:n.map((function(e){return Object(x.jsxs)("span",{children:[e.name,","]})}))})}},{Header:"Quantit\xe9",Cell:function(e){var t;return Object(x.jsx)("div",{children:f(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(p(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{to:"/depot/detail/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/editer/commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(Or,{model:"fromdepots",entity:e.row.original})]})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Historique de sortie",children:Object(x.jsx)(je,{title:"Historique de sortie"})}),Object(x.jsxs)(xe,{children:[" ",Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Historique de sortie"}),Object(x.jsx)("p",{children:"".concat(fe(i)," ->  ").concat(fe(u))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(ve.a,{locale:"fr-FR",onChange:v,value:h})})," "]}),Object(x.jsx)(Uc,{filter:!1,data:g.sort((function(e,t){return t.id-e.id})),meta:N,columns:C})]})]})},Da=a.a.createContext();function Ma(e){var t=e.model,n=e.options,c=e.children,r=Object(ie.d)(vn(t).value),i=Object(ie.d)(vn(t).meta),s=Object(ie.c)();a.a.useEffect((function(){s(hn(t).fetch(n))}),[n]);var d={data:r,meta:i};return Object(x.jsx)(Da.Provider,{value:d,children:c})}function Ba(e){var t=e.children;return Object(x.jsx)(Da.Consumer,{children:function(e){if(void 0===e)throw new Error("Data  must be used within a GetDataContext");return t(e)}})}var Ta="SET_FROM_DEPOT_ITEMS",ka="ADD_FROM_DEPOT",Ia="REMOVE_FROM_TO_DEPOT",_a="CLEAR_FROM_DEPOT",Qa="ADD_QTY_FROM_DEPOT_ITEM",La="ADD_QTY_PORTION_FROM_DEPOT_ITEM",Ha="ADD_QTY_NUMBER_FROM_DEPOT_ITEM",Ua="ADD_QTY_PORTION_DOSE_ITA_NEW_FROM_DEPOT_ITEM",Ya="ADD_QTY_PORTION_DOSE_SOVAX_FROM_DEPOT_ITEM",za="ADD_QTY_PORTION_PHYTO_COND_FROM_DEPOT_ITEM",Ka="MINUS_QTY_PORTION_PHYTO_COND_FROM_DEPOT_ITEM",Ga=function(){return{type:_a}},Wa=function(e){var t=e.product,n=(e.setRealQttCC,e.setRealQtt),c=(e.realQtt,e.realQttCC,Object(ie.c)()),r=function(e){c(function(e,t){return{type:Ha,payload:{id:e,value:t}}}(t.id,e))},a=function(){return t.quantityBrute-1-1*t.quantityParProductDepot<0};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,disabled:0!=(null===t||void 0===t?void 0:t.condmldepot)&&0!=(null===t||void 0===t?void 0:t.qttccpventedepot),step:1,bg:"whitesmoke",onChange:function(e){r(Number(e)),n(Number(e)),1==a()&&alert("Le reste du stock est : "+t.quantityBrute+" < "+e+" demand\xe9")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProductDepot,max:(a(),1*(null===t||void 0===t?void 0:t.quantityBrute)),children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Ja="SET_FROM_MAGASIN_ITEMS",Xa="ADD_FROM_MAGASIN",Za="REMOVE_FROM_TO_MAGASIN",$a="CLEAR_FROM_MAGASIN",ei="ADD_QTY_FROM_MAGASIN_ITEM",ti="ADD_QTY_PORTION_FROM_MAGASIN_ITEM",ni="ADD_QTY_NUMBER_FROM_MAGASIN_ITEM",ci="ADD_QTY_PORTION_DOSE_ITA_NEW_FROM_MAGASIN_ITEM",ri="ADD_QTY_PORTION_DOSE_SOVAX_FROM_MAGASIN_ITEM",ai="ADD_QTY_PORTION_PHYTO_COND_FROM_MAGASIN_ITEM",ii="MINUS_QTY_PORTION_PHYTO_COND_FROM_MAGASIN_ITEM",si="ADD_QTY_LITRE_NUMBER_FROM_MAGASIN_ITEM",di="ADD_TO_QTT_BRUTE",li=function(e,t){return{type:ci,payload:{id:e,value:t}}},oi=function(e,t){return{type:ri,payload:{id:e,value:t}}},ui=function(e,t){return{type:ai,payload:{id:e,value:t}}},ji=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{fromdepot:e,isItemFromDepot:n,addFromDepot:function(e){n(e.id)?t(function(e){return{type:Ia,payload:e}}(e.id)):t(function(e){return{type:ka,payload:e}}(e))}}},bi=function(e){var t=e.product,n=Object(r.useState)(null),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(null),d=Object(O.a)(s,2),l=d[0],o=d[1],u=Object(ie.d)((function(e){return e.fromdepots})),j=Object(ie.c)(),b=ji(u,j),m=b.isItemFromDepot,h=b.addFromDepot,v=!!m&&m(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:t.name}),Object(x.jsx)("span",{className:"text-lowercase",children:Object(x.jsxs)("strong",{children:[0!=t.quantityParProductDepot&&ge(oa(t)?t.prixlitre*t.quantityParProductDepot:t.prixVente*t.quantityParProductDepot),0==t.quantityParProductDepot&&0!=t.prixParCC&&Object(x.jsx)(x.Fragment,{children:null!=t.prixqttccventedepot&&0!=t.prixqttccventedepot?ge(t.prixqttccventedepot):ge(t.prixParCC)}),0!=t.quantityParProductDepot&&" x "+t.quantityParProductDepot+" "+t.type," ",null==t.prixqttccventedepot&&0==t.prixqttccventedepot&&Object(x.jsx)(x.Fragment,{children:0!=t.qttByCCDepot&&(0==t.quantityParProductDepot?" x ":"+")+t.qttByCCDepot+"ML"})]})})]}),Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:t.type}),Object(x.jsx)(Wa,{product:t,setRealQttCC:i,setRealQtt:o,realQtt:l,realQttCC:a})]}),Object(x.jsx)("div",{children:v&&Object(x.jsx)("button",{onClick:function(){h&&h(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},mi=function(e){return!!e.quantityBrute>0},Oi=function(e){return!!e.quantityBrute<0},xi=function(e){return!!(e.qttByCCDepot>e.quantityCC)},hi=function(e){return xi(e)?e.qttByCCDepot-e.quantityCC:e.quantityCC-e.qttByCCDepot},vi=function(e){return mi(e)?e.quantityBrute-=1:e.quantityBrute=0,e},pi=function(e,t){return e.quantityCC=t,e},fi=function(e){return function(e){mi(e)?(console.log("hello ici"),xi(e)?(vi(e),pi(e,e.doseDefault-hi(e))):function(e){return!(e.qttByCCDepot!=e.quantityCC)}(e)?pi(e,0):pi(e,e.quantityCC-e.qttByCCDepot)):e.quantityCC>0?pi(e,e.quantityCC-e.qttByCCDepot):pi(e,0)}(e),e},gi=function(e){return!function(e){return!!e.condvaldepot>=0}(e)?mi(e)?(vi(e),pi(e,e.condmldepot-hi(e)),0==e.condvaldepot&&(e.condvaldepot=e.condsizedepot-1)):e.quantityCC-=e.qttByCCDepot:xi(e)?(!function(e){e.condvaldepot>0?e.condvaldepot-=1:e.quantityBrute>0?(vi(e),e.condvaldepot=e.condsizedepot-1):e.condvaldepot=0}(e),pi(e,e.condmldepot-hi(e))):!function(e){return!!e.quantityCC>0}(e)?e.quantityCC=0:e.quantityCC-=e.qttByCCDepot,e},Ni=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(e.setRealQttCC,e.setRealQtt),i=(e.realQtt,e.realQttCC,Object(ie.c)(),function(e){!function(e,t,n){var a=Object(ce.a)(c);a[e]=Object(Ee.a)(Object(Ee.a)({},a[e]),{},Object(We.a)({},t,n)),r(a)}(n,"quantityParProductDepot",e)}),s=function(){return t.quantityCC-t.qttByCCDepot<0&&t.quantityBrute-1-1*t.quantityParProductDepot<0};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,disabled:0!=(null===t||void 0===t?void 0:t.condmldepot)&&0!=(null===t||void 0===t?void 0:t.qttccpventedepot),step:1,bg:"whitesmoke",onChange:function(e){i(Number(e)),a(Number(e)),s()&&alert("Le stock ne satisfait pas votre commande")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProductDepot,max:1==s()?1*(null===t||void 0===t?void 0:t.quantityBrute)-1:1*(null===t||void 0===t?void 0:t.quantityBrute),children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},yi=function(e){var t=e.state,n=e.index,c=e.setState,a=e.product,i=Object(r.useState)(null),s=Object(O.a)(i,2),d=s[0],l=s[1],o=Object(r.useState)(null),u=Object(O.a)(o,2),j=u[0],b=u[1];return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:a.name}),Object(x.jsx)("span",{className:"text-lowercase",children:Object(x.jsxs)("strong",{children:[0!=a.quantityParProductDepot&&ge(oa(a)?a.prixlitre:a.prixVente),0==a.quantityParProductDepot&&0!=a.prixParCC&&Object(x.jsx)(x.Fragment,{children:null!=a.prixqttccventedepot&&0!=a.prixqttccventedepot?ge(a.prixqttccventedepot):ge(a.prixParCC)}),0!=a.quantityParProductDepot&&" x "+a.quantityParProductDepot+" "+a.type," ",null==a.prixqttccventedepot&&0==a.prixqttccventedepot&&Object(x.jsx)(x.Fragment,{children:0!=a.qttByCCDepot&&(0==a.quantityParProductDepot?" x ":"+")+a.qttByCCDepot+"ML"})]})})]}),Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:a.type}),Object(x.jsx)(Ni,{index:n,state:t,setState:c,product:a,setRealQttCC:l,setRealQtt:b,realQtt:j,realQttCC:d})]})]})})},Ci=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},qi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"inc",a=0,i=0,s=0,d=0,l=0,o=0,u=!0,j=e.condml,b=e.condsize;if(console.log(t),"mcinc"==r){var m=Number(e.quantityCCCVA)+Number(t);Number(m)>=Number(j)?(a=Math.floor(m/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA+d>=Number(j)&&(a+=1)):e.quantityCCCVA+Number(t)>=Number(j)&&(a+=1);var O=Number(a)+Number(n);Number(O)>=Number(b)?(i=Math.floor(O/Number(b)),o=Number(O)-Number(b)*i,e.condval+o>=Number(b)&&(i+=1)):e.condval+Number(O)>=Number(b)&&(i+=1),e.quantityBruteCVA+i-c<0&&(u=!1)}else if("mdecinc"==r){Number(t)>=Number(j)?(a=Math.floor(Number(t)/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA-d<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var x=Number(a);Number(x)>=Number(b)?(s=Math.floor(Number(x)/Number(b)),l=Number(x)-Number(b)*s,e.condval-l<0&&(s+=1)):e.condval-Number(x)<0&&(s+=1);var h=Number(n);Number(h)>=Number(b)?(i=Math.floor(h/Number(b)),o=Number(h)-Number(b)*i,e.condval+o>=Number(b)?i+=1:e.condval=Number(e.condval)+o):e.condval+Number(h)>=Number(b)&&(i+=1);var v=e.quantityBruteCVA+c+i;v-s<0&&(u=!1)}else if("decinc"==r){Number(t)>=Number(j)?(a=Math.floor(Number(t)/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA-d<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var p=Number(a);Number(p)>=Number(b)?(s=Math.floor(Number(p)/Number(b)),l=Number(p)-Number(b)*s,e.condval-l<0&&(s+=1)):e.condval-Number(p)<0&&(s+=1);var f=Number(n);Number(f)>=Number(b)?(i=Math.floor(f/Number(b)),o=Number(f)-Number(b)*i,e.condval+o>=Number(b)&&(i+=1)):e.condval+Number(f)>=Number(b)&&(i+=1),e.quantityBruteCVA+i-(c+s)<0&&(u=!1)}else{var g=Number(e.quantityCCCVA)+Number(t);Number(g)>=Number(j)?(a=Math.floor(g/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA+d>=Number(j)&&(a+=1)):(e.quantityCCCVA+Number(t)>=Number(j)&&(a+=1),u=!0)}return u},Ai=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dec",a=0,i=0,s=0,d=0,l=!0,o=e.condml,u=e.condsize;if("pcdec"==r){Number(t)>=Number(o)?(a=Math.floor(Number(t)/Number(o)),s=Number(t)-Number(o)*a,e.quantityCCCVA-s<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var j=Number(a)+Number(n);Number(j)>=Number(u)?(i=Math.floor(Number(j)/Number(u)),d=Number(j)-Number(u)*i,e.condval-d<0&&(i+=1)):e.condval-Number(j)<0&&(i+=1),e.quantityBruteCVA+c-i<0&&(l=!1)}else if("mincdec"==r){var b=0,m=0,O=0,x=0,h=e.condml,v=e.condsize,p=Number(e.quantityCCCVA)+Number(t);Number(p)>=Number(h)?(b=Math.floor(p/Number(h)),O=Number(t)-Number(h)*b,e.quantityCCCVA+O>=Number(h)&&(b+=1)):e.quantityCCCVA+Number(t)>=Number(h)&&(b+=1);var f=Number(b);Number(f)>=Number(v)?(m=Math.floor(f/Number(v)),x=Number(f)-Number(v)*m,e.condval+x>=Number(v)&&(m+=1)):e.condval+Number(f)>=Number(v)&&(m+=1);var g=Number(n);Number(g)>=Number(v)?(i=Math.floor(Number(g)/Number(v)),d=Number(g)-Number(v)*b,e.condval-d<0&&(i+=1)):e.condval-Number(g)<0?i+=1:e.condval=e.condval-Number(g);var N=e.quantityBruteCVA+m+c;N-i&&(l=!1)}else if("incdec"==r){var y=0,C=0,q=0,A=0,S=e.condml,E=e.condsize,w=Number(e.quantityCCCVA)+Number(t);Number(w)>=Number(S)?(y=Math.floor(w/Number(S)),q=Number(t)-Number(S)*y,e.quantityCCCVA+q>=Number(S)&&(y+=1)):e.quantityCCCVA+Number(t)>=Number(S)&&(y+=1);var P=Number(y);Number(P)>=Number(E)?(C=Math.floor(P/Number(E)),A=Number(P)-Number(E)*C,e.condval+A>=Number(E)&&(C+=1)):e.condval+Number(P)>=Number(E)&&(C+=1);var V=Number(n);Number(V)>=Number(E)?(i=Math.floor(Number(V)/Number(E)),d=Number(V)-Number(E)*y,e.condval-d<0&&(i+=1)):e.condval-Number(V)<0&&(i+=1);var R=e.quantityBruteCVA+C,F=i+c;R-F<0&&(l=!1)}else{Number(t)>=Number(o)?(a=Math.floor(Number(t)/Number(o)),s=Number(t)-Number(o)*a,e.quantityCCCVA-s<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var D=Number(a)+Number(n);Number(D)>=Number(u)?(i=Math.floor(Number(D)/Number(u)),d=Number(D)-Number(u)*i,e.condval-d<0&&(i+=1)):e.condval-Number(D)<0&&(i+=1);var M=i+c;e.quantityBruteCVA-M<0&&(l=!1)}return l},Si=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dec",r=0,a=0,i=e.doseDefault,s=!0;if("incdec"!=c){Number(t)>=Number(i)?(r=Math.floor(Number(t)/Number(i)),a=Number(t)-Number(i)*r,e.quantityCCCVA-a<0&&(r+=1)):e.quantityCCCVA-Number(t)<0&&(r+=1);var d=r+n;e.quantityBruteCVA-d<0&&(s=!1)}else{var l=Number(e.quantityCCCVA)+Number(t);Number(l)>=Number(i)?(r=Math.floor(l/Number(i)),a=Number(t)-Number(i)*r,e.quantityCCCVA+a>=Number(i)&&(r+=1)):e.quantityCCCVA+Number(t)>=Number(i)&&(r+=1),e.quantityBruteCVA+r-n<0&&(s=!1)}return s},Ei=function(e,t,n){var c=t.contenu.find((function(t){return t.id==e.id}));console.log("minitial",t);var r=!1,a=0,i=0,s=0,d=!0,l="none",o=n.quantityParProduct,u=n.qttByCC,j=n.qttbylitre;if(Ci(e)){r=!0,r=!1;var b=n.quantityParProduct,m=n.qttByCC,O=n.qttbylitre;console.log(b,m);var x=void 0!=c?null===c||void 0===c?void 0:c.quantityParProduct:n.condval,h=void 0!=c?null===c||void 0===c?void 0:c.qttByCC:n.quantityCCCVA,v=void 0!=c?null===c||void 0===c?void 0:c.qttbylitre:n.quantityBruteCVA;console.log(x,h,v),O==v&&b==x&&m==h&&(l="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc"),O==v&&b==x&&m>h&&(l="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc > cmdqttcc",0==(d=Ai(e,i=m-h,a,s))&&(u=h)),O==v&&b==x&&m<h&&(l="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc < cmdqttcc",i=h-m,d=!0),O==v&&b>x&&m==h&&(l="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc == cmdqttcc",0==(d=Ai(e,i,a=b-x,s))&&(o=x)),O==v&&b<x&&m==h&&(l="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc == cmdqttcc",a=x-b,d=!0),O==v&&b>x&&m>h&&(l="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(d=Ai(e,i=m-h,a=b-x,s))&&(u=h,o=x)),O==v&&b<x&&m<h&&(l="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",a=x-b,i=h-m,d=!0),O==v&&b>x&&m<h&&(l="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(d=Ai(e,i=h-m,a=b-x,s,"incdec"))&&(u=h,o=x)),O==v&&b<x&&m>h&&(l="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(d=qi(e,i=m-h,a=x-b,s,"decinc"))&&(u=h,o=x)),O>v&&b==x&&m==h&&(l="qttlitre > cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc",0==(d=Ai(e,i,a,s=O-v))&&(j=v)),O<v&&b==x&&m==h&&(l="qttlitre < cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc",s=v-O,d=!0),O>v&&b>x&&m>h&&(l="qttlitre > cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(d=Ai(e,i=m-h,a=b-x,s=O-v))&&(u=h,o=x,j=v)),O>v&&b>x&&m<h&&(l="qttlitre > cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(d=Ai(e,i=h-m,a=b-x,s=O-v,"incdec"))&&(u=h,o=x,j=v)),O>v&&b<x&&m>h&&(l="qttlitre > cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(d=qi(e,i=m-h,a=x-b,s=O-v,"decinc"))&&(u=h,o=x,j=v)),O>v&&b<x&&m<h&&(l="qttlitre > cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",0==(d=qi(e,i=h-m,a=x-b,s=O-v,"mcinc"))&&(u=h,o=x,j=v)),O<v&&b>x&&m>h&&(l="qttlitre < cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(d=Ai(e,i=m-h,a=b-x,s=v-O,"pcdec"))&&(u=h,o=x,j=v)),O<v&&b>x&&m<h&&(l="qttlitre < cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(d=Ai(e,i=h-m,a=b-x,s=v-O,"mincdec"))&&(u=h,o=x,j=v)),O<v&&b<x&&m>h&&(l="qttlitre < cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(d=qi(e,i=m-h,a=x-b,s=v-O,"mdecinc"))&&(u=h,o=x,j=v)),O<v&&b<x&&m<h&&(l="qttlitre < cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",a=x-b,i=h-m,s=v-O,d=!0)}else{r=!1;var p=n.quantityParProduct,f=n.qttByCC;console.log(p,f);var g=void 0!=c?null===c||void 0===c?void 0:c.quantityParProduct:n.quantityBruteCVA,N=void 0!=c?null===c||void 0===c?void 0:c.qttByCC:n.quantityCCCVA;console.log(g,N),p>g&&f==N&&(l="qtt > cmdqtt && qttcc == cmdqttcc",a=p-g,console.log(e.quantityBruteCVA,a),e.quantityBruteCVA-a>=0?d=!0:(d=!1,o=g)),p<g&&f==N&&(l="qtt < cmdqtt && qttcc == cmdqttcc",a=g-p,d=!0),p==g&&f==N&&(l="qtt == cmdqtt && qttcc == cmdqttcc",d=!0),p==g&&f>N&&(l="qtt == cmdqtt && qttcc > cmdqttcc",d=Si(e,i=f-N),u=N),p==g&&f<N&&(l="qtt == cmdqtt && qttcc < cmdqttcc",i=N-f,d=!0),p>g&&f<N&&(l="qtt > cmdqtt && qttcc < cmdqttcc",d=Si(e,i=N-f,a=p-g,"incdec"),o=g,u=N),p<g&&f>N&&(l="qtt < cmdqtt && qttcc > cmdqttcc",a=g-p,i=f-N,d=!0),p<g&&f<N&&(a=g-p,i=N-f,l="qtt < cmdqtt && qttcc < cmdqttcc",d=!0),p>g&&f>N&&(l="qtt > cmdqtt && qttcc > cmdqttcc",d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=0,r=0,a=e.doseDefault,i=!0;Number(t)>=Number(a)?(c=Math.floor(Number(t)/Number(a)),r=Number(t)-Number(a)*c,e.quantityCCCVA-r<0&&(c+=1)):e.quantityCCCVA-Number(t)<0&&(c+=1);var s=c+Number(n);return e.quantityBruteCVA-s<0&&(i=!1),i}(e,i=f-N,a=p-g),o=g,u=N)}return console.log("--------"+l+"---------"),{normalQtt:o,normalQttCC:u,normalQttLitre:j,isSpecific:r,isValid:d}},wi=function(e){return Ci(e)?0==e.quantityBruteCVA&&0==e.quantityCCCVA&&0==e.condval:0==e.quantityBruteCVA&&0==e.quantityCCCVA},Pi=function(e){return e.filter((function(e){return Ci(t=e)?0==t.quantityParProduct&&0==t.qttByCC&&0==t.qttbylitre:0==t.quantityParProduct&&0==t.qttByCC;var t})).length>0},Vi=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function Ri(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Ri(n):n;return t}var Fi=function(e){var t,n,c=e.state,a=(e.meta,e.setState),i=(e.products,e.commandes),s=e.disabled,d=Object(r.useState)("vente-depot"),l=Object(O.a)(d,2),u=l[0],j=l[1],b=Object(r.useState)(1),m=Object(O.a)(b,2),h=(m[0],m[1],Object(r.useState)(null)),v=Object(O.a)(h,2),p=v[0],f=v[1],g=Object(r.useState)(null),N=Object(O.a)(g,2),y=N[0],C=N[1],q=Object(o.g)(),A=Object(r.useState)([]),S=Object(O.a)(A,2),E=S[0],w=S[1],P=Object(ie.d)((function(e){return{fromdepots:e.fromdepots}})),V=P.fromdepots;Object(r.useEffect)((function(){w(null===i||void 0===i?void 0:i.contenu)}),[i]);var R=Object(ie.c)(),D=Object(ie.d)(vn("emprunters").value),M=Object(ie.d)(vn("vaccinateurs").value),B=new Date,T=Object(r.useState)(B),k=Object(O.a)(T,2),I=k[0],_=k[1];Object(r.useEffect)((function(){R(hn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsxs)(Ic.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"}),Object(x.jsx)("div",{style:{width:"30%"},className:"text-right",children:Object(x.jsxs)("select",{disabled:s,className:"form-control input-sm",onChange:function(e){j(e.target.value)},children:[Object(x.jsx)("option",{value:"vente-depot",children:"Comptant"}),Object(x.jsx)("option",{value:"vente-depot-credit",children:"Credit"}),Object(x.jsx)("option",{value:"vente-depot-vaccinateur",children:"Vaccinateur"})]})})]}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsx)(Ic.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{disabled:s,type:"date",onChange:function(e){return _(e.target.value)},value:I,className:"form-control"})})]}),"vente-depot-credit"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{disabled:s,className:"form-control",onChange:function(e){C(e.target.value)},children:[Object(x.jsx)("option",{value:""}),D.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),"vente-depot-vaccinateur"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Vaccinateur:"}),Object(x.jsxs)("select",{className:"form-control",onChange:function(e){f(e.target.value)},children:[Object(x.jsx)("option",{children:"Selectionner un vaccinateur"}),M.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===c||void 0===c?void 0:c.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(x.jsx)(yi,{product:e,state:c,index:t,setState:a,basket:V,dispatch:R},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})}),(null===c||void 0===c?void 0:c.length)>0&&Object(x.jsxs)(Ic.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"30%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge(Vi(null===c||void 0===c?void 0:c.map((function(e){return Ci(e)?e.prixlitre*e.quantityParProductDepot:e.prixVente*e.quantityParProductDepot})))+Vi(null===c||void 0===c||null===(t=c.state)||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCCDepot}))))]})})}),Object(x.jsx)("div",{style:{width:"70%"},children:(null===c||void 0===c?void 0:c.length)>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",(n={disabled:s,className:"btn btn-green btn-sm mr-2"},Object(We.a)(n,"disabled",0===(null===c||void 0===c?void 0:c.length)),Object(We.a)(n,"onClick",(function(){var e=function(){var e=Ri(E).filter((function(e){return!c.find((function(t){return e.id===t.id}))})),t=Ri(E).filter((function(e){return!c.find((function(t){return e.id===t.id}))}));return{exist:Ri(E).map((function(e){return c.find((function(t){return t.id==e.id}))})).filter((function(e){return null!=e})),added:t,missing:e}}(),t=e.exist,n=e.added,r=e.missing;R(hn("commandes").updateTransaction({id:null===i||void 0===i?void 0:i.id,contenu:c,type:"vente-depot",sorte:"sortie",vaccinateurId:p,status:"direct"===u,emprunterId:y,dateCom:null!=I?I:B,exist:t,added:n,missing:r},"update-from-depot")),q.push(F)})),Object(We.a)(n,"type","button"),Object(We.a)(n,"children","Valider l'operation"),n)),Object(x.jsx)("button",{disabled:s,className:"btn btn-danger btn-sm",onClick:function(){null===c||void 0===c||c.forEach((function(e){e.quantityParProductDepot=0,e.qttByCCDepot=0})),R(Ga())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},Di=function(e){var t,n=e.state,c=e.setState,r=e.product,a=(Object(ie.d)((function(e){return e.fromdepots})),Object(ie.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id}))));return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Wc.a.Item,{className:"mb-2 mr-3",style:{border:"1px solid gray"},children:Object(x.jsx)("div",{className:" d-flex justify-content-between align-items-center",children:Object(x.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&a?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)("div",{children:[r.name," ",Object(x.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," ",Object(x.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(x.jsx)(x.Fragment,{children:a?Object(x.jsx)("button",{disabled:0===r.quantityBrute&&(0==r.quantityCC||null==r.quantityCC),className:"btn btn-danger btn-sm",onClick:function(){return function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(x.jsx)("button",{disabled:0===r.quantityBrute&&(0==r.quantityCC||null==r.quantityCC),className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(ce.a)(n)))},children:"Ajouter"})})})]})})})})},Mi=function(){var e=Object(o.i)().id,t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(ie.c)(),d=Object(ie.d)(vn("commandes").value),l=Object(ie.d)(vn("commandes").meta),u=Object(ie.d)(vn("products").value),j=Object(ie.d)(vn("products").meta),b=Object(r.useState)([]),m=Object(O.a)(b,2),h=m[0],v=m[1];a.a.useEffect((function(){s(hn("commandes").get(e))}),[e]);var p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],N=f[1],y=Object(r.useState)([]),C=Object(O.a)(y,2),q=C[0],A=C[1];a.a.useEffect((function(){return 1==c&&(s(hn("products").fetch()),i(!1)),function(){i(!1)}}),[c]),a.a.useEffect((function(){v(jr(u,g))}),[g]),a.a.useEffect((function(){s(hn("products").fetch())}),[]),a.a.useEffect((function(){var e;l.isFetching||A(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[l]),a.a.useEffect((function(){j.isFetching||v(u)}),[j]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer un bon de commande",children:Object(x.jsx)(je,{title:"Editer un bon de commande"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(lr.a,{children:Object(x.jsxs)(Jc.a,{children:[Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)(Wc.a,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){N(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[h.map((function(e){return Object(x.jsx)(Di,{state:q,setState:A,product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)(Fi,{disabled:j.isFetching,state:q,meta:l,setState:A,products:u,commandes:d[0]})})]})})})]})},Bi=function(){Object(r.useEffect)((function(){window.scrollTo(0,0)}),[])},Ti=["isAuth","role","component","path"],ki=function(e){var t=e.isAuth,n=e.role,c=e.component,r=e.path,a=Object(pe.a)(e,Ti);return Bi(),Object(x.jsx)(o.b,Object(Ee.a)(Object(Ee.a)({},a),{},{render:function(e){var a=(e.location.state||{from:{pathname:"/"}}).from;return!t||n!==Ur||r!==T&&r!==k?Object(x.jsx)("div",{children:Object(x.jsx)(ne,{title:"CBV AMBALAVAO",children:Object(x.jsx)(c,Object(Ee.a)({},e))})}):Object(x.jsx)(o.a,{to:a})}}))};ki.defaultProps={isAuth:!1,role:Ur,path:"/"};Object(ie.b)((function(e){var t,n=e.auth;return{isAuth:null===n||void 0===n?void 0:n.isLoggedIn,role:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)||""}}))(ki);var Ii=a.a.createContext();function _i(e){var t=e.children,n=Object(ie.d)((function(e){var t,n;return{user:null===(t=e.auth)||void 0===t?void 0:t.user,auth:e.auth,isLoggedIn:null===(n=e.auth)||void 0===n?void 0:n.isLoggedIn}})),c={user:n.user,auth:n.auth,isLoggedIn:n.isLoggedIn};return Object(x.jsx)(Ii.Provider,{value:c,children:t})}function Qi(e){var t=e.children;return Object(x.jsx)(Ii.Consumer,{children:function(e){if(void 0===e)throw new Error("Data  must be used within a AuthContext");return t(e)}})}var Li=function(){var e=Object(ie.c)();return Object(x.jsxs)("div",{children:[Object(x.jsx)(_i,{children:Object(x.jsx)(Qi,{children:function(t){var n=t.auth,c=t.isLoggedIn;return Object(x.jsxs)(x.Fragment,{children:[null!=(null===n||void 0===n?void 0:n.error)&&Object(x.jsx)("div",{children:null===n||void 0===n?void 0:n.error.message}),Object(x.jsx)("h3",{children:"Se connecter"}),Object(x.jsxs)("div",{children:[c&&Object(x.jsx)(o.a,{to:"/"}),Object(x.jsx)(Mc,{enableReinitialize:!0,initialValues:{username:"",password:""},validations:{},onSubmit:function(t,n){var c=t.username,r=t.password;e(function(e){var t=e.username,n=e.password;return function(){var e=Object(An.a)(qn.a.mark((function e(c){return qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yt.a.post(zr,{username:t,password:n}).then((function(e){e.data.token&&localStorage.setItem("user-veto",JSON.stringify(e.data)),c({type:wn,payload:{user:e.data,success:"success operation",error:null}})})).catch((function(e){var t,n;c({type:Pn,payload:{success:null,error:null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.error}})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({username:c,password:r})),console.log(t)},children:Object(x.jsxs)(Mc.Element,{children:[Object(x.jsx)(Mc.Field.Input,{border:"1px",name:"username",label:"Nom d'utilisateur",placeholder:"ex:Nom d'utilisateur",mb:3}),Object(x.jsx)(Mc.Field.Input,{name:"password",label:"Mot de passe",placeholder:"Mot de passe",type:"password"}),Object(x.jsx)("button",{type:"submit",mt:4,children:"Se connecter"})]})})]})]})}})}),Object(x.jsx)("div",{mt:46,divShadow:"md"})]})},Hi=function(){var e=Object(ie.c)();return Object(x.jsx)("div",{children:Object(x.jsx)(_i,{children:Object(x.jsx)(Qi,{children:function(t){var n=t.user,c=t.isLoggedIn;return Object(x.jsxs)(x.Fragment,{children:[c&&Object(x.jsx)(o.a,{to:{pathname:"/",state:{notification:{message:"Vous vous  etes connect\xe9 avec succes",type:"success"}}}}),null!=(null===n||void 0===n?void 0:n.error)&&Object(x.jsx)("div",{children:null===n||void 0===n?void 0:n.error.message}),Object(x.jsx)("h3",{children:"creer un compte"}),Object(x.jsxs)("div",{borderTop:"4px",boxShadow:"md",bg:"white",px:8,py:3,w:400,children:[c&&Object(x.jsx)(o.a,{to:"/"}),Object(x.jsx)(Mc,{enableReinitialize:!0,initialValues:{username:"",password:"",role:"ROLE_VENDEUR"},validations:{},onSubmit:function(t,n){var c=t.username,r=t.password,a=t.role;e(function(e){var t=e.username,n=e.password,c=e.role;return function(){var e=Object(An.a)(qn.a.mark((function e(r){return qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yt.a.post(Yr,{username:t,password:n,role:c}).then((function(e){e.data.token&&localStorage.setItem("user-veto",JSON.stringify(e.data)),r({type:Sn,payload:{user:e.data,success:"success operation",error:null}})})).catch((function(e){r({type:En,payload:{user:null,success:null,error:e}})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r({type:En,payload:{user:null,success:null,error:e.t0}});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}({username:c,password:r,role:a}))},children:Object(x.jsxs)(Mc.Element,{children:[Object(x.jsx)(Mc.Field.Input,{border:"1px",name:"username",label:"Nom d'utilisateur",placeholder:"ex: Nom d'utilisateur",mb:3}),Object(x.jsx)(Mc.Field.Input,{name:"password",label:"Mot de passe",placeholder:"Mot de passe",type:"password"}),Object(x.jsx)(Mc.Field.Select,{label:"Role",name:"role",valueKey:"name",options:[{id:"ROLE_VENDEUR",name:"VENDEUR"},{id:"ROLE_ADMIN",name:"ADMIN"},{id:"ROLE_SEMI_ADMIN",name:"ROLE_SEMI_ADMIN"}]}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{color:"white",type:"submit",mt:4,children:"Se connecter"})})]})})]})]})}})})})},Ui=["isAuth","role","component"],Yi=function(e){e.isAuth,e.role;var t=e.component,n=Object(pe.a)(e,Ui);return Bi(),Object(x.jsx)(o.b,Object(Ee.a)(Object(Ee.a)({},n),{},{component:function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{className:"",children:Object(x.jsx)("div",{children:Object(x.jsx)(t,Object(Ee.a)({},e))})})})}}))};Yi.defaultProps={isAuth:!1,role:Ur};var zi=Object(ie.b)((function(e){var t,n=e.auth;return{isAuth:null===n||void 0===n?void 0:n.isLoggedIn,role:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)||""}}))(Yi),Ki="SET_TO_MAGASIN_ITEMS",Gi="ADD_TO_MAGASIN",Wi="REMOVE_FROM_MAGASIN",Ji="CLEAR_MAGASIN",Xi="ADD_QTY_MAGASIN_ITEM",Zi="MINUS_QTY_MAGASIN_ITEM",$i="ADD_QTY_NUMBER_MAGASIN_ITEM",es=function(){return{type:Ji}},ts=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{tomagasin:e,isItemOnDepotToMagasin:n,addToMagasin:function(e){n(e.id)?t(function(e){return{type:Wi,payload:e}}(e.id)):t(function(e){return{type:Gi,payload:e}}(e))}}},ns=function(e){var t,n=e.product,c=Object(ie.d)((function(e){return e.tomagasins})),r=Object(ie.c)(),a=ts(c,r),i=a.isItemOnDepotToMagasin,s=a.addToMagasin,d=!!i&&i(n.id);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Wc.a.Item,{children:Object(x.jsxs)(Jc.a,{className:"product-card m-2 ".concat(n.id?"":"product-loading"),style:{border:n&&d?"1px solid #a6a5a5":"",paddingTop:n&&d?"5px":"0px",boxShadow:n&&d?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)(Xc.a,{xs:9,children:[Object(x.jsxs)("div",{children:[n.name," "]}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name})]}),Object(x.jsx)(Xc.a,{xs:3,children:n.id&&Object(x.jsx)("button",{disabled:n.quantityBrute<=0,className:" ".concat(d?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){s&&s(n)},children:d?"Retirer":"Ajouter"})})]})})})},cs=function(e){var t=e.product,n=Object(ie.c)(),c=function(e){n(function(e,t){return{type:$i,payload:{id:e,value:t}}}(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{w:28,bg:"whitesmoke",onChange:function(e){c(e)},min:0,defaultValue:t.quantityParProduct,step:1,max:t.quantityBrute,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},rs=function(e){var t=e.product,n=Object(ie.c)(),c=Object(ie.d)((function(e){return e.tomagasins})),r=ts(c,n),a=r.isItemOnDepotToMagasin,i=r.addToMagasin,s=!!a&&a(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{children:t.name}),Object(x.jsx)("span",{children:Object(x.jsxs)("strong",{children:[" ",ge(t.prixVente)]})})]}),Object(x.jsxs)("div",{className:"text-inline",children:[Object(x.jsxs)("small",{children:[t.type," "]}),Object(x.jsx)(cs,{product:t})]}),Object(x.jsx)("div",{children:s&&Object(x.jsx)("button",{onClick:function(){i&&i(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},as=function(){var e=Object(ie.d)((function(e){return{tomagasins:e.tomagasins}})).tomagasins,t=new Date,n=Object(r.useState)(t),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(o.g)(),d=Object(ie.d)(vn("commandes").meta),l=(Object(ie.d)(vn("sortiedepots").meta),Object(ie.c)());Object(r.useEffect)((function(){l(es()),l(hn("commandes").fetch()),l(hn("sortiedepots").fetch())}),[]);var u;t.getDate(),t.getMonth(),t.getFullYear(),t.getHours(),t.getMinutes(),t.getSeconds();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:"bg-dark text-white d-flex justify-content-between align-items-center",children:Object(x.jsxs)("div",{children:["Depot to Magasin ("," ".concat(e.length," ").concat(e.length>1?"articles":"article"),")"]})}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return i(e.target.value)},value:a,className:"form-control"})})]}),e.length<=0&&Object(x.jsx)("div",{class:"alert alert-success ",children:'Choississez un produit sur la section "Produits" puis cliquez sur "Ajouter"'}),null===e||void 0===e?void 0:e.map((function(t,n){return Object(x.jsx)(rs,{product:t,tomagasin:e,dispatch:l},"".concat(null===t||void 0===t?void 0:t.id,"_").concat(n))})),e.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===e.length,onClick:function(){l(hn("commandes").createTransaction({id:Number(d.nextId),contenu:e,type:"cva",sorte:"sortie",status:!0,dateCom:null!=a?a:t},"add-to-magasin")),l(es()),s.push(_)},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){0!==e.length&&l(es())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})]}),e.length>0&&Object(x.jsx)(Ic.a.Footer,{className:"d-flex justify-content-between",children:Object(x.jsx)("div",{children:Object(x.jsxs)("h3",{style:{fontSize:"14px"},children:[Object(x.jsx)("strong",{children:"Total : "}),ge((u=e.map((function(e){return e.prixVente*e.quantityParProduct})),u&&0!==(null===u||void 0===u?void 0:u.length)?u.reduce((function(e,t){return e+t}),0):0))]})})})]})})},is=function(){var e=Object(r.useState)([]),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),i=Object(O.a)(a,2),s=(i[0],i[1],Object(ie.d)(vn("products").value)),d=Object(ie.d)(vn("products").meta),l=Object(ie.c)(),o=Object(r.useState)(""),u=Object(O.a)(o,2),j=u[0],b=u[1];return Object(r.useEffect)((function(){l(hn("products").fetch())}),[]),Object(r.useEffect)((function(){d.isFetching||c(s)}),[d]),Object(r.useEffect)((function(){c(jr(s,j))}),[j]),Object(x.jsx)(lr.a,{children:Object(x.jsxs)(Jc.a,{children:[Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:"Produits"}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsxs)(Wc.a,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){b(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[n.map((function(e){return Object(x.jsx)(ns,{product:e})})),0===s.length&&"Aucune enregistrement trouv\xe9"]})]})," "]})," "]})}),Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)(as,{})})]})})},ss=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Depot vers magasin",children:Object(x.jsx)(je,{title:"Depot vers magasin"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(is,{})})]})})};var ds=function(e){var t=e.model,n=e.isDisabled,c=e.entity,r=Object(ie.c)(),a=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",disabled:n,onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer le produit ?")&&(r(hn(t).deleteTransaction(c,"/delete-to-magasin")),a.goBack())},children:"Supprimer"})})},ls=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0},os=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(t),d=Object(O.a)(s,2),o=d[0],u=d[1],j=Object(r.useState)([e,t]),b=Object(O.a)(j,2),m=b[0],h=b[1],v=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("commandes").value)),p=Object(ie.d)(vn("commandes").meta),f=Object(ie.c)();Object(r.useEffect)((function(){f(function(e,t){return dn("commandes",{path:"/cva?deb=".concat(e,"&fin=").concat(t),replace:!0})}(a,o))}),[a,o]),Object(r.useEffect)((function(){null!==m?(m[0]&&i(m[0]),m[1]&&u(m[1])):(i(e),u(t))}),[m]);var g=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProduct*1})),t},N=function(e){var t=0;return null===e||void 0===e||e.forEach((function(e){t+=1*e.quantityParProduct})),t},y=[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)("div",{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",fe(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:ls(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Qt\xe9",Cell:function(e){var t;return Object(x.jsx)("div",{children:N(null===(t=e.row.original)||void 0===t?void 0:t.contenu)})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(g(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n,c,r=1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{to:"/depot/to/magasin/detail/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-green btn-sm mr-2",disabled:r,children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/depot/to/magasin/edit/".concat(null===(c=e.row.original)||void 0===c?void 0:c.id),className:"btn btn-warning btn-sm mr-2",disabled:r,children:"Editer"}),Object(x.jsx)(ds,{model:"tomagasins",isDisabled:r,entity:e.row.original})]})}}];return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Historique sortie vers Magasin",children:Object(x.jsx)(je,{title:"Historique sortie vers Magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Historique de sortie vers Magasin"}),Object(x.jsx)("p",{children:"".concat(fe(a)," ->  ").concat(fe(o))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(mr.a,{locale:"fr-FR",onChange:h,value:m})})," "]}),Object(x.jsx)(Uc,{filter:!1,data:v.sort((function(e,t){return t.id-e.id})),meta:p,columns:y})]})," "]})};var us=function(e){var t=e.model,n=e.entity,c=Object(ie.c)();return Object(o.g)(),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce commande ?")&&c(hn(t).createTransaction({commande:n,original:n},"/delete-from-magasin"))},children:"Supprimer"})})},js="SET_SEARCH_BY_DATE",bs="RESET_SEARCH_BY_DATE",ms=function(e,t){return{type:js,payload:{deb:e,fin:t}}},Os=function(e,t){return{type:bs}},xs=new Date;function hs(){var e=Object(r.useState)({hours:xs.getHours(),minutes:xs.getMinutes(),seconds:xs.getSeconds()}),t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=setInterval((function(){var e=new Date;c({hours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),seconds:e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()})}),1e3);return function(){return clearInterval(e)}}),[]),Object(x.jsxs)("div",{className:"bg-dark py-1 px-4 text-center",children:[Object(x.jsxs)("h1",{style:{fontSize:"20px"},children:[n.hours," : ",n.minutes," : ",n.seconds]}),Object(x.jsx)("h4",{className:"bg-thead p-1",children:fe(xs)})]})}var vs=a.a.memo(hs,se.reactFastCompare);function ps(){var e=Object(o.h)();return console.log(e.pathname),Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"bg-dark text-white py-3 d-flex justify-content-center align-items-center",children:Object(x.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsxs)("div",{className:"py-2",children:[Object(x.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("div",{}),Object(x.jsx)("div",{children:Object(x.jsx)(vs,{})}),Object(x.jsx)("div",{className:"bg-thead"})]}),Object(x.jsxs)("div",{class:"d-flex justify-content-center mt-2 align-items-center",children:[Object(x.jsx)(l.b,{className:"btn bg-".concat("/vendeur"==e.pathname||"/Vendeur"==e.pathname?"thead":"dark"," text-white mb-2 mr-2 btn-sm"),to:"/Vendeur",children:"Vente"}),Object(x.jsx)(l.b,{className:"btn bg-".concat("/historique/vente/vendeur/vente-cva"==e.pathname?"thead":"dark"," text-white mb-2 mr-2 btn-sm"),to:"/historique/vente/vendeur/vente-cva",children:"Historique de vente"}),Object(x.jsx)(l.b,{className:"btn bg-".concat("/stock-cva"==e.pathname?"thead":"dark"," text-white mb-2 mr-2 btn-sm"),to:"/stock-cva",children:"Stocks"}),Object(x.jsx)(l.b,{className:"btn bg-".concat("/historique/vente/vendeur/credit-cva"==e.pathname?"thead":"dark"," text-white mb-2 mr-2 btn-sm"),to:"/historique/vente/vendeur/credit-cva",children:"Credits"})]})]})]})}var fs=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},gs=function(){var e=Object(ie.d)((function(e){return e.searchbydate})),t=Object(o.i)().type,n=Object(r.useState)([e.deb,e.fin]),c=Object(O.a)(n,2),i=c[0],s=c[1],d=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("commandes").value)),u=Object(ie.d)(vn("commandes").meta),j=Object(ie.c)();Object(r.useEffect)((function(){j(fn(e.deb,e.fin,t))}),[e.deb,e.fin]),Object(r.useEffect)((function(){null!==i&&i[0]&&j(ms(i[0],i[1]))}),[i]);var b=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},m=function(e){return b(null===e||void 0===e?void 0:e.map((function(e){return Ci(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+b(null===e||void 0===e?void 0:e.map((function(e){return e.prixParCC*e.qttByCC})))},h=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==e.row.original.isdeleted&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",fe(e.row.original.deletedat)]})]}),null==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsx)("p",{children:fs(null===(n=e.row.original)||void 0===n?void 0:n.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(c=e.row.original)||void 0===c||null===(r=c.contenu)||void 0===r?void 0:r.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(m(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n;return Object(x.jsx)(x.Fragment,{children:!e.row.original.isdeleted&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(l.b,{to:"/detailvendeur/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/vendeur-commande/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(us,{model:"fromagasins",entity:e.row.original})]})})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("div",{children:Object(x.jsxs)(lr.a,{children:[Object(x.jsx)(ps,{}),Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"vente-cva"==t?"Historique de vente":"CREDIT"}),Object(x.jsx)("p",{children:"".concat(fe(e.deb)," ->  ").concat(fe(e.fin))}),Object(x.jsx)("div",{className:"bg-thead p-3 my-2",style:{width:"30%"},children:Object(x.jsxs)("h2",{children:["Recette: ",ge(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return d.length>0?e.map((function(e){t+=m(null===e||void 0===e?void 0:e.contenu)})):t=0,t}(d))]})})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(mr.a,{locale:"fr-FR",onChange:s,value:i})})," "]}),Object(x.jsx)(Uc,{data:d.sort((function(e,t){return t.id-e.id})),meta:u,columns:h,filter:!1})]})})})},Ns=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},ys=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"inc",a=0,i=0,s=0,d=0,l=0,o=0,u=!0,j=e.condml,b=e.condsize;if(console.log(t),"mcinc"==r){var m=Number(e.quantityCCCVA)+Number(t);Number(m)>=Number(j)?(a=Math.floor(m/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA+d>=Number(j)&&(a+=1)):e.quantityCCCVA+Number(t)>=Number(j)&&(a+=1);var O=Number(a)+Number(n);Number(O)>=Number(b)?(i=Math.floor(O/Number(b)),o=Number(O)-Number(b)*i,e.condval+o>=Number(b)&&(i+=1)):e.condval+Number(O)>=Number(b)&&(i+=1),e.quantityBruteCVA+i-c<0&&(u=!1)}else if("mdecinc"==r){Number(t)>=Number(j)?(a=Math.floor(Number(t)/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA-d<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var x=Number(a);Number(x)>=Number(b)?(s=Math.floor(Number(x)/Number(b)),l=Number(x)-Number(b)*s,e.condval-l<0&&(s+=1)):e.condval-Number(x)<0&&(s+=1);var h=Number(n);Number(h)>=Number(b)?(i=Math.floor(h/Number(b)),o=Number(h)-Number(b)*i,e.condval+o>=Number(b)?i+=1:e.condval=Number(e.condval)+o):e.condval+Number(h)>=Number(b)&&(i+=1);var v=e.quantityBruteCVA+c+i;v-s<0&&(u=!1)}else if("decinc"==r){Number(t)>=Number(j)?(a=Math.floor(Number(t)/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA-d<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var p=Number(a);Number(p)>=Number(b)?(s=Math.floor(Number(p)/Number(b)),l=Number(p)-Number(b)*s,e.condval-l<0&&(s+=1)):e.condval-Number(p)<0&&(s+=1);var f=Number(n);Number(f)>=Number(b)?(i=Math.floor(f/Number(b)),o=Number(f)-Number(b)*i,e.condval+o>=Number(b)&&(i+=1)):e.condval+Number(f)>=Number(b)&&(i+=1),e.quantityBruteCVA+i-(c+s)<0&&(u=!1)}else{var g=Number(e.quantityCCCVA)+Number(t);Number(g)>=Number(j)?(a=Math.floor(g/Number(j)),d=Number(t)-Number(j)*a,e.quantityCCCVA+d>=Number(j)&&(a+=1)):(e.quantityCCCVA+Number(t)>=Number(j)&&(a+=1),u=!0)}return u},Cs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dec",a=0,i=0,s=0,d=0,l=!0,o=e.condml,u=e.condsize;if("pcdec"==r){Number(t)>=Number(o)?(a=Math.floor(Number(t)/Number(o)),s=Number(t)-Number(o)*a,e.quantityCCCVA-s<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var j=Number(a)+Number(n);Number(j)>=Number(u)?(i=Math.floor(Number(j)/Number(u)),d=Number(j)-Number(u)*i,e.condval-d<0&&(i+=1)):e.condval-Number(j)<0&&(i+=1),e.quantityBruteCVA+c-i<0&&(l=!1)}else if("mincdec"==r){var b=0,m=0,O=0,x=0,h=e.condml,v=e.condsize,p=Number(e.quantityCCCVA)+Number(t);Number(p)>=Number(h)?(b=Math.floor(p/Number(h)),O=Number(t)-Number(h)*b,e.quantityCCCVA+O>=Number(h)&&(b+=1)):e.quantityCCCVA+Number(t)>=Number(h)&&(b+=1);var f=Number(b);Number(f)>=Number(v)?(m=Math.floor(f/Number(v)),x=Number(f)-Number(v)*m,e.condval+x>=Number(v)&&(m+=1)):e.condval+Number(f)>=Number(v)&&(m+=1);var g=Number(n);Number(g)>=Number(v)?(i=Math.floor(Number(g)/Number(v)),d=Number(g)-Number(v)*b,e.condval-d<0&&(i+=1)):e.condval-Number(g)<0?i+=1:e.condval=e.condval-Number(g);var N=e.quantityBruteCVA+m+c;N-i&&(l=!1)}else if("incdec"==r){var y=0,C=0,q=0,A=0,S=e.condml,E=e.condsize,w=Number(e.quantityCCCVA)+Number(t);Number(w)>=Number(S)?(y=Math.floor(w/Number(S)),q=Number(t)-Number(S)*y,e.quantityCCCVA+q>=Number(S)&&(y+=1)):e.quantityCCCVA+Number(t)>=Number(S)&&(y+=1);var P=Number(y);Number(P)>=Number(E)?(C=Math.floor(P/Number(E)),A=Number(P)-Number(E)*C,e.condval+A>=Number(E)&&(C+=1)):e.condval+Number(P)>=Number(E)&&(C+=1);var V=Number(n);Number(V)>=Number(E)?(i=Math.floor(Number(V)/Number(E)),d=Number(V)-Number(E)*y,e.condval-d<0&&(i+=1)):e.condval-Number(V)<0&&(i+=1);var R=e.quantityBruteCVA+C,F=i+c;R-F<0&&(l=!1)}else{Number(t)>=Number(o)?(a=Math.floor(Number(t)/Number(o)),s=Number(t)-Number(o)*a,e.quantityCCCVA-s<0&&(a+=1)):e.quantityCCCVA-Number(t)<0&&(a+=1);var D=Number(a)+Number(n);Number(D)>=Number(u)?(i=Math.floor(Number(D)/Number(u)),d=Number(D)-Number(u)*i,e.condval-d<0&&(i+=1)):e.condval-Number(D)<0&&(i+=1);var M=i+c;e.quantityBruteCVA-M<0&&(l=!1)}return l},qs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dec",r=0,a=0,i=e.doseDefault,s=!0;if("incdec"!=c){Number(t)>=Number(i)?(r=Math.floor(Number(t)/Number(i)),a=Number(t)-Number(i)*r,e.quantityCCCVA-a<0&&(r+=1)):e.quantityCCCVA-Number(t)<0&&(r+=1);var d=r+n;e.quantityBruteCVA-d<0&&(s=!1)}else{var l=Number(e.quantityCCCVA)+Number(t);Number(l)>=Number(i)?(r=Math.floor(l/Number(i)),a=Number(t)-Number(i)*r,e.quantityCCCVA+a>=Number(i)&&(r+=1)):e.quantityCCCVA+Number(t)>=Number(i)&&(r+=1),e.quantityBruteCVA+r-n<0&&(s=!1)}return s},As=function(e,t,n){var c=t.contenu.find((function(t){return t.id==e.id}));console.log("minitial",t);var r=!1,a=0,i=0,s=0,d=!0,l="none",o=n.quantityParProduct,u=n.qttByCC,j=n.qttbylitre;if(Ns(e)){r=!0,r=!1;var b=n.quantityParProduct,m=n.qttByCC,O=n.qttbylitre;console.log(b,m);var x=void 0!=c?null===c||void 0===c?void 0:c.quantityParProduct:n.condval,h=void 0!=c?null===c||void 0===c?void 0:c.qttByCC:n.quantityCCCVA,v=void 0!=c?null===c||void 0===c?void 0:c.qttbylitre:n.quantityBruteCVA;console.log(x,h,v),O==v&&b==x&&m==h&&(l="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc"),O==v&&b==x&&m>h&&(l="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc > cmdqttcc",0==(d=Cs(e,i=m-h,a,s))&&(u=h)),O==v&&b==x&&m<h&&(l="qttlitre == cmdqttlitre && qtt == cmdqtt && qttcc < cmdqttcc",i=h-m,d=!0),O==v&&b>x&&m==h&&(l="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc == cmdqttcc",0==(d=Cs(e,i,a=b-x,s))&&(o=x)),O==v&&b<x&&m==h&&(l="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc == cmdqttcc",a=x-b,d=!0),O==v&&b>x&&m>h&&(l="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(d=Cs(e,i=m-h,a=b-x,s))&&(u=h,o=x)),O==v&&b<x&&m<h&&(l="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",a=x-b,i=h-m,d=!0),O==v&&b>x&&m<h&&(l="qttlitre == cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(d=Cs(e,i=h-m,a=b-x,s,"incdec"))&&(u=h,o=x)),O==v&&b<x&&m>h&&(l="qttlitre == cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(d=ys(e,i=m-h,a=x-b,s,"decinc"))&&(u=h,o=x)),O>v&&b==x&&m==h&&(l="qttlitre > cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc",0==(d=Cs(e,i,a,s=O-v))&&(j=v)),O<v&&b==x&&m==h&&(l="qttlitre < cmdqttlitre && qtt == cmdqtt && qttcc == cmdqttcc",s=v-O,d=!0),O>v&&b>x&&m>h&&(l="qttlitre > cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(d=Cs(e,i=m-h,a=b-x,s=O-v))&&(u=h,o=x,j=v)),O>v&&b>x&&m<h&&(l="qttlitre > cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(d=Cs(e,i=h-m,a=b-x,s=O-v,"incdec"))&&(u=h,o=x,j=v)),O>v&&b<x&&m>h&&(l="qttlitre > cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(d=ys(e,i=m-h,a=x-b,s=O-v,"decinc"))&&(u=h,o=x,j=v)),O>v&&b<x&&m<h&&(l="qttlitre > cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",0==(d=ys(e,i=h-m,a=x-b,s=O-v,"mcinc"))&&(u=h,o=x,j=v)),O<v&&b>x&&m>h&&(l="qttlitre < cmdqttlitre && qtt > cmdqtt && qttcc > cmdqttcc",0==(d=Cs(e,i=m-h,a=b-x,s=v-O,"pcdec"))&&(u=h,o=x,j=v)),O<v&&b>x&&m<h&&(l="qttlitre < cmdqttlitre && qtt > cmdqtt && qttcc < cmdqttcc",0==(d=Cs(e,i=h-m,a=b-x,s=v-O,"mincdec"))&&(u=h,o=x,j=v)),O<v&&b<x&&m>h&&(l="qttlitre < cmdqttlitre && qtt < cmdqtt && qttcc > cmdqttcc",0==(d=ys(e,i=m-h,a=x-b,s=v-O,"mdecinc"))&&(u=h,o=x,j=v)),O<v&&b<x&&m<h&&(l="qttlitre < cmdqttlitre && qtt < cmdqtt && qttcc < cmdqttcc",a=x-b,i=h-m,s=v-O,d=!0)}else{r=!1;var p=n.quantityParProduct,f=n.qttByCC;console.log(p,f);var g=void 0!=c?null===c||void 0===c?void 0:c.quantityParProduct:n.quantityBruteCVA,N=void 0!=c?null===c||void 0===c?void 0:c.qttByCC:n.quantityCCCVA;console.log(g,N),p>g&&f==N&&(l="qtt > cmdqtt && qttcc == cmdqttcc",a=p-g,console.log(e.quantityBruteCVA,a),e.quantityBruteCVA-a>=0?d=!0:(d=!1,o=g)),p<g&&f==N&&(l="qtt < cmdqtt && qttcc == cmdqttcc",a=g-p,d=!0),p==g&&f==N&&(l="qtt == cmdqtt && qttcc == cmdqttcc",d=!0),p==g&&f>N&&(l="qtt == cmdqtt && qttcc > cmdqttcc",d=qs(e,i=f-N),u=N),p==g&&f<N&&(l="qtt == cmdqtt && qttcc < cmdqttcc",i=N-f,d=!0),p>g&&f<N&&(l="qtt > cmdqtt && qttcc < cmdqttcc",d=qs(e,i=N-f,a=p-g,"incdec"),o=g,u=N),p<g&&f>N&&(l="qtt < cmdqtt && qttcc > cmdqttcc",a=g-p,i=f-N,d=!0),p<g&&f<N&&(a=g-p,i=N-f,l="qtt < cmdqtt && qttcc < cmdqttcc",d=!0),p>g&&f>N&&(l="qtt > cmdqtt && qttcc > cmdqttcc",d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=0,r=0,a=e.doseDefault,i=!0;Number(t)>=Number(a)?(c=Math.floor(Number(t)/Number(a)),r=Number(t)-Number(a)*c,e.quantityCCCVA-r<0&&(c+=1)):e.quantityCCCVA-Number(t)<0&&(c+=1);var s=c+Number(n);return e.quantityBruteCVA-s<0&&(i=!1),i}(e,i=f-N,a=p-g),o=g,u=N)}return console.log("--------"+l+"---------"),{normalQtt:o,normalQttCC:u,normalQttLitre:j,isSpecific:r,isValid:d}},Ss=function(e){return Ns(e)?0==e.quantityBruteCVA&&0==e.quantityCCCVA&&0==e.condval:0==e.quantityBruteCVA&&0==e.quantityCCCVA},Es=function(e){return e.filter((function(e){return Ns(t=e)?0==t.quantityParProduct&&0==t.qttByCC&&0==t.qttbylitre:0==t.quantityParProduct&&0==t.qttByCC;var t})).length>0};var ws=function(e){var t=e.model,n=e.entity,c=Object(ie.c)();return Object(o.g)(),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(e){e.preventDefault(),window.confirm("Vous voulez vraiment supprimer ce commande ?")&&c(hn(t).createTransaction({commande:n,original:n},"/delete-from-magasin"))},children:"Supprimer"})})},Ps=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},Vs=function(){var e=Object(ie.d)((function(e){return e.searchbydate})),t=Object(o.i)().type,n=Object(r.useState)([e.deb,e.fin]),c=Object(O.a)(n,2),i=c[0],s=c[1],d=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("commandes").value)),u=Object(ie.d)(vn("commandes").meta),j=Object(ie.c)();Object(r.useEffect)((function(){j(fn(e.deb,e.fin,t))}),[e.deb,e.fin]),Object(r.useEffect)((function(){null!==i&&i[0]&&j(ms(i[0],i[1]))}),[i]);var b=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},m=function(e){return b(null===e||void 0===e?void 0:e.map((function(e){return Ns(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre:e.prixVente*e.quantityParProduct})))+b(null===e||void 0===e?void 0:e.map((function(e){return e.prixParCC*e.qttByCC})))},h=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",fe(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:Ps(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(m(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t,n,c;return Object(x.jsx)(x.Fragment,{children:!(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)(l.b,{to:"/detailvendeuradmin/".concat(null===(n=e.row.original)||void 0===n?void 0:n.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"}),Object(x.jsx)(l.b,{to:"/vendeur-admin-commande/".concat(null===(c=e.row.original)||void 0===c?void 0:c.id),className:"btn btn-warning btn-sm mr-2",children:"Editer"}),Object(x.jsx)(ws,{model:"fromagasins",entity:e.row.original})]})})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Historique de vente du magasin",children:Object(x.jsx)(je,{title:"Historique de vente du magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"vente-cva"==t?"Historique de vente":"CREDIT"}),Object(x.jsx)("p",{children:"".concat(fe(e.deb)," ->  ").concat(fe(e.fin))}),Object(x.jsx)("div",{className:"bg-thead p-3 my-2",style:{width:"30%"},children:Object(x.jsxs)("h2",{children:["Recette: ",ge(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return d.length>0?e.map((function(e){t+=m(null===e||void 0===e?void 0:e.contenu)})):t=0,t}(d))]})})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(mr.a,{locale:"fr-FR",onChange:s,value:i})})," "]}),Object(x.jsx)(Uc,{data:d.sort((function(e,t){return t.id-e.id})),meta:u,columns:h,filter:!1})]})," "]})})},Rs=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)();Object(r.useEffect)((function(){n(hn("products").fetch())}),[]);var c=a.a.useMemo((function(){return[{Header:"Nom de l'article",accessor:"name"},{Header:"Fournisseur",Cell:function(e){var t,n;return Object(x.jsx)("div",{children:Object(x.jsx)("h3",{className:"badge badge-primary",children:null===(t=e.row.original)||void 0===t||null===(n=t.fournisseur)||void 0===n?void 0:n.name})})}},{Header:"Quantit\xe9",accessor:"quantityBruteCVA"},{Header:"Conditionnement (ML)",accessor:"condval"},{Header:"Reste en ML",accessor:"quantityCC",Cell:function(e){var t,n;return Object(x.jsx)("div",{children:null==(null===(t=e.row.original)||void 0===t?void 0:t.quantityCCCVA)?0:null===(n=e.row.original)||void 0===n?void 0:n.quantityCCCVA})}}]}));return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Etat de stock du Magasin",children:Object(x.jsx)(je,{title:"Etat de stock du Magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsx)("div",{children:Object(x.jsx)("h3",{className:"text-uppercase",children:"Etat de stock du Magasin"})})}),Object(x.jsx)("div",{className:"col-lg-6 text-right"})," "]}),Object(x.jsx)(Uc,{data:e,meta:t,columns:c})]})]})},Fs=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},Ds=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),i=c[0],s=c[1],d=Object(r.useState)(t),o=Object(O.a)(d,2),u=o[0],j=o[1],b=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("commandes").value)),m=Object(ie.d)(vn("commandes").meta),h=Object(r.useState)([e,t]),v=Object(O.a)(h,2),p=v[0],f=v[1],g=Object(ie.c)();Object(r.useEffect)((function(){g(fn(i,u))}),[i,u]),Object(r.useEffect)((function(){null!==p?(p[0]&&s(p[0]),p[1]&&j(p[1])):(s(e),j(t))}),[p]);var N=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},y=function(e){return N(null===e||void 0===e?void 0:e.map((function(e){return Ci(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre:e.prixVente*e.quantityParProduct})))+N(null===e||void 0===e?void 0:e.map((function(e){return e.prixParCC*e.qttByCC})))},C=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",fe(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:Fs(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(y(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}},{Header:"Actions",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(l.b,{className:"btn btn-sm  btn-green",to:"/magasin/detail/vente/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),children:"D\xe9tails"})})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Historique de vente du magasin",children:Object(x.jsx)(je,{title:"Historique de vente du magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row my-2",children:[Object(x.jsx)("div",{className:"col-lg-8",children:Object(x.jsxs)("div",{children:[i&&u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{children:"Historique de vente du magasin"}),Object(x.jsxs)("span",{children:["Du: ",fe(i)," Au ",fe(u)]})]})," "]})}),Object(x.jsx)("div",{className:"col-lg-4 text-right",children:Object(x.jsx)("div",{children:Object(x.jsx)(ve.a,{locale:"fr-FR",onChange:f,value:p})})})]}),Object(x.jsx)(Uc,{filter:!1,data:b,meta:m,columns:C})]})]})})},Ms=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};var Bs=Object(o.j)((function(e){var t,n,c,a,i,s,d,u,j,b,m=Object(o.g)(),O=Object(o.i)().id,h=Object(ie.d)(vn("commandes").value),v=Object(ie.c)();return Object(r.useEffect)((function(){v(hn("commandes").get(O))}),[O]),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"bg-dark text-white p-3 d-flex justify-content-center align-items-center",children:Object(x.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsxs)("div",{className:"py-5 container",children:[Object(x.jsx)("div",{class:"d-flex justify-content-start",children:Object(x.jsx)("button",{class:"btn btn-primary btn-sm ",onClick:function(){return m.goBack()},children:"Revenir en arriere"})}),Object(x.jsxs)("div",{children:["credit-cva"==(null===(t=h[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("div",{className:"bg-info my-3 py-2",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h3",{className:"p-2",children:["Nom:",null===(n=h[0])||void 0===n?void 0:n.emprunter.name]}),Object(x.jsxs)("h5",{className:"p-2",children:["Contact:",null===(c=h[0])||void 0===c?void 0:c.emprunter.contact]})]})}),h.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("div",{className:"my-2",children:[Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",fe(null===(a=h[0])||void 0===a?void 0:a.dateCom)]}),Object(x.jsx)(l.b,{to:"/vendeur-commande/".concat(null===(i=h[0])||void 0===i?void 0:i.id),className:"btn btn-warning btn-sm mr-2",children:"Editer le commande"})]}),Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(x.jsx)("strong",{children:"Recette:"}),":",Object(x.jsx)("h3",{className:"text-lg",children:ge(Ms(null===(s=h[0])||void 0===s||null===(d=s.contenu)||void 0===d?void 0:d.map((function(e){return oa(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Ms(null===(u=h[0])||void 0===u||null===(j=u.contenu)||void 0===j?void 0:j.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),h.length>0&&(null===(b=h[0])||void 0===b?void 0:b.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)(x.Fragment,{children:[oa(e)&&Object(x.jsx)(x.Fragment,{children:0!=e.qttbylitre&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0 px-2",children:[Object(x.jsx)("strong",{children:"Litre :"}),ge(e.prixlitre)," (","x"," ",e.qttbylitre,")"," "," = ",ge(e.prixlitre*e.qttbylitre)]})}),0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{className:"text-lowercase",children:[e.type,":"]}),ge(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",ge(e.prixVente*e.quantityParProduct)]})]}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ml:"})," ",ge(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" ml"," "," = "," ",ge(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:oa(e)?ge(e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre+e.prixParCC*e.qttByCC):ge(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})})),Ts=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};var ks=Object(o.j)((function(e){Object(o.g)();var t,n,c,a,i,s,d,u,j,b,m=Object(o.i)().id,O=Object(ie.d)(vn("commandes").value),h=Object(ie.c)();return Object(r.useEffect)((function(){h(hn("commandes").get(m))}),[m]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Detail de vente du magasin",children:Object(x.jsx)(je,{title:"Detail de vente du magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"py-5 container",children:[Object(x.jsxs)("div",{children:["credit-cva"==(null===(t=O[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("div",{className:"bg-info my-3 py-2",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("h3",{className:"p-2",children:["Nom:",null===(n=O[0])||void 0===n?void 0:n.emprunter.name]}),Object(x.jsxs)("h5",{className:"p-2",children:["Contact:",null===(c=O[0])||void 0===c?void 0:c.emprunter.contact]})]})}),O.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("div",{className:"my-2",children:[Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",fe(null===(a=O[0])||void 0===a?void 0:a.dateCom)]}),Object(x.jsx)(l.b,{to:"/vendeur-admin-commande/".concat(null===(i=O[0])||void 0===i?void 0:i.id),className:"btn btn-warning btn-sm mr-2",children:"Editer le commande"})]}),Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(x.jsx)("strong",{children:"Recette:"}),":",Object(x.jsx)("h3",{className:"text-lg",children:ge(Ts(null===(s=O[0])||void 0===s||null===(d=s.contenu)||void 0===d?void 0:d.map((function(e){return oa(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Ts(null===(u=O[0])||void 0===u||null===(j=u.contenu)||void 0===j?void 0:j.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),O.length>0&&(null===(b=O[0])||void 0===b?void 0:b.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)(x.Fragment,{children:[oa(e)&&Object(x.jsx)(x.Fragment,{children:0!=e.qttbylitre&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0 px-2",children:[Object(x.jsx)("strong",{children:"Litre :"}),ge(e.prixlitre)," (","x"," ",e.qttbylitre,")"," "," = ",ge(e.prixlitre*e.qttbylitre)]})}),0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{className:"text-lowercase",children:[e.type,":"]}),ge(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",ge(e.prixVente*e.quantityParProduct)]})]}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ml:"})," ",ge(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" ml"," "," = "," ",ge(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:oa(e)?ge(e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre+e.prixParCC*e.qttByCC):ge(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})]})})),Is=(c(513),c(1044));c(1059),c(1045),c(1060),c(1049),c(504),c(1004),c(505);c(158);c(1046);var _s=["isAuth","role","component"],Qs=function(e){e.isAuth,e.role;var t=e.component,n=Object(pe.a)(e,_s);return Bi(),Object(x.jsx)(o.b,Object(Ee.a)(Object(Ee.a)({},n),{},{component:function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(ne,{title:"CBV AMBALAVAO",children:Object(x.jsx)(t,Object(Ee.a)({},e))})})}}))};Qs.defaultProps={isAuth:!1,role:Ur};var Ls=Object(ie.b)((function(e){var t,n=e.auth;return{isAuth:null===n||void 0===n?void 0:n.isLoggedIn,role:(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)||""}}))(Qs),Hs=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(Object(ie.c)(),function(e){!function(e,t,n){var a=Object(ce.a)(c);a[e]=Object(Ee.a)(Object(Ee.a)({},a[e]),{},Object(We.a)({},t,n)),r(a)}(n,"quantityParProduct",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{w:28,bg:"whitesmoke",onChange:function(e){a(Number(e))},min:0,defaultValue:t.quantityParProduct,step:1,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Us=function(e){var t=e.product,n=Object(ie.c)();return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Remise : (en Ariary)"}),Object(x.jsxs)("td",{className:"d-flex",children:[" ",Object(x.jsxs)(Ac.c,{bg:"whitesmoke",onChange:function(e){!function(e){n(ra(t.id,e))}(Number(e))},min:0,defaultValue:t.remise,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})]})]})},Ys=function(e){var t=e.product,n=e.index,c=e.isItemOnApprov,r=(e.addToApprov,e.state),a=e.setState;Object(ie.c)(),!!c&&c(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-start border   mb-2 p-2",children:[Object(x.jsx)("div",{style:{width:"65%"},children:Object(x.jsxs)("table",{border:"1",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Nom de l'article : "}),Object(x.jsx)("td",{children:null===t||void 0===t?void 0:t.name})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Prix unitaire:"}),Object(x.jsx)("td",{children:ge(t.prixFournisseur)})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Montant HT:"}),Object(x.jsx)("td",{children:ge(t.prixFournisseur*t.quantityParProduct)})]}),Object(x.jsx)(Us,{product:t})]})}),Object(x.jsx)("div",{className:"d-flex mt-3",children:Object(x.jsx)(Hs,{product:t,index:n,state:r,setState:a})}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{onClick:function(){return function(e){a(r.filter((function(t){return t.id!==e})))}(null===t||void 0===t?void 0:t.id)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})};var zs=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},Ks=function(e,t){return zs(e)*t/100},Gs=function(e,t){return zs(e)-Ks(e,t)},Ws=function(e){var t=e.state,n=e.meta,c=e.setState,a=e.approv,i=e.disabled,s=Object(r.useState)(null===t||void 0===t?void 0:t.remise),d=Object(O.a)(s,2),l=d[0],u=d[1],j=Object(r.useState)(null===t||void 0===t?void 0:t.dateEcheance),b=Object(O.a)(j,2),m=b[0],h=b[1],v=Object(r.useState)(null===t||void 0===t?void 0:t.dateApprov),p=Object(O.a)(v,2),f=p[0],g=p[1],N=Object(r.useState)(null===a||void 0===a?void 0:a.contenu),y=Object(O.a)(N,2),C=y[0],q=(y[1],Object(r.useState)(null===t||void 0===t?void 0:t.remarque)),A=Object(O.a)(q,2),S=A[0],E=A[1],w=Object(r.useState)(""),P=Object(O.a)(w,2),V=(P[0],P[1],Object(r.useState)(null===t||void 0===t?void 0:t.typePaye)),R=Object(O.a)(V,2),F=R[0],D=R[1],M=Object(ie.c)(),T=Object(o.g)();function k(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?k(n):n;return t}return Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:Object(x.jsxs)("div",{children:["Approvisionenement ("," ".concat(null===t||void 0===t?void 0:t.length," ").concat((null===t||void 0===t?void 0:t.length)>1?"articles":"article"),")"]})}),Object(x.jsxs)(Ic.a.Body,{style:{height:"500px",maxHeight:"500px",overflowY:"auto",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de l'approvisionnement :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",disabled:i,onChange:function(e){return g(e.target.value)},value:f,className:"form-control"})})]}),!n.isFetching&&(null===t||void 0===t?void 0:t.length)<=0&&Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsx)("div",{class:"alert alert-success ",children:"Aucune enregistrement trouv\xe9 !!!"})]}),n.isFetching&&Object(x.jsx)("p",{children:"Chargement en cours ..."}),null===t||void 0===t?void 0:t.map((function(e,n){return Object(x.jsx)(Ys,{product:e,state:t,index:n,setState:c,dispatch:M},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(n))})),(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"d-flex justify-content-end align-items-center my-3 ",children:Object(x.jsxs)("table",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"REMISE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"number",className:"form-control",placeholder:"Remise",min:0,disabled:i,value:l,onChange:function(e){u(e.target.value)}})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"PAIEMENT LE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"date",disabled:i,onChange:function(e){return h(e.target.value)},value:m,className:"form-control"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"TYPE DE PAIEMENT:"}),Object(x.jsx)("td",{children:Object(x.jsxs)("select",{className:"form-control",onChange:function(e){D(e.target.value)},children:[Object(x.jsx)("option",{value:"espece",selected:!0,children:"ESPECE"}),Object(x.jsx)("option",{value:"boa",children:"CHEQUE - BOA"}),Object(x.jsx)("option",{value:"bni",children:"CHEQUE - BNI"}),Object(x.jsx)("option",{value:"MVola",children:"VIREMENT - MVola"}),Object(x.jsx)("option",{value:"OrangeMoney",children:"VIREMENT - ORANGE MONEY"})]})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"REMARQUE :"}),Object(x.jsx)("td",{children:Object(x.jsx)("textarea",{disabled:i,className:"form-control",onChange:function(e){E(e.target.value)},placeholder:"Ecriver ici quelque chose d'autre \xe0 savoir sur l'approvisionnement",children:S})})]})]})}),Object(x.jsxs)("div",{className:"d-flex flex-column  my-3 ",children:[" ",Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total HT:",Object(x.jsx)("strong",{children:Object(x.jsx)(kc.a,{value:zs(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct}))),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Ee.a)(Object(Ee.a)({},t),{},{children:e}))}})})]}),Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Remise:",Object(x.jsx)("strong",{children:Object(x.jsx)(kc.a,{value:Ks(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),l),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Ee.a)(Object(Ee.a)({},t),{},{children:e}))}})})]}),Object(x.jsxs)("p",{className:"approvisionnement-total-amount",children:["Total avec remise :",Object(x.jsx)("strong",{children:Object(x.jsx)(kc.a,{value:Gs(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),l),displayType:"text",thousandSeparator:!0,suffix:"Ar",renderText:function(e,t){return Object(x.jsx)("div",Object(Ee.a)(Object(Ee.a)({},t),{},{children:e}))}})})]}),Object(x.jsx)("p",{children:"Arr\xeat\xe9 \xe0 la somme de "}),Object(x.jsx)("p",{className:"text-uppercase",children:Object(x.jsxs)("strong",{children:[Object(Tc.NumberToLetter)(Gs(null===t||void 0===t?void 0:t.map((function(e){return e.prixFournisseur*e.quantityParProduct})),l))," ","ARIARY"]})})]})]})]}),Object(x.jsx)(Ic.a.Footer,{children:Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("button",{disabled:i,className:"btn btn-green btn-sm mr-2",onClick:function(){var e=function(){var e=k(C).filter((function(e){return!t.find((function(t){return e.id===t.id}))})),n=k(C).filter((function(e){return!t.find((function(t){return e.id===t.id}))}));return{exist:k(C).map((function(e){return t.find((function(t){return t.id==e.id}))})).filter((function(e){return null!=e})),added:n,missing:e}}(),n=e.exist,c=e.added,r=e.missing;M(hn("approvis").updateTransaction({id:null===a||void 0===a?void 0:a.id,contenu:t,totalht:zs(t.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise}))),remise:l,total:Gs(t.map((function(e){return e.prixFournisseur*e.quantityParProduct-e.remise})),l),dateApprov:f,dateEcheance:m,remarque:S,typePaye:F,exist:n,missing:r,added:c},"update-facture")),T.push(B)},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{disabled:i,className:"btn btn-danger btn-sm",onClick:function(){return c(null===a||void 0===a?void 0:a.contenu)},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})},Js=function(e){var t,n=e.product,c=e.state,r=e.setState,a=(Object(ie.d)((function(e){return e.approvisionnements})),Object(ie.c)(),!!(null===c||void 0===c?void 0:c.find((function(e){return(null===e||void 0===e?void 0:e.id)===n.id}))));return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Wc.a.Item,{children:Object(x.jsxs)(Jc.a,{className:"product-card m-2 ".concat(n.id?"":"product-loading"),style:{border:n&&a?"1px solid #a6a5a5":"",boxShadow:n&&a?"0 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)(Xc.a,{xs:9,children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:null===n||void 0===n?void 0:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("p",{children:Object(x.jsxs)("strong",{children:[" ",ge(null===n||void 0===n?void 0:n.prixFournisseur)]})})]})}),Object(x.jsx)(Xc.a,{xs:3,children:(null===n||void 0===n?void 0:n.id)&&Object(x.jsx)(x.Fragment,{children:a?Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return function(e){r(c.filter((function(t){return t.id!==e})))}(null===n||void 0===n?void 0:n.id)},children:"Retirer"}):Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){r(c.some((function(e){return e.id===n.id}))?c:[n].concat(Object(ce.a)(c)))},children:"Ajouter"})})})]})})})},Xs=function(){var e=Object(o.i)().id,t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(ie.c)(),d=Object(ie.d)(vn("approvis").value),l=Object(ie.d)(vn("approvis").meta),u=Object(ie.d)(vn("products").value),j=Object(ie.d)(vn("products").meta),b=Object(r.useState)([]),m=Object(O.a)(b,2),h=m[0],v=m[1];a.a.useEffect((function(){s(hn("approvis").get(e))}),[e]);var p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],N=f[1],y=Object(r.useState)([]),C=Object(O.a)(y,2),q=C[0],A=C[1];Object(r.useEffect)((function(){return 1==c&&(s(hn("products").fetch()),i(!1)),function(){i(!1)}}),[c]);var S=Object(r.useState)(),E=Object(O.a)(S,2),w=E[0],P=E[1];return Object(r.useEffect)((function(){v(null!=w?pa(u,g,w):jr(u,g))}),[g]),Object(r.useEffect)((function(){v(""!=g?pa(u,g,w):xa(u,w))}),[w]),Object(r.useEffect)((function(){s(hn("products").fetch())}),[]),a.a.useEffect((function(){var e;l.isFetching||A(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[l]),Object(r.useEffect)((function(){j.isFetching||v(u)}),[j]),console.log(e),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Edition de facture",children:Object(x.jsx)(je,{title:"Edition de facture"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(lr.a,{children:Object(x.jsxs)(Jc.a,{children:[Object(x.jsx)(Xc.a,{xs:5,children:Object(x.jsx)(Wc.a,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){N(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsx)(Ma,{model:"fournisseurs",children:Object(x.jsx)(Ba,{children:function(e){var t=e.data;e.meta;return Object(x.jsx)("div",{className:"my-2",children:Object(x.jsxs)("select",{className:"form-control",selected:2==w,onChange:function(e){P(e.target.value)},children:[Object(x.jsx)("option",{value:"",children:"Selectionner un fournisseur"}),t.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})})}})}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[h.map((function(e){return Object(x.jsx)(Js,{state:q,setState:A,product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Xc.a,{xs:7,children:Object(x.jsx)(Ws,{disabled:1==j.isFetching,state:q,meta:l,setState:A,products:u,approv:d[0]})})]})})})]})},Zs=function(e){var t,n=e.key,c=e.product,a=Object(ie.d)((function(e){return e.fromdepots})),i=Object(ie.c)(),s=ji(a,i),d=s.isItemFromDepot,l=s.addFromDepot,o=!!d&&d(c.id);Object(r.useEffect)((function(){o||(c.qttByCC=0,c.quantityParProduct=0)}),[o]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Wc.a.Item,{style:{width:"100%"},children:Object(x.jsxs)(Jc.a,{className:" ".concat(c.id?"":"product-loading"),style:{boxShadow:c&&o?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)(Xc.a,{xs:9,children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{children:null===c||void 0===c?void 0:c.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===c||void 0===c||null===(t=c.fournisseur)||void 0===t?void 0:t.name})]})}),Object(x.jsx)(Xc.a,{xs:3,children:(null===c||void 0===c?void 0:c.id)&&Object(x.jsx)("button",{disabled:0===c.quantityBrute,className:"mt-3 ".concat(o?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){l&&l(c)},children:o?"Retirer":"Ajouter"})})]})},n)})},$s=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},ed=function(e){e.setRegenerate;var t=Object(r.useState)("vente-depot"),n=Object(O.a)(t,2),c=n[0],a=n[1],i=Object(r.useState)(1),s=Object(O.a)(i,2),d=(s[0],s[1],Object(r.useState)(null)),l=Object(O.a)(d,2),u=l[0],j=l[1],b=Object(r.useState)(null),m=Object(O.a)(b,2),h=m[0],v=m[1],p=Object(o.g)(),f=Object(ie.d)((function(e){return{fromdepots:e.fromdepots}})).fromdepots,g=Object(ie.c)(),N=Object(ie.d)(vn("emprunters").value),y=Object(ie.d)(vn("vaccinateurs").value),C=(Object(ie.d)(vn("commandes").meta),Object(ie.d)(vn("commandes").value),new Date),q=Object(r.useState)(C),E=Object(O.a)(q,2),w=E[0],P=E[1];Object(r.useEffect)((function(){g(Ga()),g(hn("commandes").fetch()),g(hn("emprunters").fetch()),g(hn("vaccinateurs").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsxs)(Ic.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE "}),Object(x.jsx)("div",{style:{width:"30%"},className:"text-right",children:Object(x.jsxs)(Yn.a,{onChange:function(e){a(e.target.value)},children:[Object(x.jsx)("option",{value:"vente-depot",selected:!0,children:"Comptant"}),Object(x.jsx)("option",{value:"vente-depot-credit",children:"Credit"}),Object(x.jsx)("option",{value:"vente-depot-vaccinateur",children:"Vaccinateur"})]})})]}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsx)(Ic.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return P(e.target.value)},value:w,className:"form-control"})})]}),"vente-depot-credit"===c&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Nom du persone:"}),Object(x.jsxs)("select",{className:"form-control mb-2",onChange:function(e){v(e.target.value)},children:[Object(x.jsx)("option",{children:"Selectionner une personne"}),N.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),"vente-depot-vaccinateur"===c&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Nom du vaccinateur:"}),Object(x.jsxs)("select",{className:"form-control mb-2",onChange:function(e){j(e.target.value)},children:[Object(x.jsx)("option",{children:"Selectionner un vaccinateur"}),y.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===f||void 0===f?void 0:f.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success",children:'Choississez un produit sur la section "Produits" puis cliquez sur "Ajouter"'}),null===f||void 0===f?void 0:f.map((function(e,t){return Object(x.jsx)(bi,{product:e,basket:f,dispatch:g},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})}),(null===f||void 0===f?void 0:f.length)>0&&Object(x.jsxs)(Ic.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"30%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge($s(f.map((function(e){return Ci(e)?e.prixlitre*e.quantityParProductDepot:e.prixVente*e.quantityParProductDepot})))+$s(f.map((function(e){return e.prixParCC*e.qttByCCDepot}))))]})})}),Object(x.jsx)("div",{style:{width:"70%"},children:f.length>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===f.length,onClick:function(){if(null!=w&&""!=w){for(var e=0;e<f.length;++e)if(0==f[e].quantityParProductDepot)return void alert("Commande non conforme:"+f[e].name+" : 0");f.forEach((function(e){var t;delete e.busy,delete e.pendingCreate,mi(t=e)?t.quantityBrute-=t.quantityParProductDepot:Oi(t)&&(t.quantityBrute=0),0!=e.condmldepot&&0!=e.qttccpventedepot?function(e){gi(e)}(e):fi(e)})),g(hn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:f,type:c,sorte:"sortie",vaccinateurId:u,status:"vente-depot"===c,emprunterId:h,dateCom:null!=w||""!=w?w:C},"add-from-depot")),g(Ga()),"vente-depot-credit"===c?p.push(A):"vente-depot-vaccinateur"===c?p.push(S):p.push(F)}else alert("Vous avez oubli\xe9 de mettre la date de l'operation !!!")},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){f.forEach((function(e){e.quantityParProductDepot=0,e.qttByCCDepot=0})),g(Ga())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},td=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)(),c=Object(r.useState)(""),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(2),l=Object(O.a)(d,2),o=(l[0],l[1],Object(r.useState)(!1)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=(Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useState)([])),h=Object(O.a)(m,2),v=h[0],p=h[1],f=(Object(ie.d)(vn("commandes").value),Object(ie.d)(vn("commandes").meta),Object(r.useState)(new Date)),g=Object(O.a)(f,2),N=g[0],y=g[1],C=Object(r.useState)(new Date),q=Object(O.a)(C,2),A=q[0],S=q[1];Object(r.useEffect)((function(){n(fn(N,A))}),[N,A]),Object(r.useEffect)((function(){y(new Date),S(new Date),n(hn("products").fetch())}),[]),Object(r.useEffect)((function(){return 1==j&&(n(hn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(r.useEffect)((function(){t.isFetching||p(e)}),[t]),Object(r.useEffect)((function(){p(jr(e,i))}),[i]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(lr.a,{fluid:!0,children:Object(x.jsx)("div",{className:"py-2",children:Object(x.jsxs)(Jc.a,{children:[Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsxs)(Ic.a,{className:"mt-2",children:[Object(x.jsxs)(Ic.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"80%"},children:"Produits"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){s(""),b(!0)},children:"Mettre \xe0 jour"})})]}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})," "]}),Object(x.jsx)(Wc.a,{children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[v.map((function(e){return Object(x.jsx)(Zs,{product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)("div",{className:" py-2",children:Object(x.jsx)(ed,{setRegenerate:b})})})]})})})})},nd=function(){return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Bon de sortie du d\xe9pot",children:Object(x.jsx)(je,{title:"Bon de sortie du d\xe9pot"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{disabled:!0,className:"btn btn-green btn-xs ml-3 mb-2",children:"Ajouter"})," ",": ",Object(x.jsx)("span",{children:"Le produit n'a pas de stock disponible"}),Object(x.jsx)("button",{className:"btn btn-green btn-xs ml-3 mb-2",children:"Mettre \xe0 jour"})," ",": ",Object(x.jsx)("span",{children:"Mettre \xe0 jour la liste des produits"})]}),Object(x.jsx)("select",{disabled:!0,className:"  ml-3 bg-white py-2 input-xs",children:Object(x.jsx)("option",{children:"Comptant"})})," ",": ",Object(x.jsx)("span",{children:"Choix du mode sortie ( Comptant,credit,vaccinateur)"}),Object(x.jsx)(td,{})]})]})},cd=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=(void 0!=c[c.length-1]&&c[c.length-1],0);return r=c?c.map((function(e){return 1*e.quantityParProduct})).reduce((function(e,t){return e+t}),0):0,Object(x.jsx)("td",{className:"text-center p-1",children:0!=r?r:"-"})},rd=function(){return Object(x.jsx)("td",{className:"text-center p-1",children:Object(x.jsx)("div",{children:Object(x.jsx)("span",{className:"text-center  p-1",children:"-"})})})},ad=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=void 0!=c[c.length-1]?c[c.length-1]:{},a={bruteCva:r.hasOwnProperty("id")?r.quantityBrute:0,ccCva:r.hasOwnProperty("id")?r.quantityCC:0};return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("td",{className:"text-center",children:0!=c.length?a.bruteCva:0})})};function id(e){return e[e.length-1]}var sd=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)([]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),d=Object(O.a)(s,2),l=(d[0],d[1]),o=Object(r.useState)(e),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(t),h=Object(O.a)(m,2),v=h[0],p=h[1],f=Object(r.useState)([e,t]),g=Object(O.a)(f,2),N=g[0],y=g[1],C=Object(r.useState)([]),q=Object(O.a)(C,2),A=q[0],S=q[1],E=Object(r.useState)([]),w=Object(O.a)(E,2),P=(w[0],w[1],Object(ie.d)(vn("approvis").value)),V=Object(ie.d)(vn("approvis").meta),R=Object(ie.c)();Object(r.useEffect)((function(){null!==N?(N[0]&&b(N[0]),N[0]&&p(N[1])):(b(e),p(t))}),[N]),Object(r.useEffect)((function(){var e;j&&v&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(ae()(j),ae()(v))),l(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(ae()(j),ae()(v))),R((e=v,dn("approvis",{path:"/get-approv-by-date?deb=".concat(j,"&fin=").concat(e),replace:!0}))))}),[j,v]),Object(r.useEffect)((function(){V.isFetching||S(Ae(P,"dateApprov",j,v))}),[V]);var F,D,M=Se(A,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityBrute,d=t.quantityCC,l=t.quantityParProduct,o=e.find((function(e){return e.id===n}));return o?o.quantityParProduct=parseInt(o.quantityParProduct)+parseInt(l):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBrute:s,quantityCC:d,quantityParProduct:l}),e}),[]).sort((function(e,t){return e.id>t.id})),B=function(e,t){var n;return Object(ce.a)(new Set((n=[]).concat.apply(n,Object(ce.a)(e.map((function(e){return e[t]}))))))},T=(F="dateApprov",A.reduce((function(e,t){return D?(e[t[F][D]]=e[t[F][D]]||[]).push(t):(e[t[F]]=e[t[F]]||[]).push(t),e}),{}));return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Journal de facturation",children:Object(x.jsx)(je,{title:"Journal de facturation"})}),Object(x.jsxs)(xe,{children:[Object(x.jsx)(Nn,{}),Object(x.jsxs)("div",{className:"date-range",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(x.jsxs)("div",{children:[j&&v&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{class:"text-uppercase my-1",children:"Journal de facturation "}),Object(x.jsxs)("span",{children:["Du: ",fe(j)," Au ",fe(v)]})]})," "]}),Object(x.jsx)("div",{children:Object(x.jsx)(mr.a,{locale:"fr-FR",onChange:y,value:N})})]}),Object(x.jsx)("div",{className:"bg-white py-3 px-2 mb-2",children:Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{class:"table",children:[Object(x.jsxs)("tr",{className:"sticky-this",children:[Object(x.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Ce,{date:e})})})),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Stock"})]}),M.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("tr",{class:"bg-white",children:[Object(x.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(x.jsx)(x.Fragment,{children:void 0!=T[t]?Object(x.jsx)(cd,{flat:B(T[t],"contenu"),gr:t,id:e.id}):Object(x.jsx)(rd,{})})})),Object(x.jsx)("td",{className:"text-center",children:e.quantityParProduct}),Object(x.jsx)(ad,{flat:B(T[id(Object.keys(T))],"contenu"),gr:id(Object.keys(T)),id:e.id})]})})})),0==M.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})})," "]})]})]})},dd=function(){return Object(x.jsx)("td",{className:"text-center p-1",children:Object(x.jsx)("div",{children:Object(x.jsx)("span",{className:"text-center  p-1",children:"-"})})})},ld=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=(void 0!=c[c.length-1]&&c[c.length-1],0);return r=c?c.map((function(e){return 1*e.quantityParProductDepot})).reduce((function(e,t){return e+t}),0):0,Object(x.jsx)("td",{className:"text-center p-1",children:0!=r?r:"-"})},od=function(e){var t=e.flat,n=(e.gr,e.id),c=t.filter((function(e){return e.id==n})),r=void 0!=c[c.length-1]?c[c.length-1]:{},a={bruteCva:r.hasOwnProperty("id")?r.quantityBrute:0,ccCva:r.hasOwnProperty("id")?r.quantityCC:0};return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("td",{className:"text-center",children:0!=c.length?a.bruteCva:0})})};function ud(e){return e[e.length-1]}var jd=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)([]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),d=Object(O.a)(s,2),l=(d[0],d[1]),o=Object(r.useState)(e),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(t),h=Object(O.a)(m,2),v=h[0],p=h[1],f=Object(r.useState)([e,t]),g=Object(O.a)(f,2),N=g[0],y=g[1],C=Object(r.useState)([]),q=Object(O.a)(C,2),A=q[0],S=q[1],E=Object(r.useState)([]),w=Object(O.a)(E,2),P=(w[0],w[1],Object(ie.d)(vn("commandes").value)),V=Object(ie.d)(vn("commandes").meta),R=Object(ie.c)();Object(r.useEffect)((function(){null!==N?(N[0]&&b(N[0]),N[0]&&p(N[1])):(b(e),p(t))}),[N]),Object(r.useEffect)((function(){j&&v&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(ae()(j),ae()(v))),l(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(ae()(j),ae()(v))),R(pn("vente-depot",j,v)))}),[j,v]),Object(r.useEffect)((function(){V.isFetching||S(Ae(P,"dateCom",j,v))}),[V]);var F,D,M=Se(A,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityParProductDepot,d=t.quantityBruteCVA,l=t.quantityCCCVA,o=(t.qttByCC,e.find((function(e){return e.id===n})));return o?o.quantityParProductDepot=parseInt(o.quantityParProductDepot)+parseInt(s):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBruteCVA:d,quantityCCCVA:l,quantityParProductDepot:s}),e}),[]).sort((function(e,t){return e.id>t.id})),B=function(e,t){var n;return Object(ce.a)(new Set((n=[]).concat.apply(n,Object(ce.a)(e.map((function(e){return e[t]}))))))},T=(F="dateCom",A.reduce((function(e,t){return D?(e[t[F][D]]=e[t[F][D]]||[]).push(t):(e[t[F]]=e[t[F]]||[]).push(t),e}),{}));return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Journal de vente",children:Object(x.jsx)(je,{title:"Journal de vente"})}),Object(x.jsxs)(xe,{children:[Object(x.jsx)(Nn,{}),Object(x.jsxs)("div",{className:"date-range",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(x.jsxs)("div",{children:[j&&v&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{class:"text-uppercase my-1",children:"Journal de vente"}),Object(x.jsxs)("span",{children:["Du: ",fe(j)," Au ",fe(v)]})]})," "]}),Object(x.jsx)("div",{children:Object(x.jsx)(mr.a,{locale:"fr-FR",onChange:y,value:N})})]}),Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{class:"table",children:[Object(x.jsxs)("tr",{className:"sticky-this",children:[Object(x.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Ce,{date:e})})})),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Stock"})]}),M.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("tr",{class:"bg-white",children:[Object(x.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(x.jsx)(x.Fragment,{children:void 0!=T[t]?Object(x.jsx)(ld,{flat:B(T[t],"contenu"),gr:t,id:e.id}):Object(x.jsx)(dd,{})})})),Object(x.jsx)("td",{className:"text-center",children:e.quantityParProductDepot}),Object(x.jsx)(od,{flat:B(T[ud(Object.keys(T))],"contenu"),gr:ud(Object.keys(T)),id:e.id})]})})})),0==M.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})]})]})]})};function bd(e){return e[e.length-1]}var md=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)([]),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)([]),d=Object(O.a)(s,2),l=(d[0],d[1]),o=Object(r.useState)(e),u=Object(O.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(t),h=Object(O.a)(m,2),v=h[0],p=h[1],f=Object(r.useState)([e,t]),g=Object(O.a)(f,2),N=g[0],y=g[1],C=Object(r.useState)([]),q=Object(O.a)(C,2),A=q[0],S=q[1],E=Object(r.useState)([]),w=Object(O.a)(E,2),P=(w[0],w[1],Object(ie.d)(vn("commandes").value)),V=Object(ie.d)(vn("commandes").meta),R=Object(ie.c)();Object(r.useEffect)((function(){null!==N?(N[0]&&b(N[0]),N[0]&&p(N[1])):(b(e),p(t))}),[N]),Object(r.useEffect)((function(){j&&v&&(i(function(e,t){for(var n=e.clone(),c=[];n.isSameOrBefore(t);)c.push(n.format("YYYY-MM-DD")),n.add(1,"days");return c}(ae()(j),ae()(v))),l(function(e,t){for(var n=[];t.diff(e,"months")>=0;)n.push(e.format("MMMM YYYY")),e.add(1,"month");return n}(ae()(j),ae()(v))),R(pn("cva",j,v)))}),[j,v]),Object(r.useEffect)((function(){V.isFetching||S(Ae(P,"dateCom",j,v))}),[V]);var F,D,M=Se(A,"contenu").reduce((function(e,t){var n=t.id,c=t.name,r=t.type,a=t.category,i=t.fournisseur,s=t.quantityBrute,d=t.quantityCC,l=t.quantityParProduct,o=e.find((function(e){return e.id===n}));return o?o.quantityParProduct=parseInt(o.quantityParProduct)+parseInt(l):e.push({id:n,name:c,type:r,category:a,fournisseur:i,quantityBrute:s,quantityCC:d,quantityParProduct:l}),e}),[]).sort((function(e,t){return e.id>t.id})),B=function(e,t){var n;return Object(ce.a)(new Set((n=[]).concat.apply(n,Object(ce.a)(e.map((function(e){return e[t]}))))))},T=(F="dateCom",A.reduce((function(e,t){return D?(e[t[F][D]]=e[t[F][D]]||[]).push(t):(e[t[F]]=e[t[F]]||[]).push(t),e}),{}));return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Journal de dep\xf4t vers magasin",children:Object(x.jsx)(je,{title:"Journal de dep\xf4t vers magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsx)(Nn,{}),Object(x.jsxs)("div",{className:"date-range",children:[Object(x.jsxs)("div",{className:"d-flex justify-content-between my-3",children:[Object(x.jsxs)("div",{children:[j&&v&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{class:"text-uppercase my-1",children:"Journal de dep\xf4t vers magasin "}),Object(x.jsxs)("span",{children:["Du: ",fe(j)," Au ",fe(v)]})]})," "]}),Object(x.jsx)("div",{children:Object(x.jsx)(mr.a,{locale:"fr-FR",onChange:y,value:N})})]}),Object(x.jsx)("div",{className:"bg-white py-3 px-2 mb-2",children:Object(x.jsx)("div",{className:"table-responsive",children:Object(x.jsxs)("table",{class:"table",children:[Object(x.jsxs)("tr",{className:"sticky-this",children:[Object(x.jsx)("td",{children:"Produit"}),a.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Ce,{date:e})})})),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Total"}),Object(x.jsx)("td",{className:"bg-thead text-uppercase text-center",children:"Stock"})]}),M.map((function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("tr",{class:"bg-white",children:[Object(x.jsx)("td",{className:"bg-thead",children:e.name}),a.map((function(t){return Object(x.jsx)(x.Fragment,{children:void 0!=T[t]?Object(x.jsx)(cd,{flat:B(T[t],"contenu"),gr:t,id:e.id}):Object(x.jsx)(rd,{})})})),Object(x.jsx)("td",{className:"text-center",children:e.quantityParProduct}),Object(x.jsx)(ad,{flat:B(T[bd(Object.keys(T))],"contenu"),gr:bd(Object.keys(T)),id:e.id})]})})})),0==M.length&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{className:"text-center",colSpan:a.length+3,children:"Aucune enregistrement trouv\xe9"})})]})})})," "]})]})]})},Od=function(e){if(!e||0===(null===e||void 0===e?void 0:e.length))return 0;var t=0;return e.forEach((function(e){t+=e.prixVente*e.quantityParProduct*1})),t},xd=function(e,n,c){return 1==e[t]?{text:"plus (+"+e[n]+")("+c+")",textStyle:"text text-info",date:fe(e.datedecorrection),style:"badge badge-info"}:2==e[t]?{text:"moins (-"+e[n]+")("+c+")",textStyle:"text text-warning",date:fe(e.datedecorrection),style:"badge badge-warning"}:3==e[t]?{text:"ajouter au commande ( + "+e[n]+"("+c+")",textStyle:"text text-success",date:fe(e.datedecorrection),style:"badge badge-success"}:4==e[t]?{text:"supprimer du commande ( - "+e[n]+"("+c+")",textStyle:"text text-danger",date:fe(e.datedecorrection),style:"badge badge-danger"}:void 0};var hd=Object(o.j)((function(e){Object(o.g)();var t,n,c=Object(o.i)().id,a=Object(ie.d)(vn("commandes").value),i=Object(ie.c)();return Object(r.useEffect)((function(){i(hn("commandes").get(c))}),[c]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail de sortie vers magasin",children:Object(x.jsx)(je,{title:"D\xe9tail de sortie vers magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("table",{className:"table table-bordered ",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),a.length>0&&(null===(t=a[0])||void 0===t?void 0:t.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{style:{width:"40%"},children:[Object(x.jsx)("h2",{children:e.name}),e.correction>0&&Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:xd(e,"correction","correctiontype").style,children:Object(x.jsx)("p",{children:xd(e).text})})}),e.correctionml>0&&Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:xd(e,"correctionml","correctiontml").style,children:Object(x.jsx)("p",{children:xd(e,"correctionml","correctiontml").text})})}),e.correctionl>0&&Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:xd(e,"correctionl","correctiontl").style,children:Object(x.jsx)("p",{children:xd(e,"correctionl","correctiontl").text})})}),Object(x.jsxs)("p",{children:["Date de modification:",fe(e.datedecorrection)]})]}),Object(x.jsxs)("td",{className:"d-flex align-items-center",children:[ge(oa(e)?e.prixlitre:e.prixVente),"(","x"," ",e.quantityParProduct,")"]}),Object(x.jsx)("td",{children:ge(oa(e)?e.prixlitre:e.prixVente*e.quantityParProduct)})]})})))]}),Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)("strong",{children:"Total"}),":",ge(Od(null===(n=a[0])||void 0===n?void 0:n.contenu))]})]})]})})),vd=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};var pd=Object(o.j)((function(e){Object(o.h)();var t,n,c,a,i,s,d,l,u=Object(o.i)().id,j=Object(ie.d)(vn("commandes").value),b=Object(ie.c)();return Object(r.useEffect)((function(){b(hn("commandes").get(u))}),[u]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail de vente du magasin",children:Object(x.jsx)(je,{title:"D\xe9tail de vente du magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"credit-cva"==(null===(t=j[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("p",{children:"Credit"})}),"credit-cva"==(null===(n=j[0])||void 0===n?void 0:n.type)&&Object(x.jsx)("div",{className:"border",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:null===(c=j[0])||void 0===c?void 0:c.emprunter.name}),Object(x.jsx)("h5",{children:null===(a=j[0])||void 0===a?void 0:a.emprunter.contact})]})}),j.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",fe(null===(i=j[0])||void 0===i?void 0:i.dateCom)]}),Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(x.jsx)("strong",{children:"Recette:"}),":",Object(x.jsx)("h3",{className:"text-lg",children:ge(vd(null===(s=j[0])||void 0===s?void 0:s.contenu.map((function(e){return oa(e)?e.prixlitre*e.quantityParProduct:e.prixVente*e.quantityParProduct})))+vd(null===(d=j[0])||void 0===d?void 0:d.contenu.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),j.length>0&&(null===(l=j[0])||void 0===l?void 0:l.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsx)(x.Fragment,{children:0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{children:[e.type,":"]}),ge(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",ge(e.prixVente*e.quantityParProduct)]})}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ML:"})," ",ge(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" Ml"," "," = "," ",ge(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:ge(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})]})})),fd=function(e){var t,n=e.state,c=e.setState,r=e.product,i=(Object(ie.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id})))),s=a.a.useCallback((function(){return r.quantityBruteCVA>15&&r.quantityBruteCVA<=20?"yellow":r.quantityBruteCVA>10&&r.quantityBruteCVA<=15?"#ffdb4c":r.quantityBruteCVA>5&&r.quantityBruteCVA<=10?" orange":r.quantityBruteCVA>0&&r.quantityBruteCVA<=5?"#c44e14b8":0==r.quantityBruteCVA?"red":"green"}),[r]),d=a.a.useCallback((function(){return r.quantityCCCVA>15&&r.quantityCCCVA<=20?"yellow":r.quantityCCCVA>10&&r.quantityCCCVA<=15?"#ffdb4c":r.quantityCCCVA>5&&r.quantityCCCVA<=10?" orange":r.quantityCCCVA>0&&r.quantityCCCVA<=5?"#c44e14b8":0==r.quantityCCCVA?"red":"green"}),[r]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Wc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(s())},children:Object(x.jsxs)("div",{className:" d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&i?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(d())}}),Object(x.jsxs)("div",{children:[r.name," "]}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(x.jsx)(x.Fragment,{children:i?Object(x.jsx)("button",{disabled:0===r.quantityBruteCVA&&(0==r.quantityCCCVA||null==r.quantityCCCVA),className:"btn btn-danger btn-sm",onClick:function(){!function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(x.jsx)("button",{disabled:0===r.quantityBruteCVA&&(0==r.quantityCCCVA||null==r.quantityCCCVA),className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(ce.a)(n)))},children:"Ajouter"})})})]})})})},gd=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=e.setRealQtt,i=e.realQtt,s=(e.maxRealQtt,function(e){!function(e,t,n){var a=Object(ce.a)(c);a[e]=Object(Ee.a)(Object(Ee.a)({},a[e]),{},Object(We.a)({},t,n)),r(a)}(n,"quantityParProduct",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(a(null===t||void 0===t?void 0:t.quantityParProduct),s(null===t||void 0===t?void 0:t.quantityParProduct)):(a(Number(e)),s(Number(e)))},min:0,value:i,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Nd=function(e){var t=e.product,n=e.setRealQttCC,c=e.realQttCC,r=e.maxRealQttCC,a=Object(ie.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"decimal",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){a(li(t.id,e))}(e),n(e)},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:r,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},yd=function(e){var t=e.product,n=e.setRealQttCC,c=e.realQttCC,r=e.maxRealQttCC,a=Object(ie.c)(),i=function(e){a(ui(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){""==e?(i(0),n(0)):(i(Number(e)),n(Number(e)))},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:r,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Cd=function(e){var t=e.product,n=e.setRealQttCC,c=e.maxRealQttCC,r=e.realQttCC,a=Object(ie.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){a(oi(t.id,e))}(Number(e)),n(Number(e))},min:0,value:r,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:c,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},qd=function(){return{type:$a}},Ad=function(e,t){return{type:ni,payload:{id:e,value:t}}},Sd=function(e,t){return{type:si,payload:{id:e,value:t}}},Ed=function(e,t){return{type:ti,payload:{id:e,value:t}}},wd=function(e){var t=e.product,n=e.setRealQttCC,c=(e.maxRealQttCC,e.index),r=e.setState,a=e.state,i=e.realQttCC,s=function(e){!function(e,t,n){var c=Object(ce.a)(a);c[e]=Object(Ee.a)(Object(Ee.a)({},c[e]),{},Object(We.a)({},t,n)),r(c)}(c,"qttByCC",e)};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(s(null===t||void 0===t?void 0:t.qttByCC),n(null===t||void 0===t?void 0:t.qttByCC)):(n(1*e),s(1*e))},min:0,value:i,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Pd=function(e){var t=e.product,n=e.setRealQttLitre,c=e.setState,r=e.state,a=e.realQttLitre,i=e.index,s=function(e){!function(e,t,n){var a=Object(ce.a)(r);a[e]=Object(Ee.a)(Object(Ee.a)({},a[e]),{},Object(We.a)({},t,n)),c(a)}(i,"qttbylitre",e)};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,value:a,defaultValue:null===t||void 0===t?void 0:t.qttbylitre,onChange:function(e){""==e?(n(null===t||void 0===t?void 0:t.qttbylitre),s(null===t||void 0===t?void 0:t.qttbylitre)):(n(Number(e)),s(Number(e)))},children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Vd=function(e){var t=e.product,n=e.state,c=e.setState,r=e.realQttCC,a=e.setRealQttCC,i=(e.maxRealQttCC,e.index),s=(Object(ie.c)(),function(e){!function(e,t,r){var a=Object(ce.a)(n);a[e]=Object(Ee.a)(Object(Ee.a)({},a[e]),{},Object(We.a)({},t,r)),c(a)}(i,"qttByCC",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){""==e?(s(0),a(0)):(a(Number(e)),s(Number(e)))},min:0,value:r,defaultValue:null===t||void 0===t?void 0:t.qttByCC,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Rd=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},Fd=function(e){return 1==e.correctiontype?{text:"plus (+"+e.correction+") et ("+e.correctionml+")",textStyle:"text text-info",date:fe(e.datedecorrection),style:"badge badge-info"}:2==e.correctiontype?{text:"moins (-"+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-warning",date:fe(e.datedecorrection),style:"badge badge-warning"}:3==e.correctiontype?{text:"ajouter au commande ( + "+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-success",date:fe(e.datedecorrection),style:"badge badge-success"}:4==e.correctiontype?{text:"supprimer du commande ( - "+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-danger",date:fe(e.datedecorrection),style:"badge badge-danger"}:void 0},Dd=function(e){var t=e.state,n=e.index,c=e.setState,i=e.product,s=e.products,d=(Object(ie.c)(),Object(r.useState)(null===i||void 0===i?void 0:i.qttByCC)),l=Object(O.a)(d,2),o=l[0],u=l[1],j=Object(r.useState)(null===i||void 0===i?void 0:i.quantityParProduct),b=Object(O.a)(j,2),m=b[0],h=b[1],v=Object(r.useState)(null===i||void 0===i?void 0:i.qttbylitre),p=Object(O.a)(v,2),f=p[0],g=p[1],N=Object(r.useState)(2e3),y=Object(O.a)(N,2),C=y[0],q=y[1],A=Object(r.useState)(2e3),S=Object(O.a)(A,2),E=S[0],w=S[1],P=Object(r.useState)(2e3),V=Object(O.a)(P,2),R=V[0],F=V[1],D=Object(ie.d)(vn("commandes").value);return a.a.useEffect((function(){if(void 0!=s&&void 0!=t&&D.length>0){var e=null===t||void 0===t?void 0:t.find((function(e){return null===i||void 0===i?void 0:i.id})),n=Ei(s,D[0],e),c=n.normalQtt,r=n.normalQttCC,a=n.normalQttLitre,d=n.isSpecific;0==n.isValid&&(alert("stock insuffisant :("),d?(g(a),F(a),h(c),q(c),u(r),w(r)):(h(c),q(c),u(r),w(r))),console.log(f)}}),[m,o,f,s]),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border mt-3  mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[i.correction>0&&Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:Fd(i).style,children:Object(x.jsx)("p",{children:Fd(i).text})}),Object(x.jsxs)("p",{className:Fd(i).textStyle,children:["Date de modification:",Fd(i).date]})]}),Object(x.jsx)("p",{className:"text-blue",children:i.name}),Rd(i)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.qttbylitre&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixVente)+" x "+i.qttbylitre+" Litre(s)"})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixqttccvente*i.qttccpvente)+" x "+i.quantityParProduct+" "+i.type})})})]}):Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixVente)+" x "+i.quantityParProduct+" "+i.type})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.qttByCC&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixParCC)+" x "+i.qttByCC+" ML"})})})]}),0!==i.condml&&0!==i.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(Pd,{product:i,setState:c,state:t,index:n,realQttLitre:f,setRealQttLitre:g,maxRealQttByLitre:R})," "]}),Object(x.jsxs)("div",{className:"d-flex  justify-content-between align-items-center ",children:[Object(x.jsxs)("div",{className:"text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:i.type}),Object(x.jsx)(gd,{index:n,state:t,setState:c,product:i,setRealQtt:h,realQtt:m,maxRealQtt:C})]}),"FLACON"===i.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==i.categoryId?"DOSE":"ML"}),ye(i.name,"ita new")&&Object(x.jsx)(Nd,{product:i,index:n,state:t,setState:c,setRealQttCC:u,realQttCC:o,maxRealQttCC:E}),ye(i.name,"sovax")&&Object(x.jsx)(Cd,{index:n,state:t,setState:c,realQttCC:o,setRealQttCC:u,product:i,maxRealQttCC:E}),0==i.condml&&0==i.qttccpvente&&!ye(i.name,"sovax")&&!ye(i.name,"ita new")&&Object(x.jsx)(wd,{index:n,realQttCC:o,setRealQttCC:u,state:t,setState:c,product:i,maxRealQttCC:E}),0!==i.condml&&0!==i.qttccpvente&&Object(x.jsx)(Vd,{product:i,state:t,realQttCC:o,setRealQttCC:u,maxRealQttCC:E,setState:c,index:n})]})]})]})})},Md=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function Bd(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Bd(n):n;return t}var Td=function(e){var t=e.state,n=(e.meta,e.setState),c=e.disabled,a=e.products,i=e.commandes,s=Object(r.useState)("direct"),d=Object(O.a)(s,2),u=d[0],j=(d[1],Object(r.useState)(1)),b=Object(O.a)(j,2),m=(b[0],b[1],Object(r.useState)(null)),h=Object(O.a)(m,2),v=(h[0],h[1],Object(r.useState)(null)),p=Object(O.a)(v,2),f=(p[0],p[1]),g=Object(o.g)(),N=Object(r.useState)([]),y=Object(O.a)(N,2),C=y[0],q=y[1],A=Object(ie.d)((function(e){return{fromdepots:e.fromdepots}})),S=A.fromdepots;Object(r.useEffect)((function(){q(null===i||void 0===i?void 0:i.contenu)}),[i]);var E=Object(ie.c)(),w=Object(ie.d)(vn("emprunters").value),P=new Date,V=Object(r.useState)(P),R=Object(O.a)(V,2),F=R[0],D=R[1];Object(r.useEffect)((function(){E(hn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:" bg-dark py-3 text-white d-flex justify-content-between align-items-center",children:Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"})}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsxs)(Ic.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:[Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsx)(l.b,{className:"btn btn-primary mb-2 btn-sm",to:Q,children:"Voir l'historique de vente"})}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsxs)("label",{children:["Date de sortie : ",fe(F)]}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",disabled:c,onChange:function(e){return D(e.target.value)},value:F,className:"form-control"})})]}),"credit"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{disabled:c,className:"form-control",onChange:function(e){f(e.target.value)},children:[Object(x.jsx)("option",{value:""}),w.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===t||void 0===t?void 0:t.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===t||void 0===t?void 0:t.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e,c){var r;return Object(x.jsx)(Dd,{product:e,realcommande:null===(r=i[0])||void 0===r?void 0:r.find((function(t){return t.id==e.id})),state:t,index:c,products:null===a||void 0===a?void 0:a.find((function(t){return t.id==e.id})),setState:n,basket:S,dispatch:E},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(c))}))]})]}),(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)(Ic.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"40%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge(Md(null===t||void 0===t?void 0:t.map((function(e){return Ci(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Md(null===t||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"60%"},children:(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===(null===t||void 0===t?void 0:t.length),onClick:function(){var e,n=function(){var e=Bd(C).filter((function(e){return!t.find((function(t){return e.id===t.id}))})),n=Bd(C).filter((function(e){return!t.find((function(t){return e.id===t.id}))}));return{exist:Bd(C).map((function(e){return t.find((function(t){return t.id===e.id}))})).filter((function(e){return null!=e})),added:n,missing:e}}(),c=n.exist,r=n.added,a=n.missing;Pi(t)?alert("modification non conforme,veuillez verifier"):(E(hn("commandes").updateTransaction((e={id:null===i||void 0===i?void 0:i.id,contenu:t,commande:t,type:"vente-cva",sorte:"sortie"},Object(We.a)(e,"sorte","sortie"),Object(We.a)(e,"status",!0),Object(We.a)(e,"dateCom",null!=F?F:P),Object(We.a)(e,"exist",c),Object(We.a)(e,"added",r),Object(We.a)(e,"missing",a),e),"update-from-magasin")),g.push(Q))},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return g.goBack()},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},kd=function(){var e=Object(o.i)().id,t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(ie.c)(),d=Object(ie.d)(vn("commandes").value),l=Object(ie.d)(vn("commandes").meta),u=Object(ie.d)(vn("products").value),j=Object(ie.d)(vn("products").meta),b=Object(r.useState)([]),m=Object(O.a)(b,2),h=m[0],v=m[1];a.a.useEffect((function(){s(hn("commandes").get(e))}),[e]);var p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],N=f[1],y=Object(r.useState)([]),C=Object(O.a)(y,2),q=C[0],A=C[1];a.a.useEffect((function(){return 1==c&&(s(hn("products").fetch()),i(!1)),function(){i(!1)}}),[c]);var S=Object(r.useState)(),E=Object(O.a)(S,2);E[0],E[1];return a.a.useEffect((function(){v(jr(u,g))}),[g]),a.a.useEffect((function(){s(hn("products").fetch())}),[]),a.a.useEffect((function(){var e;l.isFetching||A(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[l]),a.a.useEffect((function(){j.isFetching||v(u)}),[j]),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"bg-dark text-white p-3 d-flex justify-content-center align-items-center",children:Object(x.jsx)("h1",{className:"",children:"CABINET VETERINAIRE AMBALAVAO"})}),Object(x.jsx)(lr.a,{className:"mt-3",children:Object(x.jsxs)(Jc.a,{children:[Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)(Wc.a,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){N(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[h.map((function(e){return Object(x.jsx)(fd,{state:q,realproduct:u,setState:A,product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)(Td,{state:q,meta:l,disabled:j.isFetching,setState:A,products:u,commandes:d[0]})})]})})]})},Id=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};Object(o.j)((function(e){Object(o.h)();var t,n,c,a,i,s,d,l,u=Object(o.i)().id,j=Object(ie.d)(vn("commandes").value),b=Object(ie.c)();return Object(r.useEffect)((function(){b(hn("commandes").get(u))}),[u]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"D\xe9tail de vente du magasin",children:Object(x.jsx)(je,{title:"D\xe9tail de vente du magasin"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"credit-cva"==(null===(t=j[0])||void 0===t?void 0:t.type)&&Object(x.jsx)("p",{children:"Credit"})}),"credit-cva"==(null===(n=j[0])||void 0===n?void 0:n.type)&&Object(x.jsx)("div",{className:"border",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h3",{children:null===(c=j[0])||void 0===c?void 0:c.emprunter.name}),Object(x.jsx)("h5",{children:null===(a=j[0])||void 0===a?void 0:a.emprunter.contact})]})}),j.length>0&&Object(x.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",fe(null===(i=j[0])||void 0===i?void 0:i.dateCom)]}),Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsxs)("div",{className:"bg-thead p-1 mb-1",children:[Object(x.jsx)("strong",{children:"Recette:"}),":",Object(x.jsx)("h3",{className:"text-lg",children:ge(Id(null===(s=j[0])||void 0===s?void 0:s.contenu.map((function(e){return oa(e)?e.prixlitre*e.quantityParProduct:e.prixVente*e.quantityParProduct})))+Id(null===(d=j[0])||void 0===d?void 0:d.contenu.map((function(e){return e.prixParCC*e.qttByCC}))))})]})})]}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),j.length>0&&(null===(l=j[0])||void 0===l?void 0:l.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsx)(x.Fragment,{children:0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{children:[e.type,":"]}),ge(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",ge(e.prixVente*e.quantityParProduct)]})}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ML:"})," ",ge(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" Ml"," "," = "," ",ge(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:ge(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})," "]})," "]})]})}));var _d=function(e){var t,n=e.state,c=e.setState,r=e.product,i=(Object(ie.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id})))),s=a.a.useCallback((function(){return r.quantityBruteCVA>15&&r.quantityBruteCVA<=20?"yellow":r.quantityBruteCVA>10&&r.quantityBruteCVA<=15?"#ffdb4c":r.quantityBruteCVA>5&&r.quantityBruteCVA<=10?" orange":r.quantityBruteCVA>0&&r.quantityBruteCVA<=5?"#c44e14b8":0==r.quantityBruteCVA?"red":"green"}),[r]),d=a.a.useCallback((function(){return r.quantityCCCVA>15&&r.quantityCCCVA<=20?"yellow":r.quantityCCCVA>10&&r.quantityCCCVA<=15?"#ffdb4c":r.quantityCCCVA>5&&r.quantityCCCVA<=10?" orange":r.quantityCCCVA>0&&r.quantityCCCVA<=5?"#c44e14b8":0==r.quantityCCCVA?"red":"green"}),[r]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Wc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(s())},children:Object(x.jsxs)("div",{className:" d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&i?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(d())}}),Object(x.jsxs)("div",{children:[r.name," "]}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(x.jsx)(x.Fragment,{children:i?Object(x.jsx)("button",{disabled:0===r.quantityBruteCVA&&(0==r.quantityCCCVA||null==r.quantityCCCVA),className:"btn btn-danger btn-sm",onClick:function(){!function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(x.jsx)("button",{disabled:0===r.quantityBruteCVA&&(0==r.quantityCCCVA||null==r.quantityCCCVA),className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(ce.a)(n)))},children:"Ajouter"})})})]})})})},Qd=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=e.setRealQtt,i=e.realQtt,s=(e.maxRealQtt,function(e){!function(e,t,n){var a=Object(ce.a)(c);a[e]=Object(Ee.a)(Object(Ee.a)({},a[e]),{},Object(We.a)({},t,n)),r(a)}(n,"quantityParProduct",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(a(null===t||void 0===t?void 0:t.quantityParProduct),s(null===t||void 0===t?void 0:t.quantityParProduct)):(a(Number(e)),s(Number(e)))},min:0,value:i,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Ld=function(e){var t=e.product,n=e.setRealQttCC,c=e.realQttCC,r=e.maxRealQttCC,a=Object(ie.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"decimal",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){a(li(t.id,e))}(e),n(e)},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:r,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Hd=function(e){var t=e.product,n=e.setRealQttCC,c=e.realQttCC,r=e.maxRealQttCC,a=Object(ie.c)(),i=function(e){a(ui(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){""==e?(i(0),n(0)):(i(Number(e)),n(Number(e)))},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:r,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Ud=function(e){var t=e.product,n=e.setRealQttCC,c=e.maxRealQttCC,r=e.realQttCC,a=Object(ie.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){a(oi(t.id,e))}(Number(e)),n(Number(e))},min:0,value:r,defaultValue:null===t||void 0===t?void 0:t.qttByCC,max:c,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Yd=function(e){var t=e.product,n=e.setRealQttCC,c=(e.maxRealQttCC,e.index),r=e.setState,a=e.state,i=e.realQttCC,s=function(e){!function(e,t,n){var c=Object(ce.a)(a);c[e]=Object(Ee.a)(Object(Ee.a)({},c[e]),{},Object(We.a)({},t,n)),r(c)}(c,"qttByCC",e)};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(s(null===t||void 0===t?void 0:t.qttByCC),n(null===t||void 0===t?void 0:t.qttByCC)):(n(1*e),s(1*e))},min:0,value:i,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},zd=function(e){var t=e.product,n=e.setRealQttLitre,c=e.setState,r=e.state,a=e.realQttLitre,i=e.index,s=function(e){!function(e,t,n){var a=Object(ce.a)(r);a[e]=Object(Ee.a)(Object(Ee.a)({},a[e]),{},Object(We.a)({},t,n)),c(a)}(i,"qttbylitre",e)};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,value:a,defaultValue:null===t||void 0===t?void 0:t.qttbylitre,onChange:function(e){""==e?(n(null===t||void 0===t?void 0:t.qttbylitre),s(null===t||void 0===t?void 0:t.qttbylitre)):(n(Number(e)),s(Number(e)))},children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Kd=function(e){var t=e.product,n=e.state,c=e.setState,r=e.realQttCC,a=e.setRealQttCC,i=(e.maxRealQttCC,e.index),s=(Object(ie.c)(),function(e){!function(e,t,r){var a=Object(ce.a)(n);a[e]=Object(Ee.a)(Object(Ee.a)({},a[e]),{},Object(We.a)({},t,r)),c(a)}(i,"qttByCC",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){""==e?(s(0),a(0)):(a(Number(e)),s(Number(e)))},min:0,value:r,defaultValue:null===t||void 0===t?void 0:t.qttByCC,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Gd=function(e){return!(0==e.condml||0==e.condsize||0==e.qttccpvente||0==e.prixqttccvente)},Wd=function(e){return 1==e.correctiontype?{text:"plus (+"+e.correction+") et ("+e.correctionml+")",textStyle:"text text-info",date:fe(e.datedecorrection),style:"badge badge-info"}:2==e.correctiontype?{text:"moins (-"+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-warning",date:fe(e.datedecorrection),style:"badge badge-warning"}:3==e.correctiontype?{text:"ajouter au commande ( + "+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-success",date:fe(e.datedecorrection),style:"badge badge-success"}:4==e.correctiontype?{text:"supprimer du commande ( - "+e.correction+")  et ("+e.correctionml+")",textStyle:"text text-danger",date:fe(e.datedecorrection),style:"badge badge-danger"}:void 0},Jd=function(e){var t=e.state,n=e.index,c=e.setState,i=e.product,s=e.products,d=(Object(ie.c)(),Object(r.useState)(null===i||void 0===i?void 0:i.qttByCC)),l=Object(O.a)(d,2),o=l[0],u=l[1],j=Object(r.useState)(null===i||void 0===i?void 0:i.quantityParProduct),b=Object(O.a)(j,2),m=b[0],h=b[1],v=Object(r.useState)(null===i||void 0===i?void 0:i.qttbylitre),p=Object(O.a)(v,2),f=p[0],g=p[1],N=Object(r.useState)(2e3),y=Object(O.a)(N,2),C=y[0],q=y[1],A=Object(r.useState)(2e3),S=Object(O.a)(A,2),E=S[0],w=S[1],P=Object(r.useState)(2e3),V=Object(O.a)(P,2),R=V[0],F=V[1],D=Object(ie.d)(vn("commandes").value);return a.a.useEffect((function(){if(void 0!=s&&void 0!=t&&D.length>0){var e=null===t||void 0===t?void 0:t.find((function(e){return null===i||void 0===i?void 0:i.id})),n=As(s,D[0],e),c=n.normalQtt,r=n.normalQttCC,a=n.normalQttLitre,d=n.isSpecific;0==n.isValid&&(alert("stock insuffisant :("),d?(g(a),F(a),h(c),q(c),u(r),w(r)):(h(c),q(c),u(r),w(r))),console.log(f)}}),[m,o,f,s]),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border mt-3  mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[i.correction>0&&Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:Wd(i).style,children:Object(x.jsx)("p",{children:Wd(i).text})}),Object(x.jsxs)("p",{className:Wd(i).textStyle,children:["Date de modification:",Wd(i).date]})]}),Object(x.jsx)("p",{className:"text-blue",children:i.name}),Gd(i)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.qttbylitre&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixVente)+" x "+i.qttbylitre+" Litre(s)"})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixqttccvente*i.qttccpvente)+" x "+i.quantityParProduct+" "+i.type})})})]}):Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixVente)+" x "+i.quantityParProduct+" "+i.type})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=i.qttByCC&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(i.prixParCC)+" x "+i.qttByCC+" ML"})})})]}),0!==i.condml&&0!==i.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(zd,{product:i,setState:c,state:t,index:n,realQttLitre:f,setRealQttLitre:g,maxRealQttByLitre:R})," "]}),Object(x.jsxs)("div",{className:"d-flex  justify-content-between align-items-center ",children:[Object(x.jsxs)("div",{className:"text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:i.type}),Object(x.jsx)(Qd,{index:n,state:t,setState:c,product:i,setRealQtt:h,realQtt:m,maxRealQtt:C})]}),"FLACON"===i.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==i.categoryId?"DOSE":"ML"}),ye(i.name,"ita new")&&Object(x.jsx)(Ld,{product:i,index:n,state:t,setState:c,setRealQttCC:u,realQttCC:o,maxRealQttCC:E}),ye(i.name,"sovax")&&Object(x.jsx)(Ud,{index:n,state:t,setState:c,realQttCC:o,setRealQttCC:u,product:i,maxRealQttCC:E}),0==i.condml&&0==i.qttccpvente&&!ye(i.name,"sovax")&&!ye(i.name,"ita new")&&Object(x.jsx)(Yd,{index:n,realQttCC:o,setRealQttCC:u,state:t,setState:c,product:i,maxRealQttCC:E}),0!==i.condml&&0!==i.qttccpvente&&Object(x.jsx)(Kd,{product:i,state:t,realQttCC:o,setRealQttCC:u,maxRealQttCC:E,setState:c,index:n})]})]})]})})},Xd=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function Zd(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?Zd(n):n;return t}var $d=function(e){var t=e.state,n=(e.meta,e.setState),c=e.disabled,a=e.products,i=e.commandes,s=Object(r.useState)("direct"),d=Object(O.a)(s,2),u=d[0],j=(d[1],Object(r.useState)(1)),b=Object(O.a)(j,2),m=(b[0],b[1],Object(r.useState)(null)),h=Object(O.a)(m,2),v=(h[0],h[1],Object(r.useState)(null)),p=Object(O.a)(v,2),f=(p[0],p[1]),g=Object(o.g)(),N=Object(r.useState)([]),y=Object(O.a)(N,2),C=y[0],q=y[1],A=Object(ie.d)((function(e){return{fromdepots:e.fromdepots}})),S=A.fromdepots;Object(r.useEffect)((function(){q(null===i||void 0===i?void 0:i.contenu)}),[i]);var E=Object(ie.c)(),w=Object(ie.d)(vn("emprunters").value),P=new Date,V=Object(r.useState)(P),R=Object(O.a)(V,2),F=R[0],D=R[1];Object(r.useEffect)((function(){E(hn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:" bg-dark py-3 text-white d-flex justify-content-between align-items-center",children:Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"})}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsxs)(Ic.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:[Object(x.jsx)("div",{className:"d-flex justify-content-end",children:Object(x.jsx)(l.b,{className:"btn btn-primary mb-2 btn-sm",to:ee,children:"Voir l'historique de vente"})}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsxs)("label",{children:["Date de sortie : ",fe(F)]}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",disabled:c,onChange:function(e){return D(e.target.value)},value:F,className:"form-control"})})]}),"credit"===u&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{disabled:c,className:"form-control",onChange:function(e){f(e.target.value)},children:[Object(x.jsx)("option",{value:""}),w.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===t||void 0===t?void 0:t.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===t||void 0===t?void 0:t.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e,c){var r;return Object(x.jsx)(Jd,{product:e,realcommande:null===(r=i[0])||void 0===r?void 0:r.find((function(t){return t.id==e.id})),state:t,index:c,products:null===a||void 0===a?void 0:a.find((function(t){return t.id==e.id})),setState:n,basket:S,dispatch:E},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(c))}))]})]}),(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)(Ic.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"40%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge(Xd(null===t||void 0===t?void 0:t.map((function(e){return Ns(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+Xd(null===t||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"60%"},children:(null===t||void 0===t?void 0:t.length)>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===(null===t||void 0===t?void 0:t.length),onClick:function(){var e,n=function(){var e=Zd(C).filter((function(e){return!t.find((function(t){return e.id===t.id}))})),n=Zd(C).filter((function(e){return!t.find((function(t){return e.id===t.id}))}));return{exist:Zd(C).map((function(e){return t.find((function(t){return t.id===e.id}))})).filter((function(e){return null!=e})),added:n,missing:e}}(),c=n.exist,r=n.added,a=n.missing;Es(t)?alert("modification non conforme,veuillez verifier"):E(hn("commandes").updateTransaction((e={id:null===i||void 0===i?void 0:i.id,contenu:t,commande:t,type:"vente-cva",sorte:"sortie"},Object(We.a)(e,"sorte","sortie"),Object(We.a)(e,"status",!0),Object(We.a)(e,"dateCom",null!=F?F:P),Object(We.a)(e,"exist",c),Object(We.a)(e,"added",r),Object(We.a)(e,"missing",a),e),"update-from-magasin"))},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return g.goBack()},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},el=function(){var e=Object(o.i)().id,t=Object(r.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(ie.c)(),d=Object(ie.d)(vn("commandes").value),l=Object(ie.d)(vn("commandes").meta),u=Object(ie.d)(vn("products").value),j=Object(ie.d)(vn("products").meta),b=Object(r.useState)([]),m=Object(O.a)(b,2),h=m[0],v=m[1];a.a.useEffect((function(){s(hn("commandes").get(e))}),[e]);var p=Object(r.useState)(""),f=Object(O.a)(p,2),g=f[0],N=f[1],y=Object(r.useState)([]),C=Object(O.a)(y,2),q=C[0],A=C[1];a.a.useEffect((function(){return 1==c&&(s(hn("products").fetch()),i(!1)),function(){i(!1)}}),[c]);var S=Object(r.useState)(),E=Object(O.a)(S,2);E[0],E[1];return a.a.useEffect((function(){v(jr(u,g))}),[g]),a.a.useEffect((function(){s(hn("products").fetch())}),[]),a.a.useEffect((function(){var e;l.isFetching||A(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[l]),a.a.useEffect((function(){j.isFetching||v(u)}),[j]),Object(x.jsx)("div",{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer une vente du magasin",children:Object(x.jsx)(je,{title:"Editer une vente du magasin"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)(Jc.a,{children:[Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)(Wc.a,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){N(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[h.map((function(e){return Object(x.jsx)(_d,{state:q,realproduct:u,setState:A,product:e})})),0==h.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)($d,{state:q,meta:l,disabled:j.isFetching,setState:A,products:u,commandes:d[0]})})]})})]})})},tl=function(e){var t=e.product,n=e.index,c=e.state,r=e.setState,a=(e.setRealQttCC,e.setRealQtt),i=e.stock,s=e.realcommand,d=(e.realQtt,e.realQttCC,function(e){console.log(e),function(e,t,n){var a=Object(ce.a)(c);a[e]=Object(Ee.a)(Object(Ee.a)({},a[e]),{},Object(We.a)({},t,n)),console.log(a),r(a)}(n,"quantityParProduct",e)});return Object(x.jsx)("div",{className:"basket-item-control",children:(null===i||void 0===i?void 0:i.quantityBruteCVA)<(null===s||void 0===s?void 0:s.quantityParProduct)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,step:1,disabled:!0,bg:"whitesmoke",onChange:function(e){d(Number(e)),a(Number(e)),(null===i||void 0===i?void 0:i.quantityBruteCVA)-(null===s||void 0===s?void 0:s.quantityParProduct)<0&&alert("Le stock ne satisfait pas votre commande")},defaultValue:null===s||void 0===s?void 0:s.quantityParProduct,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})}),4==(null===s||void 0===s?void 0:s.correctiontype)?Object(x.jsx)("div",{children:Object(x.jsx)(Is.a,{textTransform:"uppercase",className:"text text-danger",children:"CE PRODUIT A ETE RETIR\xc9"})}):Object(x.jsxs)("div",{children:[Object(x.jsx)(Is.a,{textTransform:"uppercase",children:"Restituable"}),Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,onChange:function(e){d(Number(e)),a(Number(e))},defaultValue:null===i||void 0===i?void 0:i.quantityBruteCVA,max:null===i||void 0===i?void 0:i.quantityBrute,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})]})]}):Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){d(Number(e)),a(Number(e)),(null===i||void 0===i?void 0:i.quantityBruteCVA)-(null===s||void 0===s?void 0:s.quantityParProduct)<0&&alert("Le stock ne satisfait pas votre commande")},min:0,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,max:null===i||void 0===i?void 0:i.quantityBrute,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})})},nl=function(e){return 1==e.correctiontype?{text:"plus (+"+e.correction+")",textStyle:"text text-info",date:fe(e.datedecorrection),style:"badge badge-info"}:2==e.correctiontype?{text:"moins (-"+e.correction+")",textStyle:"text text-warning",date:fe(e.datedecorrection),style:"badge badge-warning"}:3==e.correctiontype?{text:"ajouter au commande ( + "+e.correction+")",textStyle:"text text-success",date:fe(e.datedecorrection),style:"badge badge-success"}:4==e.correctiontype?{text:"supprimer du commande ( - "+e.correction+")",textStyle:"text text-danger",date:fe(e.datedecorrection),style:"badge badge-danger"}:void 0},cl=function(e){var t=e.state,n=e.index,c=e.setState,a=e.cloneCommandes,i=e.product,s=e.realstock,d=(e.realcommand,Object(r.useState)(null)),l=Object(O.a)(d,2),o=l[0],u=l[1],j=Object(r.useState)(null),b=Object(O.a)(j,2),m=b[0],h=b[1],v=s.find((function(e){return e.id==i.id})),p=null===a||void 0===a?void 0:a.contenu.find((function(e){return e.id==i.id}));return Object(x.jsxs)("div",{className:" mb-2 p-2",style:{opacity:(null===v||void 0===v?void 0:v.quantityBruteCVA)<(null===p||void 0===p?void 0:p.quantityParProduct)?.8:1,border:(null===v||void 0===v?void 0:v.quantityBruteCVA)<(null===p||void 0===p?void 0:p.quantityParProduct)?"1px solid red":"1px solid gray"},children:[(null===v||void 0===v?void 0:v.quantityBruteCVA)<(null===p||void 0===p?void 0:p.quantityParProduct)&&Object(x.jsx)("div",{className:"text-danger text-sm",children:"** Des operations ont \xeate d\xe9ja faite apres la sortie vers magasin et vous ne pourrez pas retourner tous les produits au dep\xf4t**"}),Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[i.correction>0&&Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:nl(i).style,children:Object(x.jsx)("p",{children:nl(i).text})}),Object(x.jsxs)("p",{className:nl(i).textStyle,children:["Date de modification:",nl(i).date]})]}),Object(x.jsx)("p",{className:"text-blue",children:i.name}),Object(x.jsx)("span",{className:"text-lowercase",children:Object(x.jsxs)("strong",{children:[0!=i.quantityParProduct&&ge(i.prixVente),0==i.quantityParProduct&&0!=i.prixParCC&&Object(x.jsx)(x.Fragment,{children:null!=i.prixqttccvente&&0!=i.prixqttccvente?ge(i.prixqttccvente):ge(i.prixParCC)}),0!=i.quantityParProduct&&" x "+i.quantityParProduct+" "+i.type," ",null==i.prixqttccvente&&0==i.prixqttccvente&&Object(x.jsx)(x.Fragment,{children:0!=i.qttByCC&&(0==i.quantityParProduct?" x ":"+")+i.qttByCC+"ML"})]})})]}),Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:i.type}),Object(x.jsx)(tl,{index:n,state:t,setState:c,product:i,realcommand:p,setRealQttCC:u,setRealQtt:h,realQtt:m,stock:v,realQttCC:o})]})]})]})},rl=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0};function al(e){var t,n,c;for(c in t=Array.isArray(e)?[]:{},e)n=e[c],t[c]="object"===typeof n?al(n):n;return t}var il=function(e){var t,n,c=e.state,a=(e.meta,e.setState),i=e.realstock,s=e.disabled,d=e.cloneCommandes,l=e.commandes,u=Object(r.useState)("direct"),j=Object(O.a)(u,2),b=j[0],m=(j[1],Object(r.useState)(1)),h=Object(O.a)(m,2),v=(h[0],h[1],Object(r.useState)(null)),p=Object(O.a)(v,2),f=(p[0],p[1],Object(r.useState)(null)),g=Object(O.a)(f,2),N=(g[0],g[1]),y=Object(o.g)(),C=Object(r.useState)([]),q=Object(O.a)(C,2),A=q[0],S=q[1],E=Object(ie.d)((function(e){return{tomagasins:e.tomagasins}})),w=E.tomagasins;Object(r.useEffect)((function(){S(null===l||void 0===l?void 0:l.contenu)}),[l]);var P=Object(ie.c)(),V=Object(ie.d)(vn("emprunters").value),R=new Date,F=Object(r.useState)(R),D=Object(O.a)(F,2),M=D[0],B=D[1];Object(r.useEffect)((function(){}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:" bg-dark py-3 text-white d-flex justify-content-between align-items-center",children:Object(x.jsx)("div",{style:{width:"60%"},children:"BON DE SORTIE"})}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsx)(Ic.a.Body,{style:{padding:12,marginTop:3,marginRight:2,marginLeft:2},children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{className:"alert alert-warning",children:[Object(x.jsx)("span",{className:"text-uppercase",children:"Attention !!!"})," , la modification d'un bon de sortie entraine aussi la mis \xe0 jour de stock du produit"]}),Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsxs)("label",{children:["Date de sortie : ",fe(M)]}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{disabled:s,type:"date",onChange:function(e){return B(e.target.value)},value:M,className:"form-control"})})]}),"credit"===b&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{disabled:s,className:"form-control",onChange:function(e){N(e.target.value)},children:[Object(x.jsx)("option",{value:""}),V.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===c||void 0===c?void 0:c.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:"Aucune enregistrement trouv\xe9"}),null===c||void 0===c?void 0:c.map((function(e,t){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(cl,{product:Kt.a.cloneDeep(e),state:c,index:t,realcommand:e,cloneCommandes:d,realstock:i,setState:a,basket:w,dispatch:P},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))})}))]})}),(null===c||void 0===c?void 0:c.length)>0&&Object(x.jsxs)(Ic.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"30%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge(rl(null===c||void 0===c?void 0:c.map((function(e){return e.prixVente*e.quantityParProduct})))+rl(null===c||void 0===c||null===(t=c.state)||void 0===t?void 0:t.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"70%"},children:(null===c||void 0===c?void 0:c.length)>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",(n={disabled:s,className:"btn btn-green btn-sm mr-2"},Object(We.a)(n,"disabled",0===(null===c||void 0===c?void 0:c.length)),Object(We.a)(n,"onClick",(function(){var e=function(){var e=al(A).filter((function(e){return!c.find((function(t){return e.id===t.id}))})),t=c.filter((function(e){return!al(A).find((function(t){return e.id===t.id}))}));return{exist:al(A).map((function(e){return c.find((function(t){return t.id===e.id}))})).filter((function(e){return null!=e})),added:t,missing:e}}(),t=e.exist,n=e.added,r=e.missing;P(hn("commandes").updateTransaction({id:null===l||void 0===l?void 0:l.id,contenu:c,type:"cva",sorte:"sortie",status:!0,dateCom:null!=M?M:R,exist:t,added:n,missing:r},"update-to-magasin")),y.push(_)})),Object(We.a)(n,"type","button"),Object(We.a)(n,"children","Valider l'operation"),n)),Object(x.jsx)("button",{disabled:s,className:"btn btn-danger btn-sm",onClick:function(){null===c||void 0===c||c.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),P(Ga())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},sl=function(e){var t,n=e.state,c=e.setState,r=e.product,a=e.cloneCommandes,i=(Object(ie.c)(),!!(null===n||void 0===n?void 0:n.find((function(e){return(null===e||void 0===e?void 0:e.id)===r.id})))),s=null===a||void 0===a?void 0:a.contenu.find((function(e){return e.id==r.id})),d=(null===r||void 0===r?void 0:r.quantityBruteCVA)<(null===s||void 0===s?void 0:s.quantityParProduct);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Wc.a.Item,{className:"mb-2 mr-3",style:{border:"1px solid gray"},children:Object(x.jsx)("div",{className:" d-flex justify-content-between align-items-center",children:Object(x.jsxs)("div",{className:" ".concat(r.id?"":"product-loading"),style:{boxShadow:r&&i?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsxs)("div",{children:[4==(null===s||void 0===s?void 0:s.correctiontype)&&Object(x.jsx)("div",{className:"badge badge-danger",children:Object(x.jsx)("h2",{textTransform:"uppercase",children:"CE PRODUIT A ETE RETIR\xc9"})}),Object(x.jsxs)("div",{children:[r.name," "]}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===r||void 0===r||null===(t=r.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," ",Object(x.jsx)("div",{children:(null===r||void 0===r?void 0:r.id)&&Object(x.jsx)(x.Fragment,{children:i?Object(x.jsx)("button",{disabled:d,className:"btn btn-danger btn-sm",onClick:function(){return function(e){c(n.filter((function(t){return t.id!==e})))}(null===r||void 0===r?void 0:r.id)},children:"Retirer"}):Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){c(n.some((function(e){return e.id===r.id}))?n:[r].concat(Object(ce.a)(n)))},children:"Ajouter"})})})]})})})})},dl=function(){var e=Object(o.i)().id,t=(Object(o.g)(),Object(r.useState)(!1)),n=Object(O.a)(t,2),c=n[0],i=n[1],s=Object(ie.c)(),d=Object(ie.d)(vn("commandes").value),l=Object(ie.d)(vn("commandesclone").value),u=Object(ie.d)(vn("commandes").meta),j=Object(ie.d)(vn("products").value),b=Object(ie.d)(vn("products").meta),m=Object(r.useState)([]),h=Object(O.a)(m,2),v=h[0],p=h[1];a.a.useEffect((function(){s(hn("commandesclone").get(e)),s(hn("commandes").get(e))}),[e]);var f=Object(r.useState)(""),g=Object(O.a)(f,2),N=g[0],y=g[1],C=Object(r.useState)([]),q=Object(O.a)(C,2),A=q[0],S=q[1];a.a.useEffect((function(){return 1==c&&(s(hn("products").fetch()),i(!1)),function(){i(!1)}}),[c]);var E=Object(r.useState)(),w=Object(O.a)(E,2),P=w[0],V=w[1];a.a.useEffect((function(){p(null!=P?pa(j,N,P):jr(j,N))}),[N]),a.a.useEffect((function(){p(""!=N?pa(j,N,P):xa(j,P))}),[P]),a.a.useEffect((function(){s(hn("products").fetch())}),[]),a.a.useEffect((function(){}),[P]),a.a.useEffect((function(){var e;u.isFetching||S(null===(e=d[0])||void 0===e?void 0:e.contenu)}),[u]),a.a.useEffect((function(){b.isFetching||p(j)}),[b]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Edition d'un sortie vers magasin",children:Object(x.jsx)(je,{title:"Edition d'un sortie vers magasin"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)(Jc.a,{className:"py-2",children:[Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)(Wc.a,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:"d-flex justify-content-between align-items-center bg-dark text-white",children:"Produits"}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsx)("input",{type:"text",onChange:function(e){y(e.target.value)},placeholder:"Rechercher un produit",className:"form-control mb-2"}),Object(x.jsx)(Ma,{model:"fournisseurs",children:Object(x.jsx)(Ba,{children:function(e){var t=e.data;e.meta;return Object(x.jsx)("div",{className:"my-2",children:Object(x.jsxs)("select",{className:"form-control",selected:2==P,onChange:function(e){V(e.target.value)},children:[Object(x.jsx)("option",{value:"",children:"Selectionner un fournisseur"}),t.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})})}})}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)(x.Fragment,{children:[v.map((function(e){return Object(x.jsx)(sl,{state:A,setState:S,cloneCommandes:l[0],product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})]})]})})}),Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)(il,{disabled:b.isFetching,state:A,meta:u,cloneCommandes:l[0],setState:S,realstock:j,commandes:d[0]})})]})})]})},ll=function(e,t){var n=function(t){return!!(null===e||void 0===e?void 0:e.find((function(e){return(null===e||void 0===e?void 0:e.id)===t})))};return{frommagasin:e,isItemFromMagasin:n,addFromMagasin:function(e){n(e.id)?t(function(e){return{type:Za,payload:e}}(e.id)):t(function(e){return{type:Xa,payload:e}}(e))}}},ol=function(e){var t,n=e.product,c=Object(ie.d)((function(e){return e.frommagasins})),r=Object(ie.c)(),i=ll(c,r),s=i.isItemFromMagasin,d=i.addFromMagasin,l=!!s&&s(n.id),o=a.a.useCallback((function(){return n.quantityBruteCVA>15&&n.quantityBruteCVA<=20?"yellow":n.quantityBruteCVA>10&&n.quantityBruteCVA<=15?"#ffdb4c":n.quantityBruteCVA>5&&n.quantityBruteCVA<=10?" orange":n.quantityBruteCVA>0&&n.quantityBruteCVA<=5?"#c44e14b8":0==n.quantityBruteCVA?"red":"green"}),[n]);a.a.useCallback((function(){return n.quantityCCCVA>15&&n.quantityCCCVA<=20?"yellow":n.quantityCCCVA>10&&n.quantityCCCVA<=15?"#ffdb4c":n.quantityCCCVA>5&&n.quantityCCCVA<=10?" orange":n.quantityCCCVA>0&&n.quantityCCCVA<=5?"#c44e14b8":0==n.quantityCCCVA?"red":"green"}),[n]),a.a.useCallback((function(){return oa(n)?0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)&&0==n.condval:0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)}),[n]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Wc.a.Item,{className:"mb-2",style:{width:"100%",border:"1px solid gray",padding:"10px",background:"whitesmoke",borderLeft:"10px solid ".concat(o())},children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("div",{className:" ".concat(n.id?"":"product-loading"),style:{boxShadow:n&&l?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:Object(x.jsxs)("div",{className:"d-flex justify-content-center align-items-center",children:[Object(x.jsxs)("div",{className:"d-flex flex-column mr-2 align-items-center w-20",children:[Object(x.jsx)("div",{class:"badge badge-success mb-1",style:{borderRadius:"100%"},children:n.quantityBruteCVA}),Object(x.jsx)("div",{class:"badge badge-warning mb-1",style:{borderRadius:"100%"},children:n.condval}),Object(x.jsx)("div",{class:"badge badge-info mb-1",style:{borderRadius:"100%"},children:n.quantityCC})]}),Object(x.jsx)("div",{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name})]})})]})}),Object(x.jsx)("div",{children:n.id&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{disabled:wi(n),className:"mt-3 ".concat(l?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){d&&d(n)},children:l?"Retirer":"Ajouter"})})})]})})})},ul=a.a.memo(ol),jl=function(e){var t=e.product,n=e.setRealQtt,c=(e.maxRealQtt,e.realQtt),r=Object(ie.c)(),a=function(e){r(Ad(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,bg:"whitesmoke",min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,onChange:function(e){""==e?(n(0),a(0)):(n(e),a(e))},children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},bl=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.setMaxRealQttCC,e.maxRealQttCC,e.realQtt,e.realQttCC),a=Object(ie.c)(),i=(Object(r.useRef)(),Object(ie.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,function(e){a(Ed(t.id,e))});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(i(0),n(0)):(n(1*e),i(1*e))},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},ml=function(e){var t=e.product,n=e.setRealQttLitre,c=e.realQttLitre,r=e.maxRealQttByLitre,a=Object(ie.c)(),i=function(e){a(Sd(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,value:c,defaultValue:0,onChange:function(e){""==e?(n(0),i(0)):(n(Number(e)),i(Number(e)))},max:r,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Ol=function(e){var t=e.product,n=Object(r.useState)(null===t||void 0===t?void 0:t.qttByCC),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(null===t||void 0===t?void 0:t.quantityParProduct),d=Object(O.a)(s,2),l=d[0],o=d[1],u=Object(r.useState)(0),j=Object(O.a)(u,2),b=j[0],m=j[1],h=Object(r.useState)(2e3),v=Object(O.a)(h,2),p=v[0],f=v[1],g=Object(r.useState)(2e3),N=Object(O.a)(g,2),y=N[0],C=N[1],q=Object(r.useState)(2e3),A=Object(O.a)(q,2),S=A[0],E=A[1],w=Object(ie.d)((function(e){return e.frommagasins})),P=Object(ie.c)(),V=ll(w,P),R=V.isItemFromMagasin,F=V.addFromMagasin;Object(r.useEffect)((function(){var e=function(e,t,n,c){var r=!1;if(Ci(c)){r=!0;var a=e,i=t,s=n,d=c.condval,l=c.quantityCCCVA,o=c.quantityBruteCVA,u=c.condsize,j=c.doseDefault,b=c.condml,m=!0;if(s>0&&0==a&&0==i&&s>o&&(m=!1,d=a,l=i),0==s&&a>0&&0==i){var O=0;Number(a)>Number(u)&&(O=Math.floor(Number(a)/Number(u)),d-(Number(a)-Number(u)*O)<0&&(O+=1)),o-O<0&&(m=!1,o=s,l=i)}if(0==s&&0==a&&i>0&&l-i<0){var x=0,h=0;Number(i)>Number(j)&&(x=Math.floor(Number(i)/Number(j)),l-(Number(i)-Number(j)*x)<0&&(x+=1)),Number(x)>Number(u)&&(h=Math.floor(Number(x)/Number(u)),d-(Number(x)-Number(u)*x)<0&&(h+=1)),o-h<0&&(m=!1,o=s,d=a)}if(0==s&&a>0&&i>0){var v=0,p=0;Number(i)>Number(b)?(v=Math.floor(Number(i)/Number(b)),l-(Number(i)-Number(b)*v)<0&&(v+=1)):l-Number(i)<0&&(v=1);var f=Number(a)+v;f>Number(u)?(p=Math.floor(f/Number(u)),d-(f-Number(u)*p)<0&&(p+=1)):d-f<0&&(p=1),o-p<0&&(m=!1,o=s,d=a)}if(s>0&&a>0&&0==i){var g=0;Number(a)>Number(u)?(g=Math.floor(Number(a)/Number(u)),d-(Number(a)-Number(u)*g+a)<0&&(g+=1)):d-Number(a)<0&&(g=1),o-(g+s)<0&&(m=!1,o=s,d=a)}if(s>0&&0==a&&i>0){var N=0,y=0;Number(i)>Number(b)?(N=Math.floor(Number(i)/Number(b)),l-(Number(i)-Number(b)*N)<0&&(N+=1)):l-Number(i)<0&&(N=1),Number(N)>Number(u)?(y=Math.floor(Number(N)/Number(u)),d-(Number(N)-Number(u)*y)<0&&(y+=1)):d-N<0&&(y=1),o-(y+s)<0&&(m=!1,d=a)}if(s>0&&a>0&&i>0){var C=0,q=0;Number(i)>Number(b)?(C=Math.floor(Number(i)/Number(b)),l-(Number(i)-Number(b)*C)<0&&(C+=1)):l-Number(i)<0&&(C=1);var A=Number(C)+Number(a);A>Number(u)?(q=Math.floor(A/Number(u)),d-(A-Number(u)*q)<0&&(q+=1)):d-A<0&&(q=1),o-(q+s)<0&&(m=!1)}return{normalQtt:d,normalQttCC:l,normalQttLitre:o,isSpecific:r,isValid:m}}var S=e,E=t,w=c.quantityBruteCVA,P=c.quantityCCCVA,V=c.doseDefault,R=c.quantityBruteCVA;r=!1;var F=!0;if(0==S&&E>0){var D=0,M=0;Number(E)>Number(V)?(D=Math.floor(Number(E)/Number(V)),M=Number(E)-Number(V)*D,console.log(M),P-M<0&&(D+=1)):P-Number(E)<0&&(D=1),E>P&&w-D<0&&(F=!1,w=S)}if(S>0&&0==E&&S>w&&(F=!1,P=E),S>0&&E>0){var B,T=0;Number(E)>Number(V)?(B=Math.floor(Number(E)/Number(V)),T=Number(E)-Number(V)*B,console.log(T),P-T<0&&(B+=1)):P-Number(E)<0&&(B=1),Number(w)-(Number(B)+Number(S))<0&&(F=!1),S>w&&(F=!1,P=E)}return{normalQtt:w,normalQttCC:P,normalQttLitre:R,isValid:F,isSpecific:r}}(l,a,b,t),n=e.normalQtt,c=e.normalQttCC,r=e.normalQttLitre,s=e.isSpecific;e.isValid||(alert("stock insuffisant :("),s?(m(r),E(r),o(n),f(n),i(c),C(c)):(o(n),f(n),i(c),C(c)))}),[l,a,b]);var D=!!R&&R(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:t.name}),Ci(t)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.qttbylitre&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixlitre)+" x "+t.qttbylitre+" Litre(s)"})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixqttccvente*t.qttccpvente)+" x "+t.quantityParProduct+" "+t.type})})})]}):Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixVente)+" x "+t.quantityParProduct+" "+t.type})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.qttByCC&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixParCC)+" x "+t.qttByCC+" ML"})})})]}),0!==t.condml&&0!==t.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(ml,{product:t,setRealQttLitre:m,realQttLitre:b,maxRealQttByLitre:S})," "]}),Object(x.jsxs)("div",{className:"text-inline text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:t.type}),Object(x.jsx)(jl,{product:t,setRealQtt:o,setMaxRealQtt:f,maxRealQtt:p,realQtt:l})]}),"FLACON"===t.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==t.categoryId?"DOSE":"ML"}),ye(t.name,"ita new")&&Object(x.jsx)(Nd,{product:t,setRealQttCC:i,realQttCC:a}),ye(t.name,"sovax")&&Object(x.jsx)(Cd,{setRealQttCC:i,realQttCC:a,product:t}),0==t.condml&&0==t.qttccpvente&&!ye(t.name,"sovax")&&!ye(t.name,"ita new")&&Object(x.jsx)(bl,{setRealQttCC:i,realQttCC:a,maxRealQttCC:y,product:t}),0!==t.condml&&0!==t.qttccpvente&&Object(x.jsx)(yd,{product:t,setRealQttCC:i,realQttCC:a,maxRealQttCC:y})]}),Object(x.jsx)("div",{className:"ml-2",children:D&&Object(x.jsx)("button",{onClick:function(){F&&F(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},xl={fromMagasin:{emptyOrder:"Aucune commande"}},hl=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},vl=function(){var e=Object(r.useState)("vente-cva"),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),i=Object(O.a)(a,2),s=i[0],d=(i[1],Object(r.useState)(null)),l=Object(O.a)(d,2),u=l[0],j=l[1],b=Object(o.g)(),m=Object(ie.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,h=Object(ie.c)(),v=Object(ie.d)(vn("emprunters").value),p=Object(r.useState)(!1),f=Object(O.a)(p,2),g=(f[0],f[1],new Date),N=Object(r.useState)(g),y=Object(O.a)(N,2),C=y[0],q=y[1];Object(r.useEffect)((function(){h(hn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsxs)(Ic.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{style:{width:"60%"},children:["BON DE SORTIE ("," ".concat(null===m||void 0===m?void 0:m.length," ").concat((null===m||void 0===m?void 0:m.length)>1?"articles":"article"),")"]}),Object(x.jsx)("div",{style:{width:"40%"},className:"text-right",children:Object(x.jsxs)("select",{className:"form-control input-sm",onChange:function(e){c(e.target.value)},children:[Object(x.jsx)("option",{value:"vente-cva",selected:!0,children:"Comptant"}),Object(x.jsx)("option",{value:"credit-cva",children:"Credit"})]})})]}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsxs)(Ic.a.Body,{style:{padding:2,marginTop:3,marginRight:2,marginLeft:2},children:[Object(x.jsx)("div",{className:"d-flex justify-content-end"}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return q(e.target.value)},value:C,className:"form-control"})})]}),"credit-cva"===n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{className:"form-control",onChange:function(e){j(e.target.value)},children:[Object(x.jsx)("option",{value:""}),v.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===m||void 0===m?void 0:m.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:xl.fromMagasin.emptyOrder}),null===m||void 0===m?void 0:m.map((function(e,t){return Object(x.jsx)(Ol,{product:e,basket:m,dispatch:h},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})]}),(null===m||void 0===m?void 0:m.length)>0&&Object(x.jsxs)(Ic.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"40%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge(hl(m.map((function(e){return oa(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+hl(m.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"60%"},children:m.length>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===m.length,onClick:function(){Pi(m)?alert("commande non-conforme,veuillez verifier!!"):(m.forEach((function(e){!function(e){if(Rd(e)){var t=e.quantityParProduct,n=e.qttByCC,c=e.qttbylitre,r=e.condval,a=e.quantityCCCVA,i=e.condsize,s=(e.doseDefault,e.condml);if(c>0&&0==t&&0==n&&(e.quantityBruteCVA-=c),0==c&&t>0&&0==n){var d=0,l=0;if(Number(t)>=Number(i))if(d=Math.floor(Number(t)/Number(i)),r-(l=Number(t)-Number(i)*d)<0){var o=Number(l)-Number(r);e.condval=Number(i)-Number(o),d+=1}else e.condval=r-l;else if(e.condval-Number(t)<0){var u=Number(t)-Number(e.condval),j=Number(i)-Number(u);e.condval=j,d+=1}else e.condval-=Number(t);e.quantityBruteCVA-=d}if(0==c&&0==t&&n>0){var b=0,m=0,O=0,x=0;if(Number(n)>=Number(s))if(b=Math.floor(Number(n)/Number(s)),a-(x=Number(n)-Number(s)*b)<0){var h=Number(x)-Number(a);e.quantityCCCVA=Number(s)-Number(h),b+=1}else e.quantityCCCVA=a-x;else if(Number(n)>=e.quantityCCCVA){b+=1;var v=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-v}else e.quantityCCCVA-=Number(n);if(Number(b)>=Number(i))if(m=Math.floor(Number(b)/Number(i)),r-(O=Number(b)-Number(i)*O)<0){var p=Number(O)-Number(r);e.condval=Number(i)-Number(p),m+=1}else e.condval=r-O;else if(e.condval-Number(b)<0){var f=Number(b)-Number(e.condval),g=Number(i)-Number(f);e.condval=g,m+=1}else e.condval-=Number(b);e.quantityBruteCVA-=m}if(0==c&&t>0&&n>0){var N=0,y=0,C=0,q=0;if(Number(n)>=Number(s))if(N=Math.floor(Number(n)/Number(s)),a-(q=Number(n)-Number(s)*N)<0){var A=Number(q)-Number(a);e.quantityCCCVA=Number(s)-Number(A),N+=1}else e.quantityCCCVA=Number(a)-q;else if(Number(n)>=e.quantityCCCVA){N+=1;var S=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-S}else e.quantityCCCVA-=Number(n);var E=Number(t)+N;if(E>=Number(i))if(y=Math.floor(E/Number(i)),r-(C=E-Number(i)*N)<0){var w=Number(C)-Number(r);e.condval=Number(i)-Number(w),y+=1}else e.condval=r-C;else if(e.condval-Number(E)<0){var P=Number(E)-Number(e.condval),V=Number(i)-Number(P);e.condval=V,y+=1}else e.condval-=Number(E);e.quantityBruteCVA-=y}if(c>0&&t>0&&0==n){var R=0,F=0;if(Number(t)>=Number(i))if(R=Math.floor(Number(t)/Number(i)),r-(F=Number(t)-Number(i)*R)<0){var D=Number(F)-Number(r);e.condval=Number(i)-Number(D),R+=1}else e.condval=r-F;else if(e.condval-Number(t)<0){var M=Number(t)-Number(e.condval),B=Number(i)-Number(M);e.condval=B,R+=1}else e.condval-=Number(t);e.quantityBruteCVA-=R+c}if(c>0&&0==t&&n>0){var T=0,k=0,I=0,_=0;if(Number(n)>=Number(s))if(T=Math.floor(Number(n)/Number(s)),a-(_=Number(n)-Number(s)*T)<0){var Q=Number(_)-Number(a);e.quantityCCCVA=Number(s)-Number(Q),T+=1}else e.quantityCCCVA=a-_;else if(Number(n)>=e.quantityCCCVA){T+=1;var L=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-L}else e.quantityCCCVA-=Number(n);if(Number(T)>=Number(i))if(k=Math.floor(Number(T)/Number(i)),r-(I=Number(T)-Number(i)*k)<0){var H=Number(I)-Number(r);e.condval=Number(i)-Number(H),k+=1}else e.condval=r-_;else if(e.condval-Number(T)<0){var U=Number(T)-Number(e.condval),Y=Number(i)-Number(U);e.condval=Y,k+=1}else e.condval-=Number(T);e.quantityBruteCVA-=k+c}if(c>0&&t>0&&n>0){var z=0,K=0,G=0,W=0;if(Number(n)>=Number(s))if(z=Math.floor(Number(n)/Number(s)),a-(W=Number(n)-Number(s)*z)<0){var J=Number(W)-Number(a);e.quantityCCCVA=Number(s)-Number(J),z+=1}else e.quantityCCCVA=a-W;else if(Number(n)>=e.quantityCCCVA){z+=1;var X=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-X}else e.quantityCCCVA-=Number(n);var Z=Number(z)+Number(t);if(Z>=Number(i))if(K=Math.floor(Z/Number(i)),r-(G=Z-Number(i)*K)<0){var $=Number(G)-Number(r);e.condval=Number(i)-Number($),K+=1}else e.condval=r-W;else if(e.condval-Number(Z)<0){var ee=Number(Z)-Number(e.condval),te=Number(i)-Number(ee);e.condval=te,K+=1}else e.condval-=Number(Z);e.quantityBruteCVA-=K+c}}else{var ne=e.quantityParProduct,ce=e.qttByCC,re=(e.quantityBruteCVA,e.quantityCCCVA),ae=e.doseDefault;if(0==ne&&ce>0){var ie=0,se=0;if(Number(ce)>=Number(ae))if(ie=Math.floor(Number(ce)/Number(ae)),re-(se=Number(ce)-Number(ae)*ie)<0){var de=Number(se)-Number(re);e.quantityCCCVA=Number(ae)-Number(de),ie+=1}else e.quantityCCCVA=Number(re)-se;else if(e.quantityCCCVA-Number(ce)<0){var le=Number(ce)-Number(e.quantityCCCVA);e.quantityCCCVA=Number(ae)-Number(le),ie+=1}else e.quantityCCCVA-=Number(ce);console.log(ie),e.quantityBruteCVA-=ie}if(ne>0&&0==ce&&(e.quantityBruteCVA-=ne),ne>0&&ce>0){var oe=0,ue=0;if(Number(ce)>=Number(ae))if(oe=Math.floor(Number(ce)/Number(ae)),re-(ue=Number(ce)-Number(ae)*oe)<0){var je=Number(ue)-Number(re);e.quantityCCCVA=Number(ae)-Number(je),oe+=1}else e.quantityCCCVA=Number(re)-ue;else if(e.quantityCCCVA-Number(ce)<0){var be=Number(ce)-Number(e.quantityCCCVA);e.quantityCCCVA=Number(ae)-Number(be),oe+=1}else e.quantityCCCVA-=Number(ce);var me=oe+Number(ne);e.quantityBruteCVA-=me}}}(e)})),h(hn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:m,type:n,sorte:"sortie",vaccinateurId:s,status:"vente-cva"===n,emprunterId:u,dateCom:null!=C?C:g},"add-from-magasin")),h(qd()),b.push(Q))},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){m.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),h(Os()),h(qd())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},pl=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)(),c=Object(r.useState)(""),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(2),l=Object(O.a)(d,2),o=(l[0],l[1],Object(r.useState)(!1)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=(Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useState)([])),h=Object(O.a)(m,2),v=h[0],p=h[1];Object(r.useEffect)((function(){n(hn("products").fetch())}),[]),Object(r.useEffect)((function(){return 1==j&&(n(hn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(r.useEffect)((function(){t.isFetching||p(e.filter((function(e){return!wi(e)})))}),[t]),Object(r.useEffect)((function(){p(jr(e.filter((function(e){return!wi(e)})),i))}),[i]);return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(lr.a,{children:Object(x.jsx)(ps,{})}),Object(x.jsxs)(lr.a,{children:[Object(x.jsxs)("div",{className:"d-flex align-items-center flex-row mr-2",children:[Object(x.jsx)("div",{class:"badge badge-success",style:{borderRadius:"100%"},children:"30"}),Object(x.jsx)("div",{className:"mx-2",children:":Quantit\xe9"}),Object(x.jsx)("div",{class:"badge badge-warning",style:{borderRadius:"100%"},children:"3"}),Object(x.jsx)("div",{className:"mx-2",children:":Conditionnement (ML)"}),Object(x.jsx)("div",{class:"badge badge-info",style:{borderRadius:"100%"},children:"200"}),Object(x.jsx)("div",{className:"mx-2",children:":Reste en ML"})]}),Object(x.jsxs)(Jc.a,{children:[Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsxs)(Ic.a,{className:"mt-2",children:[Object(x.jsxs)(Ic.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"Produits"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){b(!0)},children:"Mettre \xe0 jour"})})]}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsx)("div",{class:"d-flex justify-content-between align-items-center",children:Object(x.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})}),Object(x.jsx)(Wc.a,{children:Object(x.jsxs)("div",{style:{overflowY:"auto",width:"100%",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[v.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e){return Object(x.jsx)(ul,{product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)("div",{className:" py-2",children:Object(x.jsx)(vl,{setRegenerate:b})})})]})]})]})},fl=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(pl,{})})},gl=function(e){var t,n=e.product,c=Object(ie.d)((function(e){return e.frommagasins})),r=Object(ie.c)(),i=ll(c,r),s=i.isItemFromMagasin,d=i.addFromMagasin,l=!!s&&s(n.id),o=a.a.useCallback((function(){return n.quantityBruteCVA>15&&n.quantityBruteCVA<=20?"yellow":n.quantityBruteCVA>10&&n.quantityBruteCVA<=15?"#ffdb4c":n.quantityBruteCVA>5&&n.quantityBruteCVA<=10?" orange":n.quantityBruteCVA>0&&n.quantityBruteCVA<=5?"#c44e14b8":0==n.quantityBruteCVA?"red":"green"}),[n]),u=a.a.useCallback((function(){return n.quantityCCCVA>15&&n.quantityCCCVA<=20?"yellow":n.quantityCCCVA>10&&n.quantityCCCVA<=15?"#ffdb4c":n.quantityCCCVA>5&&n.quantityCCCVA<=10?" orange":n.quantityCCCVA>0&&n.quantityCCCVA<=5?"#c44e14b8":0==n.quantityCCCVA?"red":"green"}),[n]);a.a.useCallback((function(){return oa(n)?0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)&&0==n.condval:0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)}),[n]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Wc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(o())},children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(n.id?"":"product-loading"),style:{boxShadow:n&&l?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(u())}}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:n.id&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{className:"mt-3 ".concat(l?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){d&&d(n)},children:l?"Retirer":"Ajouter"})})})]})})})},Nl=a.a.memo(gl),yl=function(e){var t=e.product,n=(e.setRealQttCC,e.setRealQtt),c=(e.realQtt,e.realQttCC,Object(ie.c)()),r=function(e){c(Ad(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,bg:"whitesmoke",min:0,defaultValue:oa(t)?null===t||void 0===t?void 0:t.condval:null===t||void 0===t?void 0:t.quantityBruteCVA,onChange:function(e){""==e?(n(oa(t)?null===t||void 0===t?void 0:t.condval:null===t||void 0===t?void 0:t.quantityBruteCVA),r(oa(t)?null===t||void 0===t?void 0:t.condval:null===t||void 0===t?void 0:t.quantityBruteCVA)):(n(e),r(e))},children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Cl=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.realQtt,e.realQttCC,Object(ie.c)()),a=Object(r.useRef)(),i=(Object(ie.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,function(e){c(Ed(t.id,e))});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,step:1,ref:a,bg:"whitesmoke",defaultValue:t.quantityCCCVA,onChange:function(e){""==e?(i(t.quantityCCCVA),n(t.quantityCCCVA)):(n(1*e),i(1*e))},min:0,max:Ci(t)?null===t||void 0===t?void 0:t.condml:null===t||void 0===t?void 0:t.doseDefault,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},ql=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.realQtt,e.realQttCC,Object(ie.c)());return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"decimal",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){c(li(t.id,e))}(e),n(e)},min:0,defaultValue:t.quantityCCCVA,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Al=function(e){var t=e.product,n=Object(ie.c)();return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"decimal",w:28,bg:"whitesmoke",onChange:function(e){!function(e){n(ui(t.id,e))}(e)},min:0,defaultValue:t.quantityCCCVA,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Sl=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.realQtt,e.realQttCC,Object(ie.c)());return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",onChange:function(e){!function(e){c(oi(t.id,e))}(e),n(e)},min:0,defaultValue:t.quantityCCCVA,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},El=function(e){var t=e.product,n=(e.setRealQttCC,e.setRealQtt,e.realQtt,e.realQttCC,Object(ie.c)()),c=function(e){n(Sd(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,defaultValue:null===t||void 0===t?void 0:t.quantityBruteCVA,onChange:function(e){c(""==e?0:e)},children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},wl=function(e){var t,n=e.product,c=Object(r.useState)(null),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(null),l=Object(O.a)(d,2),o=l[0],u=l[1],j=Object(ie.d)((function(e){return e.frommagasins})),b=Object(ie.c)(),m=ll(j,b),h=m.isItemFromMagasin,v=m.addFromMagasin,p=!!h&&h(n.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name})]}),0!==n.condml&&0!==n.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(El,{product:n,setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i})," "]}),Object(x.jsxs)("div",{className:"text-inline text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:n.type}),Object(x.jsx)(yl,{product:n,setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i})]}),"FLACON"===n.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==n.categoryId?"DOSE":"ML"}),ye(n.name,"ita new")&&Object(x.jsx)(ql,{product:n,setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i}),ye(n.name,"sovax")&&Object(x.jsx)(Sl,{setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i,product:n}),0==n.condml&&0==n.qttccpvente&&!ye(n.name,"sovax")&&!ye(n.name,"ita new")&&Object(x.jsx)(Cl,{setRealQttCC:s,setRealQtt:u,realQtt:o,realQttCC:i,product:n}),0!==n.condml&&0!==n.qttccpvente&&Object(x.jsx)(Al,{product:n})]}),Object(x.jsx)("div",{className:"ml-2",children:p&&Object(x.jsx)("button",{onClick:function(){v&&v(n)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},Pl=function(){var e=Object(r.useState)("vente-cva"),t=Object(O.a)(e,2),n=t[0],c=(t[1],Object(r.useState)(1)),a=Object(O.a)(c,2),i=(a[0],a[1],Object(r.useState)(null)),s=Object(O.a)(i,2),d=s[0],l=(s[1],Object(r.useState)(null)),u=Object(O.a)(l,2),j=u[0],b=u[1],m=Object(o.g)(),h=Object(ie.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,v=Object(ie.c)(),p=Object(ie.d)(vn("emprunters").value),f=(Object(ie.d)(vn("commandes").meta),Object(ie.d)(vn("commandes").value),new Date),g=Object(r.useState)(f),N=Object(O.a)(g,2),y=N[0],C=N[1];Object(r.useEffect)((function(){v(hn("commandes").fetch()),v(hn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsx)(Ic.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:Object(x.jsxs)("div",{style:{width:"60%"},children:["Correction("," ".concat(null===h||void 0===h?void 0:h.length," ").concat((null===h||void 0===h?void 0:h.length)>1?"articles":"article"),")"]})}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsx)(Ic.a.Body,{style:{padding:2,marginTop:3,marginRight:2,marginLeft:2},children:Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de correction :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return C(e.target.value)},value:y,className:"form-control"})})]}),"credit-cva"===n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{className:"form-control",onChange:function(e){b(e.target.value)},children:[Object(x.jsx)("option",{value:""}),p.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===h||void 0===h?void 0:h.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:xl.fromMagasin.emptyOrder}),null===h||void 0===h?void 0:h.map((function(e,t){return Object(x.jsx)(wl,{product:e,basket:h,dispatch:v},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})}),(null===h||void 0===h?void 0:h.length)>0&&Object(x.jsxs)(Ic.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"30%"}}),Object(x.jsx)("div",{style:{width:"70%"},children:h.length>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===h.length,onClick:function(){v(hn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:h,commande:h,type:"correction-cva",sorte:"sortie",vaccinateurId:d,status:!0,emprunterId:j,dateCom:null!=y?y:f},"add-to-correction")),v(qd()),m.push(U)},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){h.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),v(Os()),v(qd())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})};function Vl(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)(),c=Object(r.useState)(""),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(2),l=Object(O.a)(d,2),o=(l[0],l[1],Object(r.useState)(!1)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=(Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useState)([])),h=Object(O.a)(m,2),v=h[0],p=h[1];Object(r.useEffect)((function(){n(hn("products").fetch())}),[]),Object(r.useEffect)((function(){return 1==j&&(n(hn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(r.useEffect)((function(){t.isFetching||p(e)}),[t]),Object(r.useEffect)((function(){p(jr(e,i))}),[i]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Correction",children:Object(x.jsx)(je,{title:"Correction"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)(Jc.a,{children:[Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsxs)(Ic.a,{className:"mt-2",children:[Object(x.jsxs)(Ic.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"Produits"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){s(""),b(!0)},children:"Mettre \xe0 jour"})})]}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})," "]}),Object(x.jsx)(Wc.a,{children:Object(x.jsxs)("div",{style:{overflowY:"auto",width:"100%",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[v.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e){return Object(x.jsx)(Nl,{product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)("div",{className:" py-2",children:Object(x.jsx)(Pl,{setRegenerate:b})})})]})})]})}var Rl=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},Fl=function(){var e=Object(ie.d)((function(e){return e.searchbydate}));console.log(e);var t=Object(r.useState)([e.deb,e.fin]),n=Object(O.a)(t,2),c=n[0],i=n[1],s=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("commandes").value)),d=Object(ie.d)(vn("commandes").meta),o=Object(ie.c)();Object(r.useEffect)((function(){var t,n;o((t=e.deb,n=e.fin,dn("commandes",{path:"/vente-correction?deb=".concat(t,"&fin=").concat(n),replace:!0})))}),[e.deb,e.fin]),Object(r.useEffect)((function(){null!==c&&c[0]&&o(ms(c[0],c[1]))}),[c]);var u=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",fe(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:Rl(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" ","  "]})]})}))]})}},{Header:"Actions",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(l.b,{to:"/detailcorrection/".concat(null===(t=e.row.original)||void 0===t?void 0:t.id),className:"btn btn-green btn-sm mr-2",children:"D\xe9tails"})})}}]}),[]);return Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Historique de correction",children:Object(x.jsx)(je,{title:"Historique de correction"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row",children:[Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"text-uppercase",children:"Historique de correction"}),Object(x.jsx)("p",{children:"".concat(fe(e.deb)," ->  ").concat(fe(e.fin))})]})}),Object(x.jsx)("div",{className:"col-lg-6 text-right",children:Object(x.jsx)(mr.a,{locale:"fr-FR",onChange:i,value:c})})," "]}),Object(x.jsx)(Uc,{data:s.sort((function(e,t){return t.id-e.id})),meta:d,columns:u})]})]})};var Dl=Object(o.j)((function(e){Object(o.h)();var t,n,c=Object(o.i)().id,a=Object(ie.d)(vn("commandes").value),i=Object(ie.c)();return Object(r.useEffect)((function(){i(hn("commandes").get(c))}),[c]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Historique de correction",children:Object(x.jsx)(je,{title:"Historique de correction"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)("div",{children:[a.length>0&&Object(x.jsx)("div",{className:"d-flex justify-content-between",children:Object(x.jsx)("div",{className:"my-2",children:Object(x.jsxs)("h2",{className:"my-2",children:["Date : ",fe(null===(t=a[0])||void 0===t?void 0:t.dateCom)]})})}),Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsxs)("tr",{className:"bg-thead",children:[Object(x.jsx)("td",{children:"Nom de l'article"}),Object(x.jsx)("td",{children:"Quantit\xe9"}),Object(x.jsx)("td",{children:"Sous total"})]}),a.length>0&&(null===(n=a[0])||void 0===n?void 0:n.contenu.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"40%"},children:e.name}),Object(x.jsxs)(x.Fragment,{children:[0!=e.qttbybrute&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsx)("strong",{className:"text-lowercase",children:"Depot:"}),ge(e.prixVente)," (","x"," ",e.qttbybrute,") "," = ",ge(e.prixVente*e.qttbybrute)]}),oa(e)&&Object(x.jsx)(x.Fragment,{children:0!=e.qttbylitre&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0 px-2",children:[Object(x.jsx)("strong",{children:"Litre :"}),ge(e.prixlitre)," (","x"," ",e.qttbylitre,")"," "," = ",ge(e.prixlitre*e.qttbylitre)]})}),0!=e.quantityParProduct&&Object(x.jsxs)("div",{className:"d-flex align-items-center py-0",children:[Object(x.jsxs)("strong",{className:"text-lowercase",children:[e.type,":"]}),ge(e.prixVente)," (","x"," ",e.quantityParProduct,") "," = ",ge(e.prixVente*e.quantityParProduct)]})]}),"FLACON"==e.type&&Object(x.jsx)(x.Fragment,{children:0!=e.qttByCC&&Object(x.jsxs)("div",{className:"d-flex align-items-center  py-0",children:[Object(x.jsx)("strong",{children:"ml:"})," ",ge(e.prixParCC)," ","x"," ",0!=e.qttyspecificmirror?e.qttyspecificmirror+" Dose":e.qttByCC+" ml"," "," = "," ",ge(e.prixParCC*e.qttByCC)]})}),Object(x.jsx)("td",{children:oa(e)?ge(e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre+e.prixParCC*e.qttByCC):ge(e.prixVente*e.quantityParProduct+e.prixParCC*e.qttByCC)})]})})))]})]})})]})}));function Ml(){return Ar.b().shape({name:Ar.c().required("Le champ est requis")})}var Bl=function(){Object(ie.d)(vn("fournisseurs").value);var e=Object(ie.c)(),t=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Ajouter un fournisseur",children:Object(x.jsx)(je,{title:"Ajouter un fournisseur"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Mc,{id:"add-form-fournisseur",enableReinitialize:!0,initialValues:{name:""},validations:Ml,onSubmit:function(n,c){var r=n.name;e(hn("fournisseurs").create({name:r})),t.push(z)},render:function(e){e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",label:"Nom",placeholder:"Nom"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})})};var Tl=function(){var e=Object(o.i)().id,t=Object(ie.d)(vn("fournisseurs").value),n=Object(ie.d)(vn("fournisseurs").meta),c=Object(r.useState)({name:""}),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(o.g)(),l=Object(ie.c)(),u=Object(r.useState)({}),j=Object(O.a)(u,2);return j[0],j[1],Object(r.useEffect)((function(){l(hn("fournisseurs").fetch())}),[e]),Object(r.useEffect)((function(){n.isFetching||s(null===t||void 0===t?void 0:t.find((function(t){return t.id==e})))}),[n]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer un fournisseur",children:Object(x.jsx)(je,{title:"Editer un fournisseur"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Mc,{id:"add-form-fournisseur",initialValues:{name:i.name},validations:Ml,onSubmit:function(e,t){var n=e.name;l(hn("fournisseurs").update({id:i.id,name:n})),d.push(z)},render:function(e){var t=e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"Nom",placeholder:"Nom"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})};function kl(){return Ar.b().shape({name:Ar.c().required("Le champ est requis")})}var Il=function(){Object(ie.d)(vn("categories").value);var e=Object(ie.c)(),t=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Ajouter un categorie",children:Object(x.jsx)(je,{title:"Ajouter un categorie"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Mc,{id:"add-form-categorie",enableReinitialize:!0,initialValues:{name:""},validations:kl,onSubmit:function(n,c){var r=n.name;e(hn("categories").create({name:r})),t.push(G)},render:function(e){e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",label:"Nom",placeholder:"Nom"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})})};var _l=function(){var e=Object(o.i)().id,t=Object(ie.d)(vn("categories").value),n=Object(ie.d)(vn("categories").meta),c=Object(r.useState)({name:""}),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(o.g)(),l=Object(ie.c)(),u=Object(r.useState)({}),j=Object(O.a)(u,2);return j[0],j[1],Object(r.useEffect)((function(){l(hn("categories").fetch())}),[e]),Object(r.useEffect)((function(){n.isFetching||s(null===t||void 0===t?void 0:t.find((function(t){return t.id==e})))}),[n]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer un categorie",children:Object(x.jsx)(je,{title:"Editer un categorie"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Mc,{id:"add-form-categorie",initialValues:{name:i.name},validations:kl,onSubmit:function(e,t){var n=e.name;l(hn("categories").update({id:i.id,name:n})),d.push(G)},render:function(e){var t=e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"Nom",placeholder:"Nom"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})};function Ql(){return Ar.b().shape({name:Ar.c().required("Le champ est requis")})}var Ll=function(){Object(ie.d)(vn("emprunters").value);var e=Object(ie.c)(),t=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Ajouter un personne",children:Object(x.jsx)(je,{title:"Ajouter un personne"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Mc,{id:"add-form-emprunters",enableReinitialize:!0,initialValues:{name:"",contact:""},validations:Ql,onSubmit:function(n,c){var r=n.name,a=n.contact;e(hn("emprunters").create({name:r,contact:a})),t.goBack()},render:function(e){e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",label:"Nom",placeholder:"Nom"}),Object(x.jsx)(Mc.Field.Input,{name:"contact",label:"T\xe9l\xe9phone",placeholder:"T\xe9l\xe9phone"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})})};var Hl=function(){var e=Object(o.i)().id,t=Object(ie.d)(vn("emprunters").value),n=Object(ie.d)(vn("emprunters").meta),c=Object(r.useState)({name:"",contact:""}),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(o.g)(),l=Object(ie.c)(),u=Object(r.useState)({}),j=Object(O.a)(u,2);return j[0],j[1],Object(r.useEffect)((function(){l(hn("emprunters").fetch())}),[e]),Object(r.useEffect)((function(){n.isFetching||s(null===t||void 0===t?void 0:t.find((function(t){return t.id==e})))}),[n]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer une personne",children:Object(x.jsx)(je,{title:"Editer une personne"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Mc,{id:"add-form-emprunteur",initialValues:{name:null===i||void 0===i?void 0:i.name,contact:null===i||void 0===i?void 0:i.contact},validations:Ql,onSubmit:function(e,t){var n=e.name,c=e.contact;l(hn("emprunters").update({id:i.id,name:n,contact:c})),d.goBack()},render:function(e){var t=e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"Nom",placeholder:"Nom"}),Object(x.jsx)(Mc.Field.Input,{name:"contact",value:null===t||void 0===t?void 0:t.contact,label:"T\xe9l\xe9phone",placeholder:"T\xe9l\xe9phone"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})};function Ul(){return Ar.b().shape({name:Ar.c().required("Le champ est requis")})}var Yl=function(){Object(ie.d)(vn("vaccinateurs").value);var e=Object(ie.c)(),t=Object(o.g)();return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Ajouter un vaccinateur",children:Object(x.jsx)(je,{title:"Ajouter un vaccinateur"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Mc,{id:"add-form-vaccinateurs",enableReinitialize:!0,initialValues:{name:"",contact:""},validations:Ul,onSubmit:function(n,c){var r=n.name,a=n.contact;e(hn("vaccinateurs").create({name:r,contact:a})),t.goBack()},render:function(e){e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",label:"Nom",placeholder:"Nom"}),Object(x.jsx)(Mc.Field.Input,{name:"contact",label:"T\xe9l\xe9phone",placeholder:"T\xe9l\xe9phone"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Ajouter"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})})};var zl=function(){var e=Object(o.i)().id,t=Object(ie.d)(vn("vaccinateurs").value),n=Object(ie.d)(vn("vaccinateurs").meta),c=Object(r.useState)({name:"",contact:""}),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(o.g)(),l=Object(ie.c)(),u=Object(r.useState)({}),j=Object(O.a)(u,2);return j[0],j[1],Object(r.useEffect)((function(){l(hn("vaccinateurs").fetch())}),[e]),Object(r.useEffect)((function(){n.isFetching||s(null===t||void 0===t?void 0:t.find((function(t){return t.id==e})))}),[n]),Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Editer un vaccinateur",children:Object(x.jsx)(je,{title:"Editer un vaccinateur"})}),Object(x.jsx)(xe,{children:Object(x.jsx)(Mc,{id:"add-form-vaccinateur",initialValues:{name:i.name,contact:i.contact},validations:Ul,onSubmit:function(e,t){var n=e.name,c=e.contact;l(hn("vaccinateurs").update({id:i.id,name:n,contact:c})),d.goBack()},render:function(e){var t=e.values;return Object(x.jsx)(Mc.Element,{children:Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6",children:Object(x.jsxs)("div",{className:"card",children:[Object(x.jsx)("div",{className:"card-header bg-dark text-white",children:"Information g\xe9n\xe9rale"}),Object(x.jsxs)("div",{className:"card-body",children:[Object(x.jsx)(Mc.Field.Input,{name:"name",value:null===t||void 0===t?void 0:t.name,label:"Nom",placeholder:"Nom"}),Object(x.jsx)(Mc.Field.Input,{name:"contact",value:null===t||void 0===t?void 0:t.contact,label:"T\xe9l\xe9phone",placeholder:"T\xe9l\xe9phone"}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Editer"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2 btn-sm ",type:"reset",children:"Annuler"})]})]})]})})})})}})})]})},Kl=function(e){var t,n=e.product,c=Object(ie.d)((function(e){return e.frommagasins})),r=Object(ie.c)(),i=ll(c,r),s=i.isItemFromMagasin,d=i.addFromMagasin,l=!!s&&s(n.id),o=a.a.useCallback((function(){return n.quantityBruteCVA>15&&n.quantityBruteCVA<=20?"yellow":n.quantityBruteCVA>10&&n.quantityBruteCVA<=15?"#ffdb4c":n.quantityBruteCVA>5&&n.quantityBruteCVA<=10?" orange":n.quantityBruteCVA>0&&n.quantityBruteCVA<=5?"#c44e14b8":0==n.quantityBruteCVA?"red":"green"}),[n]),u=a.a.useCallback((function(){return n.quantityCCCVA>15&&n.quantityCCCVA<=20?"yellow":n.quantityCCCVA>10&&n.quantityCCCVA<=15?"#ffdb4c":n.quantityCCCVA>5&&n.quantityCCCVA<=10?" orange":n.quantityCCCVA>0&&n.quantityCCCVA<=5?"#c44e14b8":0==n.quantityCCCVA?"red":"green"}),[n]);a.a.useCallback((function(){return oa(n)?0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)&&0==n.condval:0==n.quantityBruteCVA&&(0==n.quantityCCCVA||null==n.quantityCCCVA)}),[n]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(Wc.a.Item,{className:"mb-2 mr-3",style:{width:"100%",border:"1px solid gray",background:"whitesmoke",borderLeft:"10px solid ".concat(o())},children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{className:" ".concat(n.id?"":"product-loading"),style:{boxShadow:n&&l?"15px 10px 15px rgba(0, 0, 0, .07)":"none"},children:[Object(x.jsx)("div",{style:{width:10,height:4,background:"".concat(u())}}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:n.name}),Object(x.jsx)("div",{class:"badge badge-primary",children:null===n||void 0===n||null===(t=n.fournisseur)||void 0===t?void 0:t.name}),Object(x.jsx)("br",{})]})," "]}),Object(x.jsx)("div",{children:n.id&&Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("button",{disabled:Ss(n),className:"mt-3 ".concat(l?"btn btn-danger btn-sm":"btn btn-green btn-sm"),onClick:function(){d&&d(n)},children:l?"Retirer":"Ajouter"})})})]})})})},Gl=a.a.memo(Kl),Wl=function(e){var t=e.product,n=e.setRealQtt,c=(e.maxRealQtt,e.realQtt),r=Object(ie.c)(),a=function(e){r(Ad(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,bg:"whitesmoke",min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.quantityParProduct,onChange:function(e){""==e?(n(0),a(0)):(n(e),a(e))},children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Jl=function(e){var t=e.product,n=e.setRealQttCC,c=(e.setRealQtt,e.setMaxRealQttCC,e.maxRealQttCC,e.realQtt,e.realQttCC),a=Object(ie.c)(),i=(Object(r.useRef)(),Object(ie.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,function(e){a(Ed(t.id,e))});return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,bg:"whitesmoke",onChange:function(e){""==e?(i(0),n(0)):(n(1*e),i(1*e))},min:0,value:c,defaultValue:null===t||void 0===t?void 0:t.qttByCC,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Xl=function(e){var t=e.product,n=e.setRealQttLitre,c=e.realQttLitre,r=e.maxRealQttByLitre,a=Object(ie.c)(),i=function(e){a(Sd(t.id,e))};return Object(x.jsx)("div",{className:"basket-item-control",children:Object(x.jsxs)(Ac.c,{inputMode:"numeric",w:28,step:1,bg:"whitesmoke",min:0,value:c,defaultValue:0,onChange:function(e){""==e?(n(0),i(0)):(n(Number(e)),i(Number(e)))},max:r,children:[Object(x.jsx)(Ac.d,{}),Object(x.jsxs)(Ac.e,{children:[Object(x.jsx)(Ac.b,{}),Object(x.jsx)(Ac.a,{})]})]})})},Zl=function(e){var t=e.product,n=Object(r.useState)(null===t||void 0===t?void 0:t.qttByCC),c=Object(O.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)(null===t||void 0===t?void 0:t.quantityParProduct),d=Object(O.a)(s,2),l=d[0],o=d[1],u=Object(r.useState)(0),j=Object(O.a)(u,2),b=j[0],m=j[1],h=Object(r.useState)(2e3),v=Object(O.a)(h,2),p=v[0],f=v[1],g=Object(r.useState)(2e3),N=Object(O.a)(g,2),y=N[0],C=N[1],q=Object(r.useState)(2e3),A=Object(O.a)(q,2),S=A[0],E=A[1],w=Object(ie.d)((function(e){return e.frommagasins})),P=Object(ie.c)(),V=ll(w,P),R=V.isItemFromMagasin,F=V.addFromMagasin;Object(r.useEffect)((function(){var e=function(e,t,n,c){var r=!1;if(Ns(c)){r=!0;var a=e,i=t,s=n,d=c.condval,l=c.quantityCCCVA,o=c.quantityBruteCVA,u=c.condsize,j=c.doseDefault,b=c.condml,m=!0;if(s>0&&0==a&&0==i&&s>o&&(m=!1,d=a,l=i),0==s&&a>0&&0==i){var O=0;Number(a)>Number(u)&&(O=Math.floor(Number(a)/Number(u)),d-(Number(a)-Number(u)*O)<0&&(O+=1)),o-O<0&&(m=!1,o=s,l=i)}if(0==s&&0==a&&i>0&&l-i<0){var x=0,h=0;Number(i)>Number(j)&&(x=Math.floor(Number(i)/Number(j)),l-(Number(i)-Number(j)*x)<0&&(x+=1)),Number(x)>Number(u)&&(h=Math.floor(Number(x)/Number(u)),d-(Number(x)-Number(u)*x)<0&&(h+=1)),o-h<0&&(m=!1,o=s,d=a)}if(0==s&&a>0&&i>0){var v=0,p=0;Number(i)>Number(b)?(v=Math.floor(Number(i)/Number(b)),l-(Number(i)-Number(b)*v)<0&&(v+=1)):l-Number(i)<0&&(v=1);var f=Number(a)+v;f>Number(u)?(p=Math.floor(f/Number(u)),d-(f-Number(u)*p)<0&&(p+=1)):d-f<0&&(p=1),o-p<0&&(m=!1,o=s,d=a)}if(s>0&&a>0&&0==i){var g=0;Number(a)>Number(u)?(g=Math.floor(Number(a)/Number(u)),d-(Number(a)-Number(u)*g+a)<0&&(g+=1)):d-Number(a)<0&&(g=1),o-(g+s)<0&&(m=!1,o=s,d=a)}if(s>0&&0==a&&i>0){var N=0,y=0;Number(i)>Number(b)?(N=Math.floor(Number(i)/Number(b)),l-(Number(i)-Number(b)*N)<0&&(N+=1)):l-Number(i)<0&&(N=1),Number(N)>Number(u)?(y=Math.floor(Number(N)/Number(u)),d-(Number(N)-Number(u)*y)<0&&(y+=1)):d-N<0&&(y=1),o-(y+s)<0&&(m=!1,d=a)}if(s>0&&a>0&&i>0){var C=0,q=0;Number(i)>Number(b)?(C=Math.floor(Number(i)/Number(b)),l-(Number(i)-Number(b)*C)<0&&(C+=1)):l-Number(i)<0&&(C=1);var A=Number(C)+Number(a);A>Number(u)?(q=Math.floor(A/Number(u)),d-(A-Number(u)*q)<0&&(q+=1)):d-A<0&&(q=1),o-(q+s)<0&&(m=!1)}return{normalQtt:d,normalQttCC:l,normalQttLitre:o,isSpecific:r,isValid:m}}var S=e,E=t,w=c.quantityBruteCVA,P=c.quantityCCCVA,V=c.doseDefault,R=c.quantityBruteCVA;r=!1;var F=!0;if(0==S&&E>0){var D=0,M=0;Number(E)>Number(V)?(D=Math.floor(Number(E)/Number(V)),M=Number(E)-Number(V)*D,console.log(M),P-M<0&&(D+=1)):P-Number(E)<0&&(D=1),E>P&&w-D<0&&(F=!1,w=S)}if(S>0&&0==E&&S>w&&(F=!1,P=E),S>0&&E>0){var B,T=0;Number(E)>Number(V)?(B=Math.floor(Number(E)/Number(V)),T=Number(E)-Number(V)*B,console.log(T),P-T<0&&(B+=1)):P-Number(E)<0&&(B=1),Number(w)-(Number(B)+Number(S))<0&&(F=!1),S>w&&(F=!1,P=E)}return{normalQtt:w,normalQttCC:P,normalQttLitre:R,isValid:F,isSpecific:r}}(l,a,b,t),n=e.normalQtt,c=e.normalQttCC,r=e.normalQttLitre,s=e.isSpecific;e.isValid||(alert("stock insuffisant :("),s?(m(r),E(r),o(n),f(n),i(c),C(c)):(o(n),f(n),i(c),C(c)))}),[l,a,b]);var D=!!R&&R(t.id);return Object(x.jsx)("div",{children:Object(x.jsxs)("div",{className:"d-flex justify-content-between align-items-center border   mb-2 p-2",children:[Object(x.jsxs)("div",{style:{width:"45%"},children:[Object(x.jsx)("p",{className:"text-blue",children:t.name}),Ns(t)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.qttbylitre&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixlitre)+" x "+t.qttbylitre+" Litre(s)"})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixqttccvente*t.qttccpvente)+" x "+t.quantityParProduct+" "+t.type})})})]}):Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.quantityParProduct&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixVente)+" x "+t.quantityParProduct+" "+t.type})})}),Object(x.jsx)("p",{className:"text-lowercase",children:Object(x.jsx)("strong",{children:0!=t.qttByCC&&Object(x.jsx)("span",{style:{marginRight:"30px"},children:ge(t.prixParCC)+" x "+t.qttByCC+" ML"})})})]}),0!==t.condml&&0!==t.qttccpvente&&Object(x.jsxs)("div",{className:"text-inline text-center mr-3",children:[Object(x.jsx)("h5",{className:"mb-1 text-uppercase",children:"Litre"}),Object(x.jsx)(Xl,{product:t,setRealQttLitre:m,realQttLitre:b,maxRealQttByLitre:S})," "]}),Object(x.jsxs)("div",{className:"text-inline text-center mr-2",children:[Object(x.jsx)("h5",{className:"mb-1",children:t.type}),Object(x.jsx)(Wl,{product:t,setRealQtt:o,setMaxRealQtt:f,maxRealQtt:p,realQtt:l})]}),"FLACON"===t.type&&Object(x.jsxs)("div",{className:"text-inline text-center",children:[Object(x.jsx)("h5",{className:"mb-1",children:3==t.categoryId?"DOSE":"ML"}),ye(t.name,"ita new")&&Object(x.jsx)(Ld,{product:t,setRealQttCC:i,realQttCC:a}),ye(t.name,"sovax")&&Object(x.jsx)(Ud,{setRealQttCC:i,realQttCC:a,product:t}),0==t.condml&&0==t.qttccpvente&&!ye(t.name,"sovax")&&!ye(t.name,"ita new")&&Object(x.jsx)(Jl,{setRealQttCC:i,realQttCC:a,maxRealQttCC:y,product:t}),0!==t.condml&&0!==t.qttccpvente&&Object(x.jsx)(Hd,{product:t,setRealQttCC:i,realQttCC:a,maxRealQttCC:y})]}),Object(x.jsx)("div",{className:"ml-2",children:D&&Object(x.jsx)("button",{onClick:function(){F&&F(t)},className:"btn btn-danger btn-xs text-right",children:"X"})})]})})},$l=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},eo=function(){var e=Object(r.useState)("vente-cva"),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),i=Object(O.a)(a,2),s=i[0],d=(i[1],Object(r.useState)(null)),u=Object(O.a)(d,2),j=u[0],b=u[1],m=Object(o.g)(),h=Object(ie.d)((function(e){return{frommagasins:e.frommagasins}})).frommagasins,v=Object(ie.c)(),p=Object(ie.d)(vn("emprunters").value),f=Object(r.useState)(!1),g=Object(O.a)(f,2),N=(g[0],g[1],new Date),y=Object(r.useState)(N),C=Object(O.a)(y,2),q=C[0],A=C[1];Object(r.useEffect)((function(){v(hn("emprunters").fetch())}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(Ic.a,{children:[Object(x.jsxs)(Ic.a.Header,{className:" bg-dark py-2 text-white d-flex justify-content-between align-items-center",children:[Object(x.jsxs)("div",{style:{width:"60%"},children:["BON DE SORTIE ("," ".concat(null===h||void 0===h?void 0:h.length," ").concat((null===h||void 0===h?void 0:h.length)>1?"articles":"article"),")"]}),Object(x.jsx)("div",{style:{width:"40%"},className:"text-right",children:Object(x.jsxs)("select",{className:"form-control input-sm",onChange:function(e){c(e.target.value)},children:[Object(x.jsx)("option",{value:"vente-cva",selected:!0,children:"Comptant"}),Object(x.jsx)("option",{value:"credit-cva",children:"Credit"})]})})]}),Object(x.jsxs)("div",{className:"commande-vente",children:[Object(x.jsxs)(Ic.a.Body,{style:{padding:2,marginTop:3,marginRight:2,marginLeft:2},children:[Object(x.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(x.jsx)(l.b,{className:"btn btn-danger mb-2 mr-2 btn-sm",to:"/historique/vente/vendeur/credit-cva",children:"CREDITS"}),Object(x.jsx)(l.b,{className:"btn btn-primary mb-2 btn-sm text-uppercase",to:"/historique/vente/vendeur/vente-cva",children:"Voir l'historique de vente"})]}),Object(x.jsxs)("div",{style:{overflowY:"auto",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"form-group",children:[Object(x.jsx)("label",{children:"Date de sortie :"}),Object(x.jsx)("div",{children:Object(x.jsx)("input",{type:"date",onChange:function(e){return A(e.target.value)},value:q,className:"form-control"})})]}),"credit-cva"===n&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("label",{children:"Crediteur:"}),Object(x.jsxs)("select",{className:"form-control",onChange:function(e){b(e.target.value)},children:[Object(x.jsx)("option",{value:""}),p.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]}),(null===h||void 0===h?void 0:h.length)<=0&&Object(x.jsx)("div",{className:"alert alert-success ",children:xl.fromMagasin.emptyOrder}),null===h||void 0===h?void 0:h.map((function(e,t){return Object(x.jsx)(Zl,{product:e,basket:h,dispatch:v},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(t))}))]})]}),(null===h||void 0===h?void 0:h.length)>0&&Object(x.jsxs)(Ic.a.Footer,{className:"d-flex align-items-center justify-content-between",children:[Object(x.jsx)("div",{style:{width:"40%"},children:Object(x.jsx)("h2",{className:"p-2 text-uppercase bg-primary",children:Object(x.jsxs)("strong",{"data-test-id":"total-price-orders",children:["Total:",ge($l(h.map((function(e){return oa(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixlitre*e.qttbylitre:e.prixVente*e.quantityParProduct})))+$l(h.map((function(e){return e.prixParCC*e.qttByCC}))))]})})}),Object(x.jsx)("div",{style:{width:"60%"},children:h.length>0&&Object(x.jsxs)("div",{className:"d-flex text-right align-items-end justify-content-end",children:[Object(x.jsx)("button",{className:"btn btn-green btn-sm mr-2",disabled:0===h.length,onClick:function(){Es(h)?alert("commande non-conforme,veuillez verifier!!"):(h.forEach((function(e){!function(e){if(Gd(e)){var t=e.quantityParProduct,n=e.qttByCC,c=e.qttbylitre,r=e.condval,a=e.quantityCCCVA,i=e.condsize,s=(e.doseDefault,e.condml);if(c>0&&0==t&&0==n&&(e.quantityBruteCVA-=c),0==c&&t>0&&0==n){var d=0,l=0;if(Number(t)>=Number(i))if(d=Math.floor(Number(t)/Number(i)),r-(l=Number(t)-Number(i)*d)<0){var o=Number(l)-Number(r);e.condval=Number(i)-Number(o),d+=1}else e.condval=r-l;else if(e.condval-Number(t)<0){var u=Number(t)-Number(e.condval),j=Number(i)-Number(u);e.condval=j,d+=1}else e.condval-=Number(t);e.quantityBruteCVA-=d}if(0==c&&0==t&&n>0){var b=0,m=0,O=0,x=0;if(Number(n)>=Number(s))if(b=Math.floor(Number(n)/Number(s)),a-(x=Number(n)-Number(s)*b)<0){var h=Number(x)-Number(a);e.quantityCCCVA=Number(s)-Number(h),b+=1}else e.quantityCCCVA=a-x;else if(Number(n)>=e.quantityCCCVA){b+=1;var v=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-v}else e.quantityCCCVA-=Number(n);if(Number(b)>=Number(i))if(m=Math.floor(Number(b)/Number(i)),r-(O=Number(b)-Number(i)*O)<0){var p=Number(O)-Number(r);e.condval=Number(i)-Number(p),m+=1}else e.condval=r-O;else if(e.condval-Number(b)<0){var f=Number(b)-Number(e.condval),g=Number(i)-Number(f);e.condval=g,m+=1}else e.condval-=Number(b);e.quantityBruteCVA-=m}if(0==c&&t>0&&n>0){var N=0,y=0,C=0,q=0;if(Number(n)>=Number(s))if(N=Math.floor(Number(n)/Number(s)),a-(q=Number(n)-Number(s)*N)<0){var A=Number(q)-Number(a);e.quantityCCCVA=Number(s)-Number(A),N+=1}else e.quantityCCCVA=Number(a)-q;else if(Number(n)>=e.quantityCCCVA){N+=1;var S=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-S}else e.quantityCCCVA-=Number(n);var E=Number(t)+N;if(E>=Number(i))if(y=Math.floor(E/Number(i)),r-(C=E-Number(i)*N)<0){var w=Number(C)-Number(r);e.condval=Number(i)-Number(w),y+=1}else e.condval=r-C;else if(e.condval-Number(E)<0){var P=Number(E)-Number(e.condval),V=Number(i)-Number(P);e.condval=V,y+=1}else e.condval-=Number(E);e.quantityBruteCVA-=y}if(c>0&&t>0&&0==n){var R=0,F=0;if(Number(t)>=Number(i))if(R=Math.floor(Number(t)/Number(i)),r-(F=Number(t)-Number(i)*R)<0){var D=Number(F)-Number(r);e.condval=Number(i)-Number(D),R+=1}else e.condval=r-F;else if(e.condval-Number(t)<0){var M=Number(t)-Number(e.condval),B=Number(i)-Number(M);e.condval=B,R+=1}else e.condval-=Number(t);e.quantityBruteCVA-=R+c}if(c>0&&0==t&&n>0){var T=0,k=0,I=0,_=0;if(Number(n)>=Number(s))if(T=Math.floor(Number(n)/Number(s)),a-(_=Number(n)-Number(s)*T)<0){var Q=Number(_)-Number(a);e.quantityCCCVA=Number(s)-Number(Q),T+=1}else e.quantityCCCVA=a-_;else if(Number(n)>=e.quantityCCCVA){T+=1;var L=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-L}else e.quantityCCCVA-=Number(n);if(Number(T)>=Number(i))if(k=Math.floor(Number(T)/Number(i)),r-(I=Number(T)-Number(i)*k)<0){var H=Number(I)-Number(r);e.condval=Number(i)-Number(H),k+=1}else e.condval=r-_;else if(e.condval-Number(T)<0){var U=Number(T)-Number(e.condval),Y=Number(i)-Number(U);e.condval=Y,k+=1}else e.condval-=Number(T);e.quantityBruteCVA-=k+c}if(c>0&&t>0&&n>0){var z=0,K=0,G=0,W=0;if(Number(n)>=Number(s))if(z=Math.floor(Number(n)/Number(s)),a-(W=Number(n)-Number(s)*z)<0){var J=Number(W)-Number(a);e.quantityCCCVA=Number(s)-Number(J),z+=1}else e.quantityCCCVA=a-W;else if(Number(n)>=e.quantityCCCVA){z+=1;var X=Number(n)-e.quantityCCCVA;e.quantityCCCVA=Number(s)-X}else e.quantityCCCVA-=Number(n);var Z=Number(z)+Number(t);if(Z>=Number(i))if(K=Math.floor(Z/Number(i)),r-(G=Z-Number(i)*K)<0){var $=Number(G)-Number(r);e.condval=Number(i)-Number($),K+=1}else e.condval=r-W;else if(e.condval-Number(Z)<0){var ee=Number(Z)-Number(e.condval),te=Number(i)-Number(ee);e.condval=te,K+=1}else e.condval-=Number(Z);e.quantityBruteCVA-=K+c}}else{var ne=e.quantityParProduct,ce=e.qttByCC,re=(e.quantityBruteCVA,e.quantityCCCVA),ae=e.doseDefault;if(0==ne&&ce>0){var ie=0,se=0;if(Number(ce)>=Number(ae))if(ie=Math.floor(Number(ce)/Number(ae)),re-(se=Number(ce)-Number(ae)*ie)<0){var de=Number(se)-Number(re);e.quantityCCCVA=Number(ae)-Number(de),ie+=1}else e.quantityCCCVA=Number(re)-se;else if(e.quantityCCCVA-Number(ce)<0){var le=Number(ce)-Number(e.quantityCCCVA);e.quantityCCCVA=Number(ae)-Number(le),ie+=1}else e.quantityCCCVA-=Number(ce);console.log(ie),e.quantityBruteCVA-=ie}if(ne>0&&0==ce&&(e.quantityBruteCVA-=ne),ne>0&&ce>0){var oe=0,ue=0;if(Number(ce)>=Number(ae))if(oe=Math.floor(Number(ce)/Number(ae)),re-(ue=Number(ce)-Number(ae)*oe)<0){var je=Number(ue)-Number(re);e.quantityCCCVA=Number(ae)-Number(je),oe+=1}else e.quantityCCCVA=Number(re)-ue;else if(e.quantityCCCVA-Number(ce)<0){var be=Number(ce)-Number(e.quantityCCCVA);e.quantityCCCVA=Number(ae)-Number(be),oe+=1}else e.quantityCCCVA-=Number(ce);var me=oe+Number(ne);e.quantityBruteCVA-=me}}}(e)})),v(hn("commandes").createTransaction({id:Math.floor(Date.now()/1e3),contenu:h,type:n,sorte:"sortie",vaccinateurId:s,status:"vente-cva"===n,emprunterId:j,dateCom:null!=q?q:N},"add-from-magasin")),v(qd()),m.push(Q))},type:"button",children:"Valider l'operation"}),Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){h.forEach((function(e){e.quantityParProduct=0,e.qttByCC=0})),v(Os()),v(qd())},type:"button",children:Object(x.jsx)("span",{children:"Annuler"})})]})})]})]})]})})},to=new Date;function no(){var e=Object(r.useState)({hours:to.getHours(),minutes:to.getMinutes(),seconds:to.getSeconds()}),t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=setInterval((function(){var e=new Date;c({hours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),seconds:e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()})}),1e3);return function(){return clearInterval(e)}}),[]),Object(x.jsxs)("div",{className:"bg-dark py-1 px-4 text-center",children:[Object(x.jsxs)("h1",{style:{fontSize:"20px"},children:[n.hours," : ",n.minutes," : ",n.seconds]}),Object(x.jsx)("h4",{className:"bg-thead p-1",children:fe(to)})]})}se.reactFastCompare;var co=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)(),c=Object(r.useState)(""),a=Object(O.a)(c,2),i=a[0],s=a[1],d=Object(r.useState)(2),l=Object(O.a)(d,2),o=(l[0],l[1],Object(r.useState)(!1)),u=Object(O.a)(o,2),j=u[0],b=u[1],m=(Object(r.useRef)(null),Object(r.useRef)(null),Object(r.useState)([])),h=Object(O.a)(m,2),v=h[0],p=h[1];Object(r.useEffect)((function(){n(hn("products").fetch())}),[]),Object(r.useEffect)((function(){return 1==j&&(n(hn("products").fetch()),b(!1)),function(){b(!1)}}),[j]),Object(r.useEffect)((function(){t.isFetching||p(e.filter((function(e){return!Ss(e)})))}),[t]),Object(r.useEffect)((function(){p(jr(e.filter((function(e){return!Ss(e)})),i))}),[i]);return Object(x.jsxs)(x.Fragment,{children:[" ",Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Vente du magasin",children:Object(x.jsx)(je,{title:"Vente du magasin"})}),Object(x.jsx)(xe,{children:Object(x.jsxs)(Jc.a,{children:[Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsxs)(Ic.a,{className:"mt-2",children:[Object(x.jsxs)(Ic.a.Header,{className:"bg-dark p-2 text-white d-flex text-uppercase justify-content-between align-items-center",children:[Object(x.jsx)("div",{style:{width:"60%"},children:"Produits"}),Object(x.jsx)("div",{children:Object(x.jsx)("button",{className:"btn btn-green btn-sm",onClick:function(){b(!0)},children:"Mettre \xe0 jour"})})]}),Object(x.jsxs)(Ic.a.Body,{children:[Object(x.jsxs)("div",{class:"d-flex justify-content-between align-items-center",children:[Object(x.jsx)("input",{type:"text",onChange:function(e){s(e.target.value)},placeholder:"Nom du produit",className:"form-control mb-2"})," "]}),Object(x.jsx)(Wc.a,{children:Object(x.jsxs)("div",{style:{overflowY:"auto",width:"100%",height:"350px",maxHeight:"350px",overflowX:"hidden"},children:[Object(x.jsxs)("div",{class:"d-flex justify-content-start flex-wrap",children:[v.sort((function(e,t){return t.quantityBruteCVA-e.quantityBruteCVA})).map((function(e){return Object(x.jsx)(Gl,{product:e})})),0==v.length&&"Aucune enregistrement trouv\xe9"]})," "]})})]})]})}),Object(x.jsx)(Xc.a,{xs:6,children:Object(x.jsx)("div",{className:" py-2",children:Object(x.jsx)(eo,{setRegenerate:b})})})]})})]})]})},ro=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(co,{})})};function ao(){return Ar.b().shape({prices:Ar.a().of(Ar.b().shape({}))})}var io=function(){var e=Object(Bn.e)(),t=e.values;e.setValues;return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("table",{className:"table table-bordered",children:[Object(x.jsx)("thead",{className:" bg-thead",children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date debut"}),Object(x.jsx)("th",{children:"Date fin"}),Object(x.jsx)("th",{style:{width:"60%"},children:"Prix"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsxs)("tbody",{children:[0==(null===t||void 0===t?void 0:t.prices.length)&&Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colspan:4,className:"text-center",children:"Aucun prix ajout\xe9"})}),Object(x.jsx)(Bn.b,{name:"prices",render:function(e){var n;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colspan:4,children:Object(x.jsx)("button",{className:"bg-primary py-1 px-2",onClick:function(){return e.push("")},children:"Ajouter plus"})})}),(null===t||void 0===t?void 0:t.prices)&&(null===t||void 0===t||null===(n=t.prices)||void 0===n?void 0:n.map((function(t,n){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)(Mc.Field.Date,{placeholder:"date de debut.",name:"prices.".concat(n,".deb")})}),Object(x.jsx)("td",{children:Object(x.jsx)(Mc.Field.Date,{placeholder:"date de debut.",name:"prices.".concat(n,".fin")})}),Object(x.jsxs)("td",{className:"d-flex flex-row justify-content-between",children:[Object(x.jsx)("div",{className:"mr-2",children:Object(x.jsx)(Mc.Field.Input,{placeholder:"Prix du litre",name:"prices.".concat(n,".prixlitre")})}),Object(x.jsx)("div",{className:"mr-2",children:Object(x.jsx)(Mc.Field.Input,{placeholder:"prix par quantit\xe9",name:"prices.".concat(n,".montant")})}),Object(x.jsx)(Mc.Field.Input,{placeholder:"prix par cc",name:"prices.".concat(n,".prixparcc")})]}),Object(x.jsx)("td",{className:"text-center",children:Object(x.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return e.remove(n)},children:"Retirer"})})]})})))]})}})]})]})})};function so(){var e,t,n=Object(o.i)().id,c=Object(ie.c)(),i=Object(r.useState)("vente-magasin"),s=Object(O.a)(i,2),d=(s[0],s[1],Object(ie.d)(vn("products").value)),l=Object(ie.d)(vn("commandes").meta);Object(r.useEffect)((function(){c(hn("products").get(n))}),[]);var u=Object(r.useCallback)((function(e){c(hn("commandes").createTransaction(Object(Ee.a)(Object(Ee.a)({},e),{},{id:n}),"get-commande-bw"))}),[]),j=a.a.useMemo((function(){return[{Header:"Date D\xe9but",accessor:"deb"},{Header:"Date Fin",accessor:"fin"},{Header:"Informations",Cell:function(e){var t;return Object(x.jsxs)("table",{className:"table text-center",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Date"}),Object(x.jsx)("th",{children:"Ancien prix du litre"}),Object(x.jsx)("th",{children:"Nouvel prix du litre "}),Object(x.jsx)("th",{children:"Ancien prix en quantit\xe9"}),Object(x.jsx)("th",{children:"Nouvel prix en quantit\xe9"}),Object(x.jsx)("th",{children:"Ancien prix en ML"}),Object(x.jsx)("th",{children:"Nouvel prix en ML"})]})}),Object(x.jsx)("tbody",{children:null===(t=e.row.original)||void 0===t?void 0:t.data.map((function(e,t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:fe(e.createdAt)}),Object(x.jsx)("td",{children:"no"!=e.lastPriceLitre?ge(""!=e.lastPriceLitre?e.lastPriceLitre:0):""}),Object(x.jsx)("td",{children:"no"!=e.newPriceLitre?ge(e.newPriceLitre):""}),Object(x.jsx)("td",{children:ge(e.lastPrice)}),Object(x.jsx)("td",{children:ge(e.newPrice)}),Object(x.jsx)("td",{children:"no"!=e.lastPriceCC?ge(e.lastPriceCC):""}),Object(x.jsx)("td",{children:"no"!=e.newPriceCC?ge(e.newPriceCC):""})]},t)}))})]})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Rectification de prix",children:Object(x.jsx)(je,{title:"Rectification de prix"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[Object(x.jsx)("h2",{className:"mb-2",style:{fontSize:20},children:null===(e=d[0])||void 0===e?void 0:e.name}),Object(x.jsx)("div",{})]}),Object(x.jsx)(Mc,{enableReinitialize:!0,initialValues:{type:"vente-magasin",prices:[]},validations:ao,onSubmit:u,render:function(e){e.values;return Object(x.jsxs)(Mc.Element,{children:[Object(x.jsx)("div",{style:{width:"30%"},children:Object(x.jsx)(Mc.Field.Select,{name:"type",label:"Type de sortie",emptyValue:!1,valueKey:"name",disabled:!1,defaultValue:1,options:[{id:1,name:"Vente du Magasin"},{id:2,name:"Facture"}]})}),Object(x.jsx)(io,{}),Object(x.jsxs)("div",{className:"mt-3",children:[Object(x.jsx)("button",{className:"btn btn-green  btn-sm ",type:"submit",children:"Appliquer les changements"}),Object(x.jsx)("button",{className:"btn btn-danger ml-2  btn-sm ",type:"reset",children:"Annuler"})]})]})}}),Object(x.jsx)("h2",{className:"my-3",children:"Recapitulatif des changements"}),Object(x.jsx)(Uc,{filter:!1,data:null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.recap,meta:l,columns:j})]})]})})}var lo=function(){var e=Object(ie.d)(vn("products").value),t=Object(ie.d)(vn("products").meta),n=Object(ie.c)();Object(r.useEffect)((function(){n(hn("products").fetch())}),[]);var c=a.a.useMemo((function(){return[{Header:"Nom de l'article",accessor:"name"},{Header:"Fournisseur",Cell:function(e){var t,n;return Object(x.jsx)("div",{children:Object(x.jsx)("h3",{className:"badge badge-primary",children:null===(t=e.row.original)||void 0===t||null===(n=t.fournisseur)||void 0===n?void 0:n.name})})}},{Header:"Quantit\xe9",accessor:"quantityBruteCVA"},{Header:"Conditionnement (ML)",accessor:"condval"},{Header:"Reste en ML",accessor:"quantityCC",Cell:function(e){var t,n;return Object(x.jsx)("div",{children:null==(null===(t=e.row.original)||void 0===t?void 0:t.quantityCCCVA)?0:null===(n=e.row.original)||void 0===n?void 0:n.quantityCCCVA})}}]}));return Object(x.jsxs)(lr.a,{children:[Object(x.jsx)(ps,{}),Object(x.jsx)("div",{className:"row",children:Object(x.jsx)("div",{className:"col-lg-6 text-right"})}),Object(x.jsx)(Uc,{data:e,meta:t,columns:c})]})};var oo=function(e){for(var t=0;t<e.length;++t)return e[t].correction>0||e[t].correctionml>0},uo=function(){var e=ae()().isoWeekday(1).startOf("week"),t=ae()().endOf("week"),n=Object(r.useState)(e),c=Object(O.a)(n,2),i=c[0],s=c[1],d=Object(r.useState)(t),l=Object(O.a)(d,2),o=l[0],u=l[1],j=(Object(r.useRef)(null),Object(r.useRef)(null),Object(ie.d)(vn("commandes").value)),b=Object(ie.d)(vn("commandes").meta),m=Object(r.useState)([e,t]),h=Object(O.a)(m,2),v=h[0],p=h[1],f=Object(ie.c)();Object(r.useEffect)((function(){f(function(e,t,n){return dn("commandes",{path:"/operation-vente-cva?deb=".concat(e,"&fin=").concat(t),replace:!0})}(i,o))}),[i,o]),Object(r.useEffect)((function(){null!==v?(v[0]&&s(v[0]),v[1]&&u(v[1])):(s(e),u(t))}),[v]);var g,N=function(e){return e&&0!==(null===e||void 0===e?void 0:e.length)?e.reduce((function(e,t){return e+t}),0):0},y=function(e){return N(null===e||void 0===e?void 0:e.map((function(e){return Ci(e)?e.prixqttccvente*e.quantityParProduct*e.qttccpvente+e.prixVente*e.qttbylitre:e.prixVente*e.quantityParProduct})))+N(null===e||void 0===e?void 0:e.map((function(e){return e.prixParCC*e.qttByCC})))},C=a.a.useMemo((function(){return[{Header:"Date",Cell:function(e){var t;return Object(x.jsx)(x.Fragment,{children:fe(null===(t=e.row.original)||void 0===t?void 0:t.dateCom)})}},{Header:"Produits",Cell:function(e){var t,n,c,r,a,i;return Object(x.jsxs)("div",{style:{width:"350px"},children:[1==(null===(t=e.row.original)||void 0===t?void 0:t.isdeleted)&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"badge badge-danger",children:"Supprim\xe9"}),Object(x.jsxs)("div",{className:"text text-danger",children:["Date de suppression :"," ",fe(null===(n=e.row.original)||void 0===n?void 0:n.deletedat)]})]}),null==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)&&Object(x.jsx)("p",{children:oo(null===(r=e.row.original)||void 0===r?void 0:r.contenu)&&Object(x.jsx)("div",{className:"badge badge-warning",children:"Modifi\xe9"})}),null===(a=e.row.original)||void 0===a||null===(i=a.contenu)||void 0===i?void 0:i.map((function(t){var n,c;return Object(x.jsxs)("span",{children:[Object(x.jsx)("span",{style:{background:"white",color:1==(null===(n=e.row.original)||void 0===n?void 0:n.isdeleted)?"red":"inherit",padding:2},children:t.name}),Object(x.jsxs)("span",{style:{color:1==(null===(c=e.row.original)||void 0===c?void 0:c.isdeleted)?"red":"inherit"},children:[" "," || "]})]})}))]})}},{Header:"Total",Cell:function(e){var t;return Object(x.jsx)("div",{children:ge(y(null===(t=e.row.original)||void 0===t?void 0:t.contenu))})}}]}),[]);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(me,{children:[Object(x.jsx)(oe,{title:"Operations sur les commandes",children:Object(x.jsx)(je,{title:"Operations sur les commandes"})}),Object(x.jsxs)(xe,{children:[Object(x.jsxs)("div",{className:"row my-2",children:[Object(x.jsx)("div",{className:"col-lg-8",children:Object(x.jsxs)("div",{children:[i&&o&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{children:"Operations sur les commandes"}),Object(x.jsxs)("span",{children:["Du: ",fe(i)," Au ",fe(o)]})]})," "]})}),Object(x.jsx)("div",{className:"col-lg-4 text-right",children:Object(x.jsx)("div",{children:Object(x.jsx)(ve.a,{locale:"fr-FR",onChange:p,value:v})})})]}),Object(x.jsx)(Uc,{filter:!1,data:(g=j,g.filter((function(e){return e.deletedat!=ae()("2021-01-01")}))),meta:b,columns:C})]})]})})};var jo,bo=function(){return Object(ie.c)(),Object(x.jsx)(l.a,{children:Object(x.jsxs)(o.d,{children:[Object(x.jsx)(Ls,{path:"/",exact:!0,component:yn}),Object(x.jsx)(Ls,{path:g,component:sd}),Object(x.jsx)(Ls,{path:f,component:jd}),Object(x.jsx)(Ls,{path:p,component:md}),Object(x.jsx)(zi,{path:"/vendeur",component:fl}),Object(x.jsx)(zi,{path:"/stock-cva",component:lo}),Object(x.jsx)(zi,{path:"/detailvendeur/:id",component:Bs}),Object(x.jsx)(zi,{path:"/vendeur-commande/:id",component:kd}),Object(x.jsx)(zi,{path:Q,component:gs}),Object(x.jsx)(Ls,{path:"/vendre/in/admin",component:ro}),Object(x.jsx)(Ls,{path:"/detailvendeuradmin/:id",component:ks}),Object(x.jsx)(Ls,{path:"/vendeur-admin-commande/:id",component:el}),Object(x.jsx)(Ls,{path:ee,component:Vs}),Object(x.jsx)(Ls,{path:"/changer/prix/:id",component:so}),Object(x.jsx)(Ls,{path:"/approv",component:Mn}),Object(x.jsx)(Ls,{path:C,component:qr}),Object(x.jsx)(Ls,{path:"/para/suppl",component:Cr}),Object(x.jsx)(Ls,{path:y,component:kr}),Object(x.jsx)(Ls,{path:"/bon-commande-depot",component:nd}),Object(x.jsx)(Ls,{path:"/product/edit/:id",component:Mr}),Object(x.jsx)(Ls,{path:N,component:Fr}),Object(x.jsx)(Ls,{path:"/journal",component:yr}),Object(x.jsx)(Ls,{path:q,component:Qr}),Object(x.jsx)(Ls,{path:A,component:xr}),Object(x.jsx)(Ls,{path:w,component:Ra}),Object(x.jsx)(Ls,{path:S,component:hr}),Object(x.jsx)(Ls,{path:E,component:Nr}),Object(x.jsx)(Ls,{path:D,component:nd}),Object(x.jsx)(Ls,{path:P,component:_r}),Object(x.jsx)(Ls,{path:V,component:Ir}),Object(x.jsx)(Ls,{path:F,component:Fa}),Object(x.jsx)(Ls,{path:"/editer/commande/:id",component:Mi}),Object(x.jsx)(Ls,{path:R,component:Hr}),Object(x.jsx)(Ls,{path:"/detail/:id",component:pr}),Object(x.jsx)(Ls,{path:"/depot/detail/:id",exact:!0,component:gr}),Object(x.jsx)(Ls,{path:"/product/detail/:id",component:Dr}),Object(x.jsx)(Ls,{path:"/b/sortie",component:Gc}),Object(x.jsx)(Ls,{path:"/add/prod",component:Bc}),Object(x.jsx)(Ls,{path:M,component:qa}),Object(x.jsx)(Ls,{path:"/editer/facture/:id",exact:!0,component:Xs}),Object(x.jsx)(Ls,{path:B,component:Kc}),Object(x.jsx)(Ls,{path:"/approvis/detail/:id",exact:!0,component:_c}),Object(x.jsx)(Ls,{path:T,component:Li}),Object(x.jsx)(Ls,{path:k,component:Hi}),Object(x.jsx)(Ls,{path:I,component:ss}),Object(x.jsx)(Ls,{path:"/depot/to/magasin/edit/:id",component:dl}),Object(x.jsx)(Ls,{path:_,component:os}),Object(x.jsx)(Ls,{path:"/depot/to/magasin/detail/:id",component:hd}),Object(x.jsx)(Ls,{path:H,component:Rs}),Object(x.jsx)(Ls,{path:L,component:Ds}),Object(x.jsx)(Ls,{path:"/magasin/detail/vente/:id",component:pd}),Object(x.jsx)(Ls,{path:U,component:Vl}),Object(x.jsx)(Ls,{path:Y,component:Fl}),Object(x.jsx)(Ls,{path:"/detailcorrection/:id",component:Dl}),Object(x.jsx)(Ls,{path:z,component:wa}),Object(x.jsx)(Ls,{path:K,component:Bl}),Object(x.jsx)(Ls,{path:"/fournisseurs/edit/:id",component:Tl}),Object(x.jsx)(Ls,{path:G,component:Ea}),Object(x.jsx)(Ls,{path:W,component:Il}),Object(x.jsx)(Ls,{path:"/categories/edit/:id",component:_l}),Object(x.jsx)(Ls,{path:J,component:Va}),Object(x.jsx)(Ls,{path:X,component:Ll}),Object(x.jsx)(Ls,{path:"/emprunters/edit/:id",component:Hl}),Object(x.jsx)(Ls,{path:Z,component:Pa}),Object(x.jsx)(Ls,{path:"/opcommandes",component:uo}),Object(x.jsx)(Ls,{path:$,component:Yl}),Object(x.jsx)(Ls,{path:"/vaccinateurs/edit/:id",component:zl})]})})},mo=(c(933),c(506)),Oo=xn("products",{key:"id"}),xo=JSON.parse(localStorage.getItem("user")),ho=xo?{isLoggedIn:!0,user:xo}:{isLoggedIn:!1,user:null},vo=xn("commandes"),po=xn("fournisseurs"),fo=xn("emprunters"),go=xn("vaccinateurs"),No=xn("categories"),yo=xn("approvis"),Co=xn("parametres"),qo={shipping:{},payment:{type:"",name:"",cardnumber:"",expiry:"",ccv:""}},Ao=xn("sortiedepots"),So=Object(jn.b)({searchbydate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{deb:ae()().isoWeekday(1).startOf("week"),fin:ae()().endOf("week")},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case js:return t.payload;case bs:return{deb:ae()().isoWeekday(1).startOf("week"),fin:ae()().endOf("week")};default:return e}},count:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{counter:0},t=arguments.length>1?arguments[1]:void 0;return"ADD"===t.type?Object(Ee.a)(Object(Ee.a)({},e),{},{counter:e.counter+1}):e},auth:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ho,c=arguments.length>1?arguments[1]:void 0,r=c.type,a=c.payload;switch(r){case Sn:return Object(Ee.a)(Object(Ee.a)({},n),{},{isLoggedIn:!0,user:null===(e=a.user)||void 0===e?void 0:e.user,success:a.success,error:null});case En:return Object(Ee.a)(Object(Ee.a)({},n),{},{isLoggedIn:!1,user:null,success:null,error:a.error});case wn:return Object(Ee.a)(Object(Ee.a)({},n),{},{isLoggedIn:!0,user:null===(t=a.user)||void 0===t?void 0:t.user,success:a.success,error:null});case Pn:return Object(Ee.a)(Object(Ee.a)({},n),{},{isLoggedIn:!1,user:null,token:null,success:null,error:a.error});case Vn:return Object(Ee.a)(Object(Ee.a)({},n),{},{isLoggedIn:!1,user:null,token:null});default:return n}},products:Oo,realproducts:Oo,categories:No,fournisseurs:po,emprunters:fo,vaccinateurs:go,commandes:vo,commandesclone:vo,basket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zc:return t.payload;case $c:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(ce.a)(e));case er:return e.filter((function(e){return e.id!==t.payload}));case tr:return[];case nr:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct+=1),e.id==t.payload.id&&e.doseRestantEnMg>=1e3*e.doseDefault?e.doseRestantEnMg+=1e3*e.doseDefault:e.doseRestantEnMg=e.doseRestantEnMg,e}));case rr:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCC+=1),e.id==t.payload.id&&e.doseRestantEnMg>=1e3*e.doseDefault?e.doseRestantEnMg+=1e3:e.doseRestantEnMg=e.doseRestantEnMg,e}));case cr:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct-=1),e.id==t.payload.id&&e.doseRestantEnMg>=1e3*e.doseDefault?e.doseRestantEnMg-=1e3*e.doseDefault:e.doseRestantEnMg=e.doseRestantEnMg,e}));case ar:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCC-=1),e.id==t.payload.id&&e.doseRestantEnMg>=e.doseDefault?e.doseRestantEnMg-=1e3:e.doseRestantEnMg=e.doseRestantEnMg,e}));default:return e}},approvisionnements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Kr:return t.payload;case Gr:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(ce.a)(e));case Wr:return e.filter((function(e){return e.id!==t.payload}));case Jr:return[];case Xr:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct+=1),e}));case $r:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct=Number(t.payload.qtt)),e}));case Zr:return e.map((function(e){return e.id==t.payload.id&&(e.quantityParProduct-=1),e}));case ea:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=t.payload.value),e}));case ta:return e.map((function(e){return e.id===t.payload.id&&(e.remise=t.payload.value),e}));case na:return e.map((function(e){return e.id===t.payload.id&&(e.remisePerProduct=t.payload.value),e}));default:return e}},approvis:yo,fromdepots:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ta:return t.payload;case ka:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(ce.a)(e));case Ia:return e.filter((function(e){return e.id!==t.payload}));case _a:return[];case Qa:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProductDepot=Number(t.payload.qtt)),e}));case La:case za:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCCDepot=Number(t.payload.value)),e}));case Ha:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProductDepot=Number(t.payload.value)),e}));case Ua:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirrordepot=Number(t.payload.value),e.qttByCCDepot=1*t.payload.value/2),e}));case Ya:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirrordepot=Number(t.payload.value),e.qttByCCDepot=1*t.payload.value*2),e}));case Ka:return e.map((function(e){return e.id===t.payload.id&&(e.qttByCCDepot-=t.payload.qttccpventedepot),e}));default:return e}},stock:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=(t.type,t.payload);switch(t.type){case Rn:return Object(Ee.a)(Object(Ee.a)({},e),t.payload);case Fn:return n;default:return e}},checkout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ir:return Object(Ee.a)(Object(Ee.a)({},e),{},{shipping:t.payload});case sr:return Object(Ee.a)(Object(Ee.a)({},e),{},{payment:t.payload});case dr:return qo;default:return e}},parametres:Co,tomagasins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ki:return t.payload;case Gi:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(ce.a)(e));case Wi:return e.filter((function(e){return e.id!==t.payload}));case Ji:return[];case Xi:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct+=1),e}));case Xi:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=Number(t.payload.qtt)),e}));case Zi:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct-=1),e}));case $i:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=t.payload.value),e}));default:return e}},frommagasins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ja:return t.payload;case Xa:return e.some((function(e){return e.id===t.payload.id}))?e:[t.payload].concat(Object(ce.a)(e));case Za:return e.filter((function(e){return e.id!==t.payload}));case $a:return[];case ei:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=Number(t.payload.qtt)),e}));case di:return e.map((function(e){return e.id==t.payload.id&&(e.qttbybrute=Number(t.payload.value)),e}));case ti:case ai:return e.map((function(e){return e.id==t.payload.id&&(e.qttByCC=Number(t.payload.value)),e}));case ni:return e.map((function(e){return e.id===t.payload.id&&(e.quantityParProduct=Number(t.payload.value)),e}));case si:return e.map((function(e){return e.id===t.payload.id&&(e.qttbylitre=Number(t.payload.value)),e}));case ci:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirror=Number(t.payload.value),e.qttByCC=1*t.payload.value),e}));case ri:return e.map((function(e){return e.id===t.payload.id&&(e.qttyspecificmirror=Number(t.payload.value),e.qttByCC=1*t.payload.value*2),e}));case ii:return e.map((function(e){return e.id===t.payload.id&&(e.qttByCC-=t.payload.qttccpvente),e}));default:return e}},sortiedepots:Ao}),Eo=c(1e3),wo=Eo.persistStore,Po=(0,Eo.persistReducer)({key:"root",whitelist:["auth","profile","basket","approvisionnement","searchbydate"],storage:c(934).default},So),Vo=Object(jn.c)(Po,(jo=[mo.a],jn.a.apply(void 0,Object(ce.a)(jo)))),Ro=wo(Vo),Fo=c(507),Do=c(1051),Mo=(c(937),c(938),c(939),c(940),c(1047)),Bo=Object(Mo.a)({fontSizes:{lg:"18px"},fonts:{heading:"Montserrat",body:"Montserrat"},styles:{global:function(e){return{"html, body":{fontSize:"sm",lineHeight:"tall"}}}},components:{Button:{baseStyle:{fontWeight:"bold"},sizes:{xl:{h:"56px",fontSize:"sm",px:"13px"}},variants:{"with-shadow":{bg:"#2c5282"},solid:function(e){return{bg:(e.colorMode,"#2c5282")}}}}}}),To=c(229);s.a.render(Object(To.jsx)(Do.a,{theme:Bo,children:Object(To.jsx)(ie.a,{store:Vo,children:Object(To.jsx)(Fo.a,{loading:null,persistor:Ro,children:Object(To.jsx)(bo,{})})})}),document.getElementById("root")),d()}},[[998,1,2]]]);
//# sourceMappingURL=main.ba80c5ac.chunk.js.map